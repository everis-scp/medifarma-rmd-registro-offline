/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define([],function(){"use strict";var _={};function a(i,C){if(!(i instanceof C)){throw new TypeError("Cannot call a class as a function");}}function b(t,p){for(var i=0;i<p.length;i++){var d=p[i];d.enumerable=d.enumerable||false;d.configurable=true;if("value"in d)d.writable=true;Object.defineProperty(t,d.key,d);}}function c(C,p,s){if(p)b(C.prototype,p);if(s)b(C,s);return C;}var A=function(){function A(e,d){var f,g,h,i;a(this,A);this._entityType=e;this._converterContext=d;this._oAggregationAnnotationTarget=this._determineAggregationAnnotationTarget();var t;if(((f=this._oAggregationAnnotationTarget)===null||f===void 0?void 0:f._type)==="NavigationProperty"){var j,k;t=(j=this._oAggregationAnnotationTarget)===null||j===void 0?void 0:(k=j.annotations)===null||k===void 0?void 0:k.Aggregation;}else if(((g=this._oAggregationAnnotationTarget)===null||g===void 0?void 0:g._type)==="EntityType"){var l,m;t=(l=this._oAggregationAnnotationTarget)===null||l===void 0?void 0:(m=l.annotations)===null||m===void 0?void 0:m.Aggregation;}else if(((h=this._oAggregationAnnotationTarget)===null||h===void 0?void 0:h._type)==="EntitySet"){var n,o;t=(n=this._oAggregationAnnotationTarget)===null||n===void 0?void 0:(o=n.annotations)===null||o===void 0?void 0:o.Aggregation;}this._bApplySupported=((i=t)===null||i===void 0?void 0:i.ApplySupported)?true:false;if(this._bApplySupported){var p,q;this._aGroupableProperties=(p=t)===null||p===void 0?void 0:(q=p.ApplySupported)===null||q===void 0?void 0:q.GroupableProperties;}}_.AggregationHelper=A;c(A,[{key:"_determineAggregationAnnotationTarget",value:function p(){var d,e,f,g,h;var i=((d=this._converterContext.getDataModelObjectPath())===null||d===void 0?void 0:(e=d.targetEntitySet)===null||e===void 0?void 0:(f=e.entityType)===null||f===void 0?void 0:(g=f.annotations)===null||g===void 0?void 0:(h=g.Common)===null||h===void 0?void 0:h.ResultContext)?true:false;var o;if(i){var j,k,l,m;var D=this._converterContext.getDataModelObjectPath();var n=D===null||D===void 0?void 0:D.targetObject;var E=D===null||D===void 0?void 0:D.targetEntityType;if(n===null||n===void 0?void 0:(j=n.annotations)===null||j===void 0?void 0:(k=j.Aggregation)===null||k===void 0?void 0:k.ApplySupported){o=n;}else if(E===null||E===void 0?void 0:(l=E.annotations)===null||l===void 0?void 0:(m=l.Aggregation)===null||m===void 0?void 0:m.ApplySupported){o=E;}}else{o=this._converterContext.getEntitySet();}return o;}},{key:"isAnalyticsSupported",value:function i(){return this._bApplySupported;}},{key:"isPropertyGroupable",value:function i(p){if(!this._bApplySupported){return undefined;}else if(!this._aGroupableProperties||this._aGroupableProperties.length===0){return true;}else{return this._aGroupableProperties.findIndex(function(d){return d.$target.fullyQualifiedName===p.fullyQualifiedName;})>=0;}}},{key:"isPropertyAggregatable",value:function i(p){if(!this._bApplySupported){return undefined;}else{var C=this._converterContext.getAnnotationsByTerm("Aggregation","Org.OData.Aggregation.V1.CustomAggregate",[this._oAggregationAnnotationTarget]);return C.some(function(d){return p.name===d.qualifier;});}}},{key:"getCustomAggregateDefinitions",value:function g(){var d=this;var D={};var C=this._converterContext.getAnnotationsByTerm("Aggregation","Org.OData.Aggregation.V1.CustomAggregate",[this._oAggregationAnnotationTarget]);C.forEach(function(e){var o=d._entityType.entityProperties.find(function(p){return p.name===e.qualifier;});if(o){var f,h;var i=(f=e.annotations)===null||f===void 0?void 0:(h=f.Aggregation)===null||h===void 0?void 0:h.ContextDefiningProperties;D[o.name]=i?i.map(function(j){return j.value;}):[];}});return D;}}]);return A;}();_.AggregationHelper=A;return _;},false);
