/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["../ManifestSettings","../controls/ObjectPage/SubSection","../controls/ObjectPage/HeaderFacet","../helpers/ID","../helpers/ConfigurableObject","sap/fe/core/converters/controls/Common/Action","sap/fe/core/converters/objectPage/HeaderAndFooterAction","sap/fe/core/helpers/BindingExpression"],function(M,S,H,I,C,A,a,B){"use strict";var _={};var n=B.not;var e=B.equal;var c=B.compileBinding;var b=B.annotationExpression;var g=a.getHiddenHeaderActions;var d=a.getFooterDefaultActions;var f=a.getHeaderDefaultActions;var r=A.removeDuplicateActions;var h=A.getActionsFromManifest;var P=C.Placement;var j=C.insertCustomElements;var k=I.SectionID;var E=I.EditableHeaderSectionID;var l=I.CustomSectionID;var m=H.getHeaderFacetsFromManifest;var o=H.getHeaderFacetsFromAnnotations;var p=S.createCustomHeaderFacetSubSections;var q=S.createSubSections;var s=S.createCustomSubSections;var T=M.TemplateType;function t(i,N){var O=Object.keys(i);if(Object.getOwnPropertySymbols){var Q=Object.getOwnPropertySymbols(i);if(N)Q=Q.filter(function(R){return Object.getOwnPropertyDescriptor(i,R).enumerable;});O.push.apply(O,Q);}return O;}function u(N){for(var i=1;i<arguments.length;i++){var O=arguments[i]!=null?arguments[i]:{};if(i%2){t(Object(O),true).forEach(function(Q){v(N,Q,O[Q]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(N,Object.getOwnPropertyDescriptors(O));}else{t(Object(O)).forEach(function(Q){Object.defineProperty(N,Q,Object.getOwnPropertyDescriptor(O,Q));});}}return N;}function v(i,N,O){if(N in i){Object.defineProperty(i,N,{value:O,enumerable:true,configurable:true,writable:true});}else{i[N]=O;}return i;}var w=function(i,N){var O,Q;return((O=i.ID)===null||O===void 0?void 0:O.toString())||((Q=i.Label)===null||Q===void 0?void 0:Q.toString())||N;};function x(N,O){var Q,R;var U=E();var V=(Q=N.getEntityType().annotations)===null||Q===void 0?void 0:(R=Q.UI)===null||R===void 0?void 0:R.HeaderFacets;var W=V?q(V,N,true):[];var X=p(N);var Y=[];if(X.length>0){var i=0;O.forEach(function($){while(W.length>i&&W[i].visible==="false"){Y.push(W[i]);i++;}if(W.length>i&&($.key===W[i].key||$.key.slice($.key.lastIndexOf("::")+2)===W[i].key.slice(W[i].key.lastIndexOf("::")+2))){Y.push(W[i]);i++;}else{X.forEach(function(a1){if($.key===a1.key){Y.push(a1);}});}});}else{Y=W;}var Z={id:U,key:"EditableHeaderContent",title:"{sap.fe.i18n>T_COMMON_OBJECT_PAGE_HEADER_SECTION}",visible:"{= ${ui>/editMode} === 'Editable' }",subSections:Y};return Z;}_.createEditableHeaderSection=x;function y(i){var N,O,Q;var R=i.getEntityType();var U=((N=R.annotations)===null||N===void 0?void 0:(O=N.UI)===null||O===void 0?void 0:(Q=O.Facets)===null||Q===void 0?void 0:Q.map(function(V){return z(V,i);}))||[];return U;}function z(i,N){var O,Q,R;var U=k({Facet:i});var V={id:U,key:w(i,U),title:c(b(i.Label)),showTitle:!!i.Label,visible:c(n(e(b((O=i.annotations)===null||O===void 0?void 0:(Q=O.UI)===null||Q===void 0?void 0:(R=Q.Hidden)===null||R===void 0?void 0:R.valueOf()),true))),subSections:q([i],N)};return V;}function D(i,N){var O={};Object.keys(i).forEach(function(Q){O[Q]=F(i[Q],Q,N);});return O;}function F(i,N,O){var Q=i.id||l(N);var R=i.position;if(!R){R={placement:P.After};}var U;if(!i.subSections){U=v({},N,u({},i,{position:undefined,visible:true}));}else{U=i.subSections;}var V=s(U,O);var W={id:Q,key:N,title:i.title,showTitle:!!i.title,visible:i.visible!==undefined?i.visible:true,position:R,subSections:j([],V,{"title":"overwrite","actions":"merge"})};return W;}var G=function(i){var N=f(i);var O=i.getManifestWrapper();var Q=j(N,h(O.getHeaderActions(),i,N,undefined,undefined,g(i)),{isNavigable:"overwrite",enabled:"overwrite",defaultValuesExtensionFunction:"overwrite"});return r(Q);};_.getHeaderActions=G;var J=function(i){var N=i.getManifestWrapper();var O=d(N.getViewLevel(),i);var Q=j(O,h(N.getFooterActions(),i,O),{isNavigable:"overwrite",enabled:"overwrite",defaultValuesExtensionFunction:"overwrite"});return Q;};_.getFooterActions=J;var K=function(i){var N=i.getManifestWrapper();return j(y(i),D(N.getSections(),i),{"title":"overwrite","visible":"overwrite","subSections":{"actions":"merge","title":"overwrite","sideContent":"overwrite"}});};_.getSections=K;var L=function(i){var N,O;var Q=i.getManifestWrapper();var R;var U=i.getEntityType();var V=j(o(i),m(Q.getHeaderFacets()));var W=G(i);var X=J(i);if(Q.isHeaderEditable()&&(((N=U.annotations.UI)===null||N===void 0?void 0:N.HeaderFacets)||((O=U.annotations.UI)===null||O===void 0?void 0:O.HeaderInfo))){R=x(i,V);}var Y=K(i);return{template:T.ObjectPage,headerFacets:V,headerSection:R,headerActions:W,sections:Y,footerActions:X,showHeader:Q.getShowObjectPageHeader(),showAnchorBar:Q.getShowAnchorBar(),useIconTabBar:Q.useIconTabBar()};};_.convertPage=L;return _;},false);
