/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2021 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/fe/test/Utils","./TemplatePage","sap/ui/test/Opa5","sap/ui/test/OpaBuilder","sap/fe/test/builder/FEBuilder","sap/fe/test/builder/MacroFieldBuilder","sap/fe/test/builder/VMBuilder","sap/fe/test/builder/OverflowToolbarBuilder","sap/fe/test/builder/KPIBuilder","sap/fe/test/api/FooterActionsBase","sap/fe/test/api/FooterAssertionsBase","sap/fe/test/api/HeaderActionsLR","sap/fe/test/api/HeaderAssertionsLR"],function(U,T,O,a,F,b,V,c,K,d,e,H,f){"use strict";function g(i){return"fe::table::"+i+"::LineItem";}function h(E){return"fe::Chart::"+E+"::Chart";}function _(o,p){return F.create(o).hasId(p);}function L(p,A){var s=p.appId,C=p.componentId,i=p.contextPath,E=i?i.substring(1).replace("/","::"):p.entitySet,j=s+"::"+C,S="fe::table::"+E+"::LineItem",k="fe::Chart::"+E+"::Chart",l="fe::FilterBar::"+E,m=l+"::FilterFieldValueHelp::",r=sap.ui.getCore().getLibraryResourceBundle("sap.fe.core"),I="fe::TabMultipleMode",P="fe::ListReport",A=Array.isArray(arguments[1])?arguments[1]:Array.prototype.slice.call(arguments,1);return T.apply(T,[j,{actions:{onTable:function(t){var n;if(t){n=!U.isOfType(t,String)?g(t.property):t;}else{n=S;}return this._onTable({id:n});},onChart:function(v){var n;if(v){n=!U.isOfType(v,String)?h(v.property):v;}else{n=k;}return this._onChart({id:n});},onFilterBar:function(){return this._onFilterBar({id:l});},onHeader:function(){return new H(_(this,P),{id:P});},iCollapseExpandPageHeader:function(n){return this._iCollapseExpandPageHeader(n);},iExecuteActionOnDialog:function(t){return a.create(this).hasType("sap.m.Button").hasProperties({text:t}).isDialogElement().doPress().description("Pressing dialog button '"+t+"'").execute();},iClickLinkWithText:function(t){return a.create(this).hasType("sap.m.Link").hasProperties({text:t}).doPress().description("Navigating via link '"+t+"'").execute();},iOpenIconTabWithTitle:function(n){return a.create(this).hasId(I).has(a.Matchers.aggregation("items",a.Matchers.properties({text:n}))).doPress().description("Selecting Icon Tab "+n).execute();},iSaveVariant:function(v,n,o){var q=U.parseArguments([String,Boolean,Boolean],arguments),t=V.create(this).hasId("fe::PageVariantManagement");if(q[0]){t.doSaveAs(v,n,o).description(U.formatMessage("Saving variant for '{0}' as '{1}' with default='{2}' and applyAutomatically='{3}'","Page Variant",v,!!n,!!o));}else{t.doSave().description(U.formatMessage("Updating current variant for '{0}'","Page Variant"));}return t.execute();},iSelectVariant:function(v){return V.create(this).hasId("fe::PageVariantManagement").doSelectVariant(v).description(U.formatMessage("Selecting variant '{1}' from '{0}'","Page Variant",v)).execute();}},assertions:{onTable:function(t){if(!t){t={id:S};}else{var n=!U.isOfType(t,String)?t.property:t;t={id:g(n)};}return this._onTable(t);},onChart:function(v){var n;if(v){n=!U.isOfType(v,String)?h(v.property):v;}else{n=k;}return this._onChart({id:n});},onFilterBar:function(){return this._onFilterBar({id:l});},onHeader:function(){return new f(_(this,P),{id:P});},iSeeTheMessageToast:function(t){return this._iSeeTheMessageToast(t);},iSeeFilterFieldsInFilterBar:function(n,o){if(o){return a.create(this).hasId(l).check(function(q){return(q.getAggregation("layout").isA("sap.fe.core.controls.filterbar.VisualFilterContainer")&&q.getAggregation("layout").getFilterFields().length===n);}).description("Seeing filter bar with "+n+" filter fields").execute();}return a.create(this).hasId(l).hasAggregationLength("filterItems",n).description("Seeing filter bar with "+n+" filter fields").execute();},iSeeTableCellWithActions:function(n,o,B){return a.create(this).hasType("sap.m.ColumnListItem").has(a.Matchers.bindingPath(n)).has(function(q){var t=q.getCells()[o];if(t.isA("sap.fe.macros.MacroAPI")){t=t.getContent();}return t.getMetadata().getElementName()==="sap.m.Button"&&t.getText()===B;}).description("Inline Action is present in the table cell with the Text "+B).execute();},iSeeLinkWithText:function(t){return a.create(this).hasType("sap.m.Link").hasProperties({text:t}).description("Seeing link with text '"+t+"'").execute();},iSeeQuickViewMoreLinksButton:function(){return a.create(this).isDialogElement(true).hasType("sap.m.Button").has(a.Matchers.resourceBundle("text","sap.ui.mdc","info.POPOVER_DEFINE_LINKS")).description("The 'More Links' button found").execute();},iSeeFlpLink:function(D){return a.create(this).hasType("sap.ui.mdc.link.PanelListItem").isDialogElement(true).hasProperties({text:D}).description("FLP link with text '"+D+"' is present").execute();},iSeeHeaderPinnableToggle:function(v){var n=v?"visible":"hidden";return a.create(this).hasType("sap.f.DynamicPageHeader").hasProperties({pinnable:v}).description("The Page Header Pinnable Toggle is "+n).execute();},iSeeContactPopoverWithAvatarImage:function(n){return a.create(this).hasType("sap.ui.mdc.link.Panel").check(function(o){var q=o.some(function(t){return t.src===n;});return q===false;},true).description("Seeing Contact Card with Avatar Image in ListReport").execute();},iSeeLabelWithText:function(t){return a.create(this).hasType("sap.m.Label").hasProperties({text:t}).description("Not Seeing label with text '"+t+"'").execute();},iSeeQuickViewTitleWithText:function(t){return a.create(this).hasType("sap.ui.mdc.link.Panel").check(function(n){var o=n.some(function(q){return q.text===t;});return o===false;},true).description("Seeing QuickView with Title in ListReport").execute();},iSeeSummaryOfAppliedFilters:function(){var n;a.create(this).hasId(l).mustBeVisible(false).do(function(o){n=o.getAssignedFiltersText().filtersText;}).execute();return a.create(this).hasType("sap.f.DynamicPageTitle").has(function(D){return D.getSnappedContent()[0].getText()===n;}).description("The correct text on the collapsed filterbar is displayed").execute();},iSeeDeleteConfirmation:function(){return this._iSeeTheMessageToast(r.getText("C_TRANSACTION_HELPER_OBJECT_PAGE_DELETE_TOAST_SINGULAR"));},iSeePageTitle:function(t){return a.create(this).hasType("sap.f.DynamicPageTitle").hasAggregationProperties("heading",{text:t}).description("Seeing title '"+t+"'").execute();},iSeeVariantTitle:function(t){return a.create(this).hasType("sap.m.Title").hasId("fe::PageVariantManagement-text").hasProperties({text:t}).description("Seeing variant title '"+t+"'").execute();},iSeeControlVMFilterBarTitle:function(t){return a.create(this).hasType("sap.m.Title").hasId(l+"::VariantManagement-text").hasProperties({text:t}).description("Seeing variant title '"+t+"'").execute();},iSeeControlVMTableTitle:function(t,n){var o=n?g(n):S;return a.create(this).hasType("sap.m.Title").hasId(o+"::VM-text").hasProperties({text:t}).description("Seeing variant title '"+t+"'").execute();},iSeeVariantModified:function(n,o){var q;if(o){q=l+"::VariantManagement-modified";}else{q="fe::PageVariantManagement-modified";}n=n===undefined?true:n;if(n){return a.create(this).hasType("sap.m.Label").hasId(q).hasProperties({text:"*"}).description("Seeing variant state as 'modified'").execute();}else{return a.create(this).hasType("sap.m.Label").check(function(t){return!t.some(function(u){return u.getId()===q;});},true).description("Seeing variant state as 'not modified'").execute();}},iSeePageVM:function(n){return F.create(this).hasId("fe::PageVariantManagement").hasState(n).description(U.formatMessage("Seeing page VM with state '{0}'",n)).execute();},iSeeControlVMFilterBar:function(){return a.create(this).hasId(l+"::VariantManagement").description("Seeing control VM - FilterBar").execute();},iSeeDraftIndicator:function(){return a.create(this).hasType("sap.m.Link").hasProperties({text:r.getText("C_DRAFT_POPOVER_ADMIN_DATA_DRAFTINFO_DRAFT_OBJECT")}).description("Draft indicator is visible").execute();},iSeeDraftIndicatorLocked:function(u){var t=r.getText("C_DRAFT_POPOVER_ADMIN_DATA_DRAFTINFO_LOCKED_OBJECT_WITH_OWNER_INFO",[u]);return a.create(this).hasType("sap.m.Link").hasProperties({text:t}).description("Draft indicator is visible and displays '"+t+"'").execute();},iSeeIconTabWithProperties:function(n){return(a.create(this).hasId(I).has(a.Matchers.aggregationMatcher("items",a.Matchers.properties(n))).description(U.formatMessage("Seeing Icon Tab with properties '{0}'",n)).execute());},iSeeNumOfOperators:function(n,o){return a.create(this).hasId(m+n+"-DCP").doOnChildren(a.create(this).hasAggregationLength("items",o)).description("Seeing a value list of condition operators with "+o+" items.").execute();},iCheckValueForFieldInCreateDialog:function(n,v,o){return b.create(this).isDialogElement().hasId(n).hasValue(v).hasProperties({required:!!o}).description(U.formatMessage("Seeing Create dialog parameter '{0}' with value '{1}'",n,v)).execute();},iSeeKPI:function(t,o){var D="Seeing KPI '"+t+"'";if(o){D+=" with properties "+JSON.stringify(o);}return K.create(this).checkKPI(t,o).description(D).execute();}}}].concat(A));}return L;});
