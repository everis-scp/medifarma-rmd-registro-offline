/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/converters/common/AnnotationConverter"],function(A){"use strict";var _={};function c(o){if(typeof Symbol==="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(o=h(o))){var i=0;var F=function(){};return{s:F,n:function(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]};},e:function(e){throw e;},f:F};}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}var a,n=true,b=false,u;return{s:function(){a=o[Symbol.iterator]();},n:function(){var e=a.next();n=e.done;return e;},e:function(e){b=true;u=e;},f:function(){try{if(!n&&a.return!=null)a.return();}finally{if(b)throw u;}}};}function d(o,a,v){if(a in o){Object.defineProperty(o,a,{value:v,enumerable:true,configurable:true,writable:true});}else{o[a]=v;}return o;}function f(a,i){return l(a)||k(a,i)||h(a,i)||g();}function g(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function h(o,a){if(!o)return;if(typeof o==="string")return j(o,a);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(o,a);}function j(a,b){if(b==null||b>a.length)b=a.length;for(var i=0,e=new Array(b);i<b;i++){e[i]=a[i];}return e;}function k(a,i){if(typeof Symbol==="undefined"||!(Symbol.iterator in Object(a)))return;var b=[];var e=true;var n=false;var o=undefined;try{for(var u=a[Symbol.iterator](),v;!(e=(v=u.next()).done);e=true){b.push(v.value);if(i&&b.length===i)break;}}catch(w){n=true;o=w;}finally{try{if(!e&&u["return"]!=null)u["return"]();}finally{if(n)throw o;}}return b;}function l(a){if(Array.isArray(a))return a;}var V={"Org.OData.Capabilities.V1":"Capabilities","Org.OData.Core.V1":"Core","Org.OData.Measures.V1":"Measures","com.sap.vocabularies.Common.v1":"Common","com.sap.vocabularies.UI.v1":"UI","com.sap.vocabularies.Session.v1":"Session","com.sap.vocabularies.Analytics.v1":"Analytics","com.sap.vocabularies.PersonalData.v1":"PersonalData","com.sap.vocabularies.Communication.v1":"Communication"};var D={Chart:true,MicroChart:true,UShell:true,IntentBasedNavigation:true};_.DefaultEnvironmentCapabilities=D;var M={parsePropertyValue:function(a,b,e,i,C){var n=this;var v;var o=e+"/"+b;if(a===null){v={type:"Null",Null:null};}else if(typeof a==="string"){v={type:"String",String:a};}else if(typeof a==="boolean"){v={type:"Bool",Bool:a};}else if(typeof a==="number"){v={type:"Int",Int:a};}else if(Array.isArray(a)){v={type:"Collection",Collection:a.map(function(u,w){return n.parseAnnotationObject(u,o+"/"+w,i,C);})};if(a.length>0){if(a[0].hasOwnProperty("$PropertyPath")){v.Collection.type="PropertyPath";}else if(a[0].hasOwnProperty("$Path")){v.Collection.type="Path";}else if(a[0].hasOwnProperty("$NavigationPropertyPath")){v.Collection.type="NavigationPropertyPath";}else if(a[0].hasOwnProperty("$AnnotationPath")){v.Collection.type="AnnotationPath";}else if(a[0].hasOwnProperty("$Type")){v.Collection.type="Record";}else if(a[0].hasOwnProperty("$If")){v.Collection.type="If";}else if(a[0].hasOwnProperty("$Or")){v.Collection.type="Or";}else if(a[0].hasOwnProperty("$And")){v.Collection.type="And";}else if(a[0].hasOwnProperty("$Eq")){v.Collection.type="Eq";}else if(a[0].hasOwnProperty("$Ne")){v.Collection.type="Ne";}else if(a[0].hasOwnProperty("$Not")){v.Collection.type="Not";}else if(a[0].hasOwnProperty("$Gt")){v.Collection.type="Gt";}else if(a[0].hasOwnProperty("$Ge")){v.Collection.type="Ge";}else if(a[0].hasOwnProperty("$Lt")){v.Collection.type="Lt";}else if(a[0].hasOwnProperty("$Le")){v.Collection.type="Le";}else if(a[0].hasOwnProperty("$Apply")){v.Collection.type="Apply";}else if(typeof a[0]==="object"){v.Collection.type="Record";}else{v.Collection.type="String";}}}else if(a.$Path!==undefined){v={type:"Path",Path:a.$Path};}else if(a.$Decimal!==undefined){v={type:"Decimal",Decimal:parseFloat(a.$Decimal)};}else if(a.$PropertyPath!==undefined){v={type:"PropertyPath",PropertyPath:a.$PropertyPath};}else if(a.$NavigationPropertyPath!==undefined){v={type:"NavigationPropertyPath",NavigationPropertyPath:a.$NavigationPropertyPath};}else if(a.$If!==undefined){v={type:"If",If:a.$If};}else if(a.$And!==undefined){v={type:"And",And:a.$And};}else if(a.$Or!==undefined){v={type:"Or",Or:a.$Or};}else if(a.$Not!==undefined){v={type:"Not",Not:a.$Not};}else if(a.$Eq!==undefined){v={type:"Eq",Eq:a.$Eq};}else if(a.$Ne!==undefined){v={type:"Ne",Ne:a.$Ne};}else if(a.$Gt!==undefined){v={type:"Gt",Gt:a.$Gt};}else if(a.$Ge!==undefined){v={type:"Ge",Ge:a.$Ge};}else if(a.$Lt!==undefined){v={type:"Lt",Lt:a.$Lt};}else if(a.$Le!==undefined){v={type:"Le",Le:a.$Le};}else if(a.$Apply!==undefined){v={type:"Apply",Apply:a.$Apply,Function:a.$Function};}else if(a.$AnnotationPath!==undefined){v={type:"AnnotationPath",AnnotationPath:a.$AnnotationPath};}else if(a.$EnumMember!==undefined){v={type:"EnumMember",EnumMember:this.mapNameToAlias(a.$EnumMember.split("/")[0])+"/"+a.$EnumMember.split("/")[1]};}else if(a.$Type){v={type:"Record",Record:this.parseAnnotationObject(a,e,i,C)};}else{v={type:"Record",Record:this.parseAnnotationObject(a,e,i,C)};}return{name:b,value:v};},mapNameToAlias:function(a){var b=a.split("@"),e=f(b,2),i=e[0],n=e[1];if(!n){n=i;i="";}else{i+="@";}var o=n.lastIndexOf(".");return i+V[n.substr(0,o)]+"."+n.substr(o+1);},parseAnnotationObject:function(a,b,e,C){var i=this;var n={};if(a===null){n={type:"Null",Null:null};}else if(typeof a==="string"){n={type:"String",String:a};}else if(typeof a==="boolean"){n={type:"Bool",Bool:a};}else if(typeof a==="number"){n={type:"Int",Int:a};}else if(a.$AnnotationPath!==undefined){n={type:"AnnotationPath",AnnotationPath:a.$AnnotationPath};}else if(a.$Path!==undefined){n={type:"Path",Path:a.$Path};}else if(a.$Decimal!==undefined){n={type:"Decimal",Decimal:parseFloat(a.$Decimal)};}else if(a.$PropertyPath!==undefined){n={type:"PropertyPath",PropertyPath:a.$PropertyPath};}else if(a.$If!==undefined){n={type:"If",If:a.$If};}else if(a.$And!==undefined){n={type:"And",And:a.$And};}else if(a.$Or!==undefined){n={type:"Or",Or:a.$Or};}else if(a.$Not!==undefined){n={type:"Not",Not:a.$Not};}else if(a.$Eq!==undefined){n={type:"Eq",Eq:a.$Eq};}else if(a.$Ne!==undefined){n={type:"Ne",Ne:a.$Ne};}else if(a.$Gt!==undefined){n={type:"Gt",Gt:a.$Gt};}else if(a.$Ge!==undefined){n={type:"Ge",Ge:a.$Ge};}else if(a.$Lt!==undefined){n={type:"Lt",Lt:a.$Lt};}else if(a.$Le!==undefined){n={type:"Le",Le:a.$Le};}else if(a.$Apply!==undefined){n={type:"Apply",Apply:a.$Apply,Function:a.$Function};}else if(a.$NavigationPropertyPath!==undefined){n={type:"NavigationPropertyPath",NavigationPropertyPath:a.$NavigationPropertyPath};}else if(a.$EnumMember!==undefined){n={type:"EnumMember",EnumMember:this.mapNameToAlias(a.$EnumMember.split("/")[0])+"/"+a.$EnumMember.split("/")[1]};}else if(Array.isArray(a)){var o=n;o.collection=a.map(function(w,x){return i.parseAnnotationObject(w,b+"/"+x,e,C);});if(a.length>0){if(a[0].hasOwnProperty("$PropertyPath")){o.collection.type="PropertyPath";}else if(a[0].hasOwnProperty("$Path")){o.collection.type="Path";}else if(a[0].hasOwnProperty("$NavigationPropertyPath")){o.collection.type="NavigationPropertyPath";}else if(a[0].hasOwnProperty("$AnnotationPath")){o.collection.type="AnnotationPath";}else if(a[0].hasOwnProperty("$Type")){o.collection.type="Record";}else if(a[0].hasOwnProperty("$If")){o.collection.type="If";}else if(a[0].hasOwnProperty("$And")){o.collection.type="And";}else if(a[0].hasOwnProperty("$Or")){o.collection.type="Or";}else if(a[0].hasOwnProperty("$Eq")){o.collection.type="Eq";}else if(a[0].hasOwnProperty("$Ne")){o.collection.type="Ne";}else if(a[0].hasOwnProperty("$Not")){o.collection.type="Not";}else if(a[0].hasOwnProperty("$Gt")){o.collection.type="Gt";}else if(a[0].hasOwnProperty("$Ge")){o.collection.type="Ge";}else if(a[0].hasOwnProperty("$Lt")){o.collection.type="Lt";}else if(a[0].hasOwnProperty("$Le")){o.collection.type="Le";}else if(a[0].hasOwnProperty("$Apply")){o.collection.type="Apply";}else if(typeof a[0]==="object"){o.collection.type="Record";}else{o.collection.type="String";}}}else{if(a.$Type){var u=a.$Type;n.type=u;}var v=[];Object.keys(a).forEach(function(w){if(w!=="$Type"&&w!=="$If"&&w!=="$Apply"&&w!=="$And"&&w!=="$Or"&&w!=="$Ne"&&w!=="$Gt"&&w!=="$Ge"&&w!=="$Lt"&&w!=="$Le"&&w!=="$Not"&&w!=="$Eq"&&!w.startsWith("@")){v.push(i.parsePropertyValue(a[w],w,b,e,C));}else if(w.startsWith("@")){i.createAnnotationLists(d({},w,a[w]),b,e,C);}});n.propertyValues=v;}return n;},getOrCreateAnnotationList:function(a,b){var e=b.find(function(i){return i.target===a;});if(!e){e={target:a,annotations:[]};b.push(e);}return e;},createAnnotationLists:function(a,b,e,C){var i=this;var o=this.getOrCreateAnnotationList(b,e);if(!C.MicroChart){delete a["@com.sap.vocabularies.UI.v1.Chart"];}function n(w){return w.filter(function(R){if(R.Target&&R.Target.$AnnotationPath){return R.Target.$AnnotationPath.indexOf("@com.sap.vocabularies.UI.v1.Chart")===-1;}else{return true;}});}function u(w){return w.filter(function(R){return R.$Type!=="com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation";});}function v(w){return w.filter(function(R){return R.$AnnotationPath!=="@com.sap.vocabularies.UI.v1.Chart";});}Object.keys(a).forEach(function(w){var x=a[w];switch(w){case"@com.sap.vocabularies.UI.v1.HeaderFacets":if(!C.MicroChart){x=n(x);}break;case"@com.sap.vocabularies.UI.v1.Identification":if(!C.IntentBasedNavigation){x=u(x);}break;case"@com.sap.vocabularies.UI.v1.LineItem":if(!C.IntentBasedNavigation){x=u(x);}if(!C.MicroChart){x=n(x);}break;case"@com.sap.vocabularies.UI.v1.FieldGroup":if(!C.IntentBasedNavigation){x.Data=u(x.Data);}if(!C.MicroChart){x.Data=n(x.Data);}break;case"@com.sap.vocabularies.UI.v1.PresentationVariant":if(!C.Chart&&x.Visualizations){x.Visualizations=v(x.Visualizations);}break;default:break;}a[w]=x;var y=o;var z=w.split("@");if(z.length>2){y=i.getOrCreateAnnotationList(b+"@"+z[1],e);w=z[2];}else{w=z[1];}var B=w.split("#");var E=B[1];w=B[0];var F={term:"".concat(w),qualifier:E};var G=b+"@"+F.term;if(E){G+="#"+E;}var H=false;if(x===null){F.value={type:"Bool",Bool:x};}else if(typeof x==="string"){F.value={type:"String",String:x};}else if(typeof x==="boolean"){F.value={type:"Bool",Bool:x};}else if(typeof x==="number"){F.value={type:"Int",Int:x};}else if(x.$If!==undefined){F.value={type:"If",If:x.$If};}else if(x.$And!==undefined){F.value={type:"And",And:x.$And};}else if(x.$Or!==undefined){F.value={type:"Or",Or:x.$Or};}else if(x.$Not!==undefined){F.value={type:"Not",Not:x.$Not};}else if(x.$Eq!==undefined){F.value={type:"Eq",Eq:x.$Eq};}else if(x.$Ne!==undefined){F.value={type:"Ne",Ne:x.$Ne};}else if(x.$Gt!==undefined){F.value={type:"Gt",Gt:x.$Gt};}else if(x.$Ge!==undefined){F.value={type:"Ge",Ge:x.$Ge};}else if(x.$Lt!==undefined){F.value={type:"Lt",Lt:x.$Lt};}else if(x.$Le!==undefined){F.value={type:"Le",Le:x.$Le};}else if(x.$Apply!==undefined){F.value={type:"Apply",Apply:x.$Apply,Function:x.$Function};}else if(x.$Path!==undefined){F.value={type:"Path",Path:x.$Path};}else if(x.$AnnotationPath!==undefined){F.value={type:"AnnotationPath",AnnotationPath:x.$AnnotationPath};}else if(x.$Decimal!==undefined){F.value={type:"Decimal",Decimal:parseFloat(x.$Decimal)};}else if(x.$EnumMember!==undefined){F.value={type:"EnumMember",EnumMember:i.mapNameToAlias(x.$EnumMember.split("/")[0])+"/"+x.$EnumMember.split("/")[1]};}else if(Array.isArray(x)){H=true;F.collection=x.map(function(L,N){return i.parseAnnotationObject(L,G+"/"+N,e,C);});if(x.length>0){if(x[0].hasOwnProperty("$PropertyPath")){F.collection.type="PropertyPath";}else if(x[0].hasOwnProperty("$Path")){F.collection.type="Path";}else if(x[0].hasOwnProperty("$NavigationPropertyPath")){F.collection.type="NavigationPropertyPath";}else if(x[0].hasOwnProperty("$AnnotationPath")){F.collection.type="AnnotationPath";}else if(x[0].hasOwnProperty("$Type")){F.collection.type="Record";}else if(x[0].hasOwnProperty("$If")){F.collection.type="If";}else if(x[0].hasOwnProperty("$Or")){F.collection.type="Or";}else if(x[0].hasOwnProperty("$Eq")){F.collection.type="Eq";}else if(x[0].hasOwnProperty("$Ne")){F.collection.type="Ne";}else if(x[0].hasOwnProperty("$Not")){F.collection.type="Not";}else if(x[0].hasOwnProperty("$Gt")){F.collection.type="Gt";}else if(x[0].hasOwnProperty("$Ge")){F.collection.type="Ge";}else if(x[0].hasOwnProperty("$Lt")){F.collection.type="Lt";}else if(x[0].hasOwnProperty("$Le")){F.collection.type="Le";}else if(x[0].hasOwnProperty("$And")){F.collection.type="And";}else if(x[0].hasOwnProperty("$Apply")){F.collection.type="Apply";}else if(typeof x[0]==="object"){F.collection.type="Record";}else{F.collection.type="String";}}}else{var I={propertyValues:[]};if(x.$Type){var J=x.$Type;I.type="".concat(J);}var K=[];Object.keys(x).forEach(function(L){if(L!=="$Type"&&!L.startsWith("@")){K.push(i.parsePropertyValue(x[L],L,G,e,C));}else if(L.startsWith("@")){i.createAnnotationLists(d({},L,x[L]),G,e,C);}});I.propertyValues=K;F.record=I;}F.isCollection=H;y.annotations.push(F);});},parseProperty:function(o,e,a,b,C){var i=o.getObject("/".concat(e.fullyQualifiedName,"/").concat(a,"@"));var n=o.getObject("/".concat(e.fullyQualifiedName,"/").concat(a));var u={_type:"Property",name:a,fullyQualifiedName:"".concat(e.fullyQualifiedName,"/").concat(a),type:n.$Type,maxLength:n.$MaxLength,precision:n.$Precision,scale:n.$Scale,nullable:n.$Nullable};this.createAnnotationLists(i,u.fullyQualifiedName,b,C);return u;},parseNavigationProperty:function(o,e,n,a,C){var b=o.getObject("/".concat(e.fullyQualifiedName,"/").concat(n,"@"));var i=o.getObject("/".concat(e.fullyQualifiedName,"/").concat(n));var u=[];if(i.$ReferentialConstraint){u=Object.keys(i.$ReferentialConstraint).map(function(w){return{sourceTypeName:e.name,sourceProperty:w,targetTypeName:i.$Type,targetProperty:i.$ReferentialConstraint[w]};});}var v={_type:"NavigationProperty",name:n,fullyQualifiedName:"".concat(e.fullyQualifiedName,"/").concat(n),partner:i.$Partner,isCollection:i.$isCollection?i.$isCollection:false,containsTarget:i.$ContainsTarget,targetTypeName:i.$Type,referentialConstraint:u};this.createAnnotationLists(b,v.fullyQualifiedName,a,C);return v;},parseEntitySet:function(o,e,a,b,C){var i=o.getObject("/".concat(e));var n=o.getObject("/".concat(e,"@"));var u={_type:"EntitySet",name:e,navigationPropertyBinding:{},entityTypeName:i.$Type,fullyQualifiedName:"".concat(b,"/").concat(e)};this.createAnnotationLists(n,u.fullyQualifiedName,a,C);return u;},parseSingleton:function(o,a,b,e,C){var i=o.getObject("/".concat(a));var n=o.getObject("/".concat(a,"@"));var u={_type:"Singleton",name:a,navigationPropertyBinding:{},typeName:i.$Type,fullyQualifiedName:"".concat(e,"/").concat(a),nullable:true};this.createAnnotationLists(n,u.fullyQualifiedName,b,C);return u;},parseEntityType:function(o,e,a,n,C){var b=this;var i=o.getObject("/".concat(e,"@"));var u=o.getObject("/".concat(e));var v=w(u);function w(u){if(!u.$Key&&u.$BaseType){return w(o.getObject("/".concat(u.$BaseType)));}return u.$Key||[];}var x={_type:"EntityType",name:e.replace(n+".",""),fullyQualifiedName:e,keys:[],entityProperties:[],navigationProperties:[]};this.createAnnotationLists(i,x.fullyQualifiedName,a,C);var y=Object.keys(u).filter(function(B){if(B!="$Key"&&B!="$kind"){return u[B].$kind==="Property";}}).map(function(B){return b.parseProperty(o,x,B,a,C);});var z=Object.keys(u).filter(function(B){if(B!="$Key"&&B!="$kind"){return u[B].$kind==="NavigationProperty";}}).map(function(B){return b.parseNavigationProperty(o,x,B,a,C);});x.keys=v.map(function(B){return y.find(function(E){return E.name===B;});}).filter(function(B){return B!==undefined;});x.entityProperties=y;x.navigationProperties=z;return x;},parseComplexType:function(o,a,b,n,C){var e=this;var i=o.getObject("/".concat(a,"@"));var u=o.getObject("/".concat(a));var v={_type:"ComplexType",name:a.replace(n+".",""),fullyQualifiedName:a,properties:[],navigationProperties:[]};this.createAnnotationLists(i,v.fullyQualifiedName,b,C);var w=Object.keys(u).filter(function(y){if(y!="$Key"&&y!="$kind"){return u[y].$kind==="Property";}}).map(function(y){return e.parseProperty(o,v,y,b,C);});v.properties=w;var x=Object.keys(u).filter(function(y){if(y!="$Key"&&y!="$kind"){return u[y].$kind==="NavigationProperty";}}).map(function(y){return e.parseNavigationProperty(o,v,y,b,C);});v.navigationProperties=x;return v;},parseAction:function(a,b,n,e){var i="";var o="".concat(a);var u=a.substr(n.length+1);if(b.$IsBound){var v=b.$Parameter[0];i=v.$Type;if(v.$isCollection===true){o="".concat(a,"(Collection(").concat(i,"))");}else{o="".concat(a,"(").concat(i,")");}}else{o="".concat(e,"/").concat(u);}var w=b.$Parameter||[];return{_type:"Action",name:u,fullyQualifiedName:o,isBound:b.$IsBound,sourceType:i,returnType:b.$ReturnType?b.$ReturnType.$Type:"",parameters:w.map(function(x){return{_type:"ActionParameter",isEntitySet:x.$Type===b.$EntitySetPath,fullyQualifiedName:"".concat(o,"/").concat(x.$Name),type:x.$Type};})};},parseEntityTypes:function(o,i){var e=this;var C;if(!i){C=D;}else{C=i;}var n=o.getObject("/$");var E=o.getObject("/");var u=[];var v=[];var w=[];var x=[];var y=[];var z=n.$EntityContainer;var B="";var F=Object.keys(n).filter(function(a){return n[a].$kind==="Schema";});if(F&&F.length>0){B=F[0].substr(0,F[0].length-1);}else if(v&&v.length){B=v[0].fullyQualifiedName.replace(v[0].name,"");B=B.substr(0,B.length-1);}Object.keys(n).filter(function(a){return a!=="$kind"&&n[a].$kind==="EntityType";}).forEach(function(a){var b=e.parseEntityType(o,a,u,B,C);b.entityProperties.forEach(function(P){if(!n.$Annotations[P.fullyQualifiedName]){n.$Annotations[P.fullyQualifiedName]={};}if(!n.$Annotations[P.fullyQualifiedName]["@com.sap.vocabularies.UI.v1.DataFieldDefault"]){n.$Annotations[P.fullyQualifiedName]["@com.sap.vocabularies.UI.v1.DataFieldDefault"]={$Type:"com.sap.vocabularies.UI.v1.DataField",Value:{$Path:P.name}};e.createAnnotationLists({"@com.sap.vocabularies.UI.v1.DataFieldDefault":n.$Annotations[P.fullyQualifiedName]["@com.sap.vocabularies.UI.v1.DataFieldDefault"]},P.fullyQualifiedName,u,C);}});v.push(b);});Object.keys(E).filter(function(a){return a!=="$kind"&&E[a].$kind==="EntitySet";}).forEach(function(a){var b=e.parseEntitySet(o,a,u,z,C);w.push(b);});Object.keys(E).filter(function(a){return a!=="$kind"&&E[a].$kind==="Singleton";}).forEach(function(a){var b=e.parseSingleton(o,a,u,z,C);x.push(b);});Object.keys(n).filter(function(a){return a!=="$kind"&&n[a].$kind==="ComplexType";}).forEach(function(a){var b=e.parseComplexType(o,a,u,B,C);y.push(b);});var G=Object.keys(n).find(function(z){return z!=="$kind"&&n[z].$kind==="EntityContainer";});var H={};if(G){H={name:G.replace(B+".",""),fullyQualifiedName:G};}w.forEach(function(a){var b=n[z][a.name].$NavigationPropertyBinding;if(b){Object.keys(b).forEach(function(P){var Q=w.find(function(R){return R.name===b[P];});if(Q){a.navigationPropertyBinding[P]=Q;}});}});var I=Object.keys(n).filter(function(a){return Array.isArray(n[a])&&n[a].length>0&&n[a][0].$kind==="Action";}).reduce(function(a,b){var I=n[b];I.forEach(function(P){a.push(e.parseAction(b,P,B,z));});return a;},[]);var J=n.$Annotations;var K=Object.keys(J).filter(function(a){return a.indexOf("(")!==-1;});K.forEach(function(a){e.createAnnotationLists(n.$Annotations[a],a,u,C);});var L=I.map(function(a){return a.fullyQualifiedName.split("(")[0];});L.forEach(function(a){if(J.hasOwnProperty(a)){e.createAnnotationLists(n.$Annotations[a],a,u,C);}});var N=J[z];if(N){this.createAnnotationLists(N,z,u,C);}u=u.sort(function(a,b){return a.target.length>=b.target.length?1:-1;});var O=[];return{identification:"metamodelResult",version:"4.0",schema:{entityContainer:H,entitySets:w,entityTypes:v,complexTypes:y,singletons:x,associations:[],actions:I,namespace:B,annotations:{"metamodelResult":u}},references:O};}};var m={};function p(o,C){var a=o.id;if(!m.hasOwnProperty(a)){var b=M.parseEntityTypes(o,C);m[a]=A.convertTypes(b);}return m[a];}_.convertTypes=p;function q(o){delete m[o.id];}_.deleteModelCacheData=q;function r(o){var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var C=p(o.getModel());var P=o.getPath();var a=P.split("/");var b=C.entitySets.find(function(Q){return Q.name===a[1];});var e=a.slice(2).join("/");var n=[b];while(e&&e.length>0&&e.startsWith("$NavigationPropertyBinding")){var u;var v=e.split("/");var w=0;var x=void 0,N=void 0;v=v.slice(1);while(!x&&v.length>w&&v[w]!=="$NavigationPropertyBinding"){N=v.slice(0,w+1).join("/");x=b&&b.navigationPropertyBinding[N];w++;}if(!x){N=v[0];}var y=((u=N)===null||u===void 0?void 0:u.split("/"))||[];var z=b&&b.entityType;var B=c(y),E;try{var F=function(){var Q=E.value;var R=z&&z.navigationProperties.find(function(S){return S.name===Q;});if(R){n.push(R);z=R.targetType;}else{return"break";}};for(B.s();!(E=B.n()).done;){var G=F();if(G==="break")break;}}catch(H){B.e(H);}finally{B.f();}b=b&&x||b&&b.navigationPropertyBinding[v[0]];if(b){n.push(b);}e=v.slice(y.length||1).join("/");}if(e.startsWith("$Type")){e=a.slice(3).join("/");}if(b&&e.length){var T=b.entityType.resolvePath(e,i);if(T){if(i){T.visitedObjects=n.concat(T.visitedObjects);}}else if(b.entityType&&b.entityType.actions){var I=b.entityType&&b.entityType.actions;var J=e.split("/");if(I[J[0]]){var K=I[J[0]];if(J[1]&&K.parameters){var L=J[1];var O=K.parameters.find(function(Q){return Q.fullyQualifiedName.endsWith("/"+L);});return O;}else if(e.length===1){return K;}}}return T;}else{if(i){return{target:b,visitedObjects:n};}return b;}}_.convertMetaModelContext=r;function s(o,e){var a=r(o,true);var b;if(e&&e.getPath()!=="/"){b=s(e);}return t(a,b);}_.getInvolvedDataModelObjects=s;function t(a,b){var e=a.visitedObjects.filter(function(C){return C&&C.hasOwnProperty("_type")&&C._type!=="EntityType";});if(a.target&&a.target.hasOwnProperty("_type")&&a.target._type!=="EntityType"){e.push(a.target);}var n=[];var o=e[0];var u=o;var v=o.entityType;var i=1;var w;var x=[];while(i<e.length){w=e[i++];if(w._type==="NavigationProperty"){x.push(w.name);n.push(w);v=w.targetType;if(u&&u.navigationPropertyBinding.hasOwnProperty(x.join("/"))){u=u.navigationPropertyBinding[w.name];x=[];}else{u=undefined;}}if(w._type==="EntitySet"){u=w;v=u.entityType;}}if(b&&b.startingEntitySet!==o){var y=e.indexOf(b.startingEntitySet);if(y!==-1){var z=e.slice(0,y);b.startingEntitySet=o;b.navigationProperties=z.filter(function(C){return C._type==="NavigationProperty";}).concat(b.navigationProperties);}}var B={startingEntitySet:o,targetEntitySet:u,targetEntityType:v,targetObject:a.target,navigationProperties:n,contextLocation:b};if(!B.contextLocation){B.contextLocation=B;}return B;}_.getInvolvedDataModelObjectFromPath=t;return _;},false);
