/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['sap/ui/base/Object','sap/ui/core/Locale','sap/ui/core/LocaleData','sap/base/Log','sap/base/assert','sap/base/util/extend'],function(B,L,a,b,c,e){"use strict";var N=B.extend("sap.ui.core.format.NumberFormat",{constructor:function(F){throw new Error();}});var r=/0+(\.0+)?/;var d=/^0+$/;var g=function(){return/^(?:\d{1,2},?\d{2},?\d{3}|\d{1,2},?\d{3}|\d{1,3})(?:,?\d{2},?\d{2},?\d{3})*$/;};var f=function(i,z,A){var G=u(i);return new RegExp("^\\d+"+"(?:"+G+"?"+"\\d{"+z+"}"+")*"+""+G+"?"+"\\d{"+A+"}"+"$");};var n={INTEGER:"integer",FLOAT:"float",CURRENCY:"currency",UNIT:"unit",PERCENT:"percent"};var R={FLOOR:"FLOOR",CEILING:"CEILING",TOWARDS_ZERO:"TOWARDS_ZERO",AWAY_FROM_ZERO:"AWAY_FROM_ZERO",HALF_FLOOR:"HALF_FLOOR",HALF_CEILING:"HALF_CEILING",HALF_TOWARDS_ZERO:"HALF_TOWARDS_ZERO",HALF_AWAY_FROM_ZERO:"HALF_AWAY_FROM_ZERO"};var m={};m[R.FLOOR]=Math.floor;m[R.CEILING]=Math.ceil;m[R.TOWARDS_ZERO]=function(i){return i>0?Math.floor(i):Math.ceil(i);};m[R.AWAY_FROM_ZERO]=function(i){return i>0?Math.ceil(i):Math.floor(i);};m[R.HALF_TOWARDS_ZERO]=function(i){return i>0?Math.ceil(i-0.5):Math.floor(i+0.5);};m[R.HALF_AWAY_FROM_ZERO]=function(i){return i>0?Math.floor(i+0.5):Math.ceil(i-0.5);};m[R.HALF_FLOOR]=function(i){return Math.ceil(i-0.5);};m[R.HALF_CEILING]=Math.round;N.RoundingMode=R;N.oDefaultIntegerFormat={minIntegerDigits:1,maxIntegerDigits:99,minFractionDigits:0,maxFractionDigits:0,strictGroupingValidation:false,groupingEnabled:false,groupingSize:3,groupingSeparator:",",decimalSeparator:".",plusSign:"+",minusSign:"-",isInteger:true,type:n.INTEGER,showMeasure:false,style:"standard",showNumber:true,parseAsString:false,preserveDecimals:false,roundingMode:N.RoundingMode.TOWARDS_ZERO,emptyString:NaN,showScale:true};N.oDefaultFloatFormat={minIntegerDigits:1,maxIntegerDigits:99,minFractionDigits:0,maxFractionDigits:99,strictGroupingValidation:false,groupingEnabled:true,groupingSize:3,groupingSeparator:",",decimalSeparator:".",plusSign:"+",minusSign:"-",isInteger:false,type:n.FLOAT,showMeasure:false,style:"standard",showNumber:true,parseAsString:false,preserveDecimals:false,roundingMode:N.RoundingMode.HALF_AWAY_FROM_ZERO,emptyString:NaN,showScale:true};N.oDefaultPercentFormat={minIntegerDigits:1,maxIntegerDigits:99,minFractionDigits:0,maxFractionDigits:99,strictGroupingValidation:false,groupingEnabled:true,groupingSize:3,groupingSeparator:",",decimalSeparator:".",plusSign:"+",minusSign:"-",percentSign:"%",isInteger:false,type:n.PERCENT,showMeasure:false,style:"standard",showNumber:true,parseAsString:false,preserveDecimals:false,roundingMode:N.RoundingMode.HALF_AWAY_FROM_ZERO,emptyString:NaN,showScale:true};N.oDefaultCurrencyFormat={minIntegerDigits:1,maxIntegerDigits:99,strictGroupingValidation:false,groupingEnabled:true,groupingSize:3,groupingSeparator:",",decimalSeparator:".",plusSign:"+",minusSign:"-",isInteger:false,type:n.CURRENCY,showMeasure:true,currencyCode:true,currencyContext:'standard',style:"standard",showNumber:true,customCurrencies:undefined,parseAsString:false,preserveDecimals:false,roundingMode:N.RoundingMode.HALF_AWAY_FROM_ZERO,emptyString:NaN,showScale:true,ignorePrecision:true};N.oDefaultUnitFormat={minIntegerDigits:1,maxIntegerDigits:99,strictGroupingValidation:false,groupingEnabled:true,groupingSize:3,groupingSeparator:",",decimalSeparator:".",plusSign:"+",minusSign:"-",isInteger:false,type:n.UNIT,showMeasure:true,style:"standard",showNumber:true,customUnits:undefined,allowedUnits:undefined,parseAsString:false,preserveDecimals:false,roundingMode:N.RoundingMode.HALF_AWAY_FROM_ZERO,emptyString:NaN,showScale:true};N.getInstance=function(F,i){return this.getFloatInstance(F,i);};N.getFloatInstance=function(F,i){var z=this.createInstance(F,i),A=this.getLocaleFormatOptions(z.oLocaleData,n.FLOAT);z.oFormatOptions=e({},this.oDefaultFloatFormat,A,F);return z;};N.getIntegerInstance=function(F,i){var z=this.createInstance(F,i),A=this.getLocaleFormatOptions(z.oLocaleData,n.INTEGER);z.oFormatOptions=e({},this.oDefaultIntegerFormat,A,F);return z;};N.getCurrencyInstance=function(F,i){var z=this.createInstance(F,i);var C=F&&F.currencyContext;var S=l(F);if(S){C=C||this.oDefaultCurrencyFormat.style;C="sap-"+C;}var A=this.getLocaleFormatOptions(z.oLocaleData,n.CURRENCY,C);z.oFormatOptions=e({},this.oDefaultCurrencyFormat,A,F);z.oFormatOptions.trailingCurrencyCode=S;z._defineCustomCurrencySymbols();return z;};N.getUnitInstance=function(F,i){var z=this.createInstance(F,i),A=this.getLocaleFormatOptions(z.oLocaleData,n.UNIT);z.oFormatOptions=e({},this.oDefaultUnitFormat,A,F);return z;};N.getPercentInstance=function(F,i){var z=this.createInstance(F,i),A=this.getLocaleFormatOptions(z.oLocaleData,n.PERCENT);z.oFormatOptions=e({},this.oDefaultPercentFormat,A,F);return z;};N.createInstance=function(F,i){var z=Object.create(this.prototype),P;if(F instanceof L){i=F;F=undefined;}if(!i){i=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale();}z.oLocale=i;z.oLocaleData=a.getInstance(i);z.oOriginalFormatOptions=F;if(F){if(F.pattern){P=this.parseNumberPattern(F.pattern);Object.keys(P).forEach(function(A){F[A]=P[A];});}if(F.emptyString!==undefined){c(F.emptyString===""||F.emptyString===0||F.emptyString===null||F.emptyString!==F.emptyString,"The format option 'emptyString' must be either 0, null or NaN");}}return z;};N.getDefaultUnitPattern=function(S){return"{0} "+S;};N.getLocaleFormatOptions=function(i,T,C){var z,A;switch(T){case n.PERCENT:A=i.getPercentPattern();break;case n.CURRENCY:A=i.getCurrencyPattern(C);break;case n.UNIT:A=i.getDecimalPattern();break;default:A=i.getDecimalPattern();}z=this.parseNumberPattern(A);z.plusSign=i.getNumberSymbol("plusSign");z.minusSign=i.getNumberSymbol("minusSign");z.decimalSeparator=i.getNumberSymbol("decimal");z.groupingSeparator=i.getNumberSymbol("group");z.percentSign=i.getNumberSymbol("percentSign");z.pattern=A;switch(T){case n.UNIT:case n.FLOAT:case n.PERCENT:z.minFractionDigits=0;z.maxFractionDigits=99;break;case n.INTEGER:z.minFractionDigits=0;z.maxFractionDigits=0;z.groupingEnabled=false;break;case n.CURRENCY:z.minFractionDigits=undefined;z.maxFractionDigits=undefined;break;}return z;};N.parseNumberPattern=function(F){var M=0,z=0,A=0,G=false,C=0,D=0,S=F.indexOf(";"),E={Integer:0,Fraction:1},H=E.Integer;if(S!==-1){F=F.substring(0,S);}for(var i=0;i<F.length;i++){var I=F[i];switch(I){case",":if(G){C=D;D=0;}G=true;break;case".":H=E.Fraction;break;case"0":if(H===E.Integer){M++;if(G){D++;}}else{z++;A++;}break;case"#":if(H===E.Integer){if(G){D++;}}else{A++;}break;}}if(!C){C=D;D=0;}return{minIntegerDigits:M,minFractionDigits:z,maxFractionDigits:A,groupingEnabled:G,groupingSize:C,groupingBaseSize:D};};N.prototype._defineCustomCurrencySymbols=function(){var O=this.oFormatOptions;var C=this.oLocaleData.getCurrencySymbols();var F=function(S,i){var U=[];var z;for(var K in S){z=S[K];if(U.indexOf(z)===-1){U.push(z);}else if(z!==undefined){i[z]=true;b.error("Symbol '"+z+"' is defined multiple times in custom currencies.",undefined,"NumberFormat");}}};if(O.customCurrencies&&typeof O.customCurrencies==="object"){this.mKnownCurrencySymbols={};this.mKnownCurrencyCodes={};Object.keys(O.customCurrencies).forEach(function(K){if(O.customCurrencies[K].symbol){this.mKnownCurrencySymbols[K]=O.customCurrencies[K].symbol;}else{var i=O.customCurrencies[K].isoCode;if(i){this.mKnownCurrencySymbols[K]=C[i];}}this.mKnownCurrencyCodes[K]=K;}.bind(this));}else{this.mKnownCurrencySymbols=C;this.mKnownCurrencyCodes=this.oLocaleData.getCustomCurrencyCodes();}this.mDuplicatedSymbols={};F(this.mKnownCurrencySymbols,this.mDuplicatedSymbols);};function s(i,z){if(i.indexOf(".")>=0&&!p(i)&&i.endsWith("0")){var F=i.length-i.lastIndexOf(".")-1;var A=F-z;if(A>0){while(i.endsWith("0")&&(A-->0)){i=i.substring(0,i.length-1);}if(i.endsWith(".")){i=i.substring(0,i.length-1);}}}return i;}function h(i,O,I){var P;var G="";if(I){var z=[3,2,2],C,A=0;P=i.length;while(P>0){C=z[A%3];P-=C;if(A>0){G=O.groupingSeparator+G;}if(P<0){C+=P;P=0;}G=i.substr(P,C)+G;A++;}}else{var D=i.length;var E=O.groupingSize;var F=O.groupingBaseSize||E;P=Math.max(D-F,0)%E||E;G=i.substr(0,P);while(D-P>=F){G+=O.groupingSeparator;G+=i.substr(P,E);P+=E;}G+=i.substr(P);}return G;}N.prototype.format=function(V,M){if(Array.isArray(V)){M=V[1];V=V[0];}var i="",F="",G="",z="",A="",P="",C=V<0,D=-1,O=Object.assign({},this.oFormatOptions),E=this.oOriginalFormatOptions,I=O.type===n.CURRENCY&&M==="INR"&&this.oLocale.getLanguage()==="en"&&this.oLocale.getRegion()==="IN",H,S,J,K,U,Q,T=V===undefined||V===null;if(O.showNumber&&(V===O.emptyString||(isNaN(V)&&isNaN(O.emptyString)))){return"";}if(M!==undefined&&M!==null&&typeof M!=="string"&&!(M instanceof String)){return"";}if(!O.showNumber&&!M){return"";}if(T&&(!M||!O.showMeasure||O.showNumber)){return"";}if(M&&O.customCurrencies&&!O.customCurrencies[M]){b.error("Currency '"+M+"' is unknown.");return"";}if(!O.showNumber&&!O.showMeasure){return"";}if(M&&O.type===n.UNIT){if(O.customUnits&&typeof O.customUnits==="object"){U=O.customUnits[M];}else{Q=this.oLocaleData.getUnitFromMapping(M)||M;U=this.oLocaleData.getUnitFormat(Q);}if(O.showMeasure){var W=!O.allowedUnits||O.allowedUnits.indexOf(M)>=0;if(!W){return"";}}if(!U&&!O.showNumber){return this._addOriginInfo(M);}O.decimals=(U&&(typeof U.decimals==="number"&&U.decimals>=0))?U.decimals:O.decimals;O.precision=(U&&(typeof U.precision==="number"&&U.precision>=0))?U.precision:O.precision;}if(O.type==n.CURRENCY){if(M&&O.trailingCurrencyCode){if(!this.mKnownCurrencyCodes[M]&&!/(^[A-Z]{3}$)/.test(M)){O.trailingCurrencyCode=false;O.pattern=this.oLocaleData.getCurrencyPattern(O.currencyContext);}}if(!O.showNumber){if(!O.currencyCode){var X;if(O.customCurrencies&&typeof O.customCurrencies==="object"){X=this.mKnownCurrencySymbols[M];}else{X=this.oLocaleData.getCurrencySymbol(M);}if(X&&X!==M){M=X;}}return M;}if(O.customCurrencies&&O.customCurrencies[M]){O.decimals=O.customCurrencies[M].decimals!==undefined?O.customCurrencies[M].decimals:O.decimals;}}if(O.decimals!==undefined){O.minFractionDigits=O.decimals;O.maxFractionDigits=O.decimals;}if(O.shortLimit===undefined||Math.abs(V)>=O.shortLimit){J=O.shortRefNumber===undefined?V:O.shortRefNumber;S=j(J,O,this.oLocaleData,I);if(S&&S.formatString!="0"){V=V/S.magnitude;if(O.shortDecimals!==undefined){O.minFractionDigits=O.shortDecimals;O.maxFractionDigits=O.shortDecimals;}else{if(E.minFractionDigits===undefined&&E.maxFractionDigits===undefined&&E.decimals===undefined&&E.precision===undefined&&E.pattern===undefined){O.precision=2;O.minFractionDigits=0;O.maxFractionDigits=99;}if(E.maxFractionDigits===undefined&&E.decimals===undefined){O.maxFractionDigits=99;}}O.roundingMode=N.RoundingMode.HALF_AWAY_FROM_ZERO;}}if((S||!O.ignorePrecision)&&O.precision!==undefined){O.maxFractionDigits=Math.min(O.maxFractionDigits,v(V,O.precision));O.minFractionDigits=Math.min(O.minFractionDigits,O.maxFractionDigits);}if(O.type==n.PERCENT){V=N._shiftDecimalPoint(V,2);}if(O.type==n.CURRENCY){var Y=this.oLocaleData.getCurrencyDigits(M);if(O.customCurrencies&&O.customCurrencies[M]&&O.customCurrencies[M].decimals!==undefined){Y=O.customCurrencies[M].decimals;}if(O.maxFractionDigits===undefined){O.maxFractionDigits=Y;}if(O.minFractionDigits===undefined){O.minFractionDigits=Y;}}if(typeof V==="number"&&!O.preserveDecimals){V=t(V,O.maxFractionDigits,O.roundingMode);}if(V==0){C=false;}if(O.preserveDecimals&&(typeof V==="string"||V instanceof String)){V=s(V,O.maxFractionDigits);}if(!T){A=this.convertToDecimal(V);}if(A=="NaN"){return A;}if(C){A=A.substr(1);}D=A.indexOf(".");if(D>-1){i=A.substr(0,D);F=A.substr(D+1);}else{i=A;}if(i.length<O.minIntegerDigits){i=i.padStart(O.minIntegerDigits,"0");}else if(i.length>O.maxIntegerDigits){i="".padStart(O.maxIntegerDigits,"?");}if(F.length<O.minFractionDigits){F=F.padEnd(O.minFractionDigits,"0");}else if(F.length>O.maxFractionDigits&&!O.preserveDecimals){F=F.substr(0,O.maxFractionDigits);}if(O.type===n.UNIT&&!O.showNumber){if(U){K=this.oLocaleData.getPluralCategory(i+"."+F);P=U["unitPattern-count-"+K];if(!P){P=U["unitPattern-count-other"];}if(!P){return this._addOriginInfo(M);}if(K!=="other"&&P.indexOf("{0}")===-1){P=U["unitPattern-count-other"];if(!P){return this._addOriginInfo(M);}}if(P.indexOf("{0}")===-1){b.warning("Cannot separate the number from the unit because unitPattern-count-other '"+P+"' does not include the number placeholder '{0}' for unit '"+M+"'");}else{return this._addOriginInfo(P.replace("{0}","").trim());}}}if(O.groupingEnabled){G=h(i,O,I);}else{G=i;}if(C){z=O.minusSign;}z+=G;if(F){z+=O.decimalSeparator+F;}if(S&&S.formatString&&O.showScale&&O.type!==n.CURRENCY){K=this.oLocaleData.getPluralCategory(i+"."+F);S.formatString=this.oLocaleData.getDecimalFormat(O.style,S.key,K);z=S.formatString.replace(S.valueSubString,z);z=z.replace(/'.'/g,".");}if(O.type===n.CURRENCY){P=O.pattern;if(S&&S.formatString&&O.showScale){var Z;if(O.trailingCurrencyCode){Z="sap-short";}else{Z="short";}K=this.oLocaleData.getPluralCategory(i+"."+F);if(I){P=o(Z,S.key,K);}else{P=this.oLocaleData.getCurrencyFormat(Z,S.key,K);}P=P.replace(/'.'/g,".");}H=P.split(";");if(H.length===2){P=C?H[1]:H[0];if(C){z=z.substring(O.minusSign.length);}}if(!O.currencyCode){var X;if(O.customCurrencies&&typeof O.customCurrencies==="object"){X=this.mKnownCurrencySymbols[M];}else{X=this.oLocaleData.getCurrencySymbol(M);}if(X&&X!==M){M=X;}}z=this._composeCurrencyResult(P,z,M,{showMeasure:O.showMeasure,negative:C,minusSign:O.minusSign});}if(O.type===n.PERCENT){P=O.pattern;z=P.replace(/[0#.,]+/,z);z=z.replace(/%/,O.percentSign);}if(O.showMeasure&&M&&O.type===n.UNIT){K=this.oLocaleData.getPluralCategory(i+"."+F);if(U){P=U["unitPattern-count-"+K];if(!P){P=U["unitPattern-count-other"];}if(!P){P=N.getDefaultUnitPattern(M);}}else{P=N.getDefaultUnitPattern(M);}z=P.replace("{0}",z);}return this._addOriginInfo(z);};N.prototype._addOriginInfo=function(i){if(sap.ui.getCore().getConfiguration().getOriginInfo()){i=new String(i);i.originInfo={source:"Common Locale Data Repository",locale:this.oLocale.toString()};}return i;};N.prototype._composeCurrencyResult=function(P,F,M,O){var i=O.minusSign;P=P.replace(/[0#.,]+/,F);if(O.showMeasure&&M){var z="\u00a4",A={"[:digit:]":/\d/,"[:^S:]":/[^\$\xA2-\xA5\u058F\u060B\u09F2\u09F3\u09FB\u0AF1\u0BF9\u0E3F\u17DB\u20A0-\u20BD\uA838\uFDFC\uFE69\uFF04\uFFE0\uFFE1\uFFE5\uFFE6]/},C=P.indexOf(z),D=C<P.length/2?"after":"before",S=this.oLocaleData.getCurrencySpacing(D),E=(D==="after"?M.charAt(M.length-1):M.charAt(0)),G,H=A[S.currencyMatch],I=A[S.surroundingMatch],J;P=P.replace(z,M);G=(D==="after"?P.charAt(C+M.length):P.charAt(C-1));if(H&&H.test(E)&&I&&I.test(G)){if(D==="after"){J=C+M.length;}else{J=C;}P=P.slice(0,J)+S.insertBetween+P.slice(J);}else if(O.negative&&D==="after"){i="\ufeff"+O.minusSign;}}else{P=P.replace(/\s*\u00a4\s*/,"");}if(O.negative){P=P.replace(/-/,i);}return P;};N.prototype.parse=function(V){var O=this.oFormatOptions,P=O.plusSign+this.oLocaleData.getLenientNumberSymbols("plusSign"),M=O.minusSign+this.oLocaleData.getLenientNumberSymbols("minusSign"),z=u(P+M),G=u(O.groupingSeparator),D=u(O.decimalSeparator),A="^\\s*(["+z+"]?(?:[0-9"+G+"]+|[0-9"+G+"]*"+D+"[0-9]*)(?:[eE][+-][0-9]+)?)\\s*$",C="^\\s*(["+z+"]?[0-9"+G+"]+)\\s*$",E=new RegExp(G,"g"),F=new RegExp(D,"g"),H=this.oLocaleData.getNumberSymbol("percentSign"),I=O.type===n.CURRENCY&&this.oLocale.getLanguage()==="en"&&this.oLocale.getRegion()==="IN",J,K,Q,S,T=0,U,W;if(V===""){if(!O.showNumber){return null;}W=O.emptyString;if(O.parseAsString&&(O.emptyString===0||isNaN(O.emptyString))){W=O.emptyString+"";}if(O.type===n.CURRENCY||O.type===n.UNIT){return[W,undefined];}else{return W;}}if(typeof V!=="string"&&!(V instanceof String)){return null;}if(O.groupingSeparator===O.decimalSeparator){b.error("The grouping and decimal separator both have the same value '"+O.groupingSeparator+"'. "+"They must be different from each other such that values can be parsed correctly.");}S=O.type===n.PERCENT?O.pattern:this.oLocaleData.getPercentPattern();if(S.charAt(0)==="%"){A=A.slice(0,1)+"%?"+A.slice(1);}else if(S.charAt(S.length-1)==="%"){A=A.slice(0,A.length-1)+"%?"+A.slice(A.length-1);}var X;if(O.type===n.UNIT&&O.showMeasure){var Y;if(O.customUnits&&typeof O.customUnits==="object"){Y=O.customUnits;}else{Y=this.oLocaleData.getUnitFormats();}c(Y,"Unit patterns cannot be loaded");if(O.allowedUnits){var Z={};for(var i=0;i<O.allowedUnits.length;i++){var $=O.allowedUnits[i];Z[$]=Y[$];}Y=Z;}var _=w(Y,V,O.showNumber);var a1=false;X=_.cldrCode;if(X.length===1){Q=X[0];if(!O.showNumber){return[undefined,Q];}}else if(X.length===0){if(O.unitOptional){_.numberValue=V;}else{return null;}}else{c(X.length===1,"Ambiguous unit ["+X.join(", ")+"] for input: '"+(V)+"'");Q=undefined;a1=true;}if(O.strictParsing){if(a1){return null;}}V=_.numberValue||V;}var b1;if(O.type===n.CURRENCY&&O.showMeasure){b1=y({value:V,currencySymbols:this.mKnownCurrencySymbols,customCurrencyCodes:this.mKnownCurrencyCodes,duplicatedSymbols:this.mDuplicatedSymbols,customCurrenciesAvailable:!!O.customCurrencies});if(!b1){return null;}if(O.strictParsing){if(!b1.currencyCode||b1.duplicatedSymbolFound){return null;}}V=b1.numberValue;Q=b1.currencyCode;if(O.customCurrencies&&Q===null){return null;}if(!O.showNumber){if(V){return null;}return[undefined,Q];}}V=V.replace(/[\u202a\u200e\u202c\u202b\u200f]/g,"");V=V.replace(/\s/g,"");U=k(V,this.oLocaleData,I);if(U){V=U.number;}var c1=p(V);if(O.isInteger&&!U&&!c1){J=new RegExp(C);}else{J=new RegExp(A);}if(!J.test(V)){return O.type===n.CURRENCY||O.type===n.UNIT?null:NaN;}var d1=V.length;for(var e1=0;e1<d1;e1++){var f1=V[e1];if(P.includes(f1)){V=V.replace(f1,"+");break;}else if(M.includes(f1)){V=V.replace(f1,"-");break;}}V=V.replace(/^\+/,"");if(!O.isInteger&&V.indexOf(H)!==-1){K=true;V=V.replace(H,"");}var g1=V;V=V.replace(E,"");if(U){V=V.replace(F,".");V=N._shiftDecimalPoint(V,Math.round(Math.log(U.factor)/Math.LN10));}if(O.isInteger){var h1;if(c1){V=V.replace(F,".");h1=q(V);if(h1===undefined){return NaN;}}else{h1=parseInt(V);}T=O.parseAsString?V:h1;}else{V=V.replace(F,".");T=O.parseAsString?V:parseFloat(V);if(K){T=N._shiftDecimalPoint(T,-2);}}var i1=this._checkGrouping(g1,O,c1,I&&Q==="INR");if(!i1){return(O.type===n.CURRENCY||O.type===n.UNIT)?null:NaN;}if(O.parseAsString){T=N._shiftDecimalPoint(V,0);}if(O.type===n.CURRENCY||O.type===n.UNIT){return[T,Q];}return T;};N.prototype.convertToDecimal=function(V){var z=""+V,A,C,D,F,E,P;if(z.indexOf("e")==-1&&z.indexOf("E")==-1){return z;}var G=z.match(/^([+-]?)((\d+)(?:\.(\d+))?)[eE]([+-]?\d+)$/);A=G[1]=="-";C=G[2].replace(/\./g,"");D=G[3]?G[3].length:0;F=G[4]?G[4].length:0;E=parseInt(G[5]);if(E>0){if(E<F){P=D+E;z=C.substr(0,P)+"."+C.substr(P);}else{z=C;E-=F;for(var i=0;i<E;i++){z+="0";}}}else{if(-E<D){P=D+E;z=C.substr(0,P)+"."+C.substr(P);}else{z=C;E+=D;for(var i=0;i>E;i--){z="0"+z;}z="0."+z;}}if(A){z="-"+z;}return z;};N.prototype.getScale=function(){if((this.oFormatOptions.style!=="short"&&this.oFormatOptions.style!=="long")||this.oFormatOptions.shortRefNumber===undefined){return;}var S=j(this.oFormatOptions.shortRefNumber,this.oFormatOptions,this.oLocaleData),i;if(S&&S.formatString){i=S.formatString.replace(r,"").replace(/'.'/g,".").trim();if(i){return i;}}};N._shiftDecimalPoint=function(V,S){if(typeof S!=="number"){return NaN;}var M="";var E=V.toString().toLowerCase().split("e");if(typeof V==="number"){S=E[1]?(+E[1]+S):S;return+(E[0]+"e"+S);}else if(typeof V==="string"){if(parseFloat(V)===0&&S>=0){return d.test(V)?"0":V;}var F=E[0].charAt(0);M=F==="-"?F:"";if(M){E[0]=E[0].slice(1);}V=E[0];var D=V.indexOf("."),A,i,z;if(D===-1){V=V+".";D=V.length-1;}if(E[1]){D+=(+E[1]);}A=D+S;if(A<=0){V=V.padStart(V.length-A+1,'0');A=1;}else if(A>=V.length-1){V=V.padEnd(A+1,'0');A=V.length-1;}V=V.replace(".","");i=V.substring(0,A);z=V.substring(A);i=i.replace(/^(-?)0+(\d)/,"$1$2");return M+i+(z?("."+z):"");}else{return null;}};function j(V,O,z,I){var S,K,A,C,D=O.style,P=O.precision!==undefined?O.precision:2;if(D!="short"&&D!="long"){return undefined;}for(var i=0;i<15;i++){K=Math.pow(10,i);if(t(Math.abs(V)/K,P-1)<10){break;}}A=K.toString();if(O.type===n.CURRENCY){if(O.trailingCurrencyCode){D="sap-short";}if(I){C=o(D,A,"other",true);}else{C=z.getCurrencyFormat(D,A,"other");}}else{C=z.getDecimalFormat(D,A,"other");}if(!C||C=="0"){return undefined;}else{S={};S.key=A;S.formatString=C;var E=C.match(r);if(E){S.valueSubString=E[0];var F=S.valueSubString.indexOf(".");if(F==-1){S.decimals=0;S.magnitude=K*Math.pow(10,1-S.valueSubString.length);}else{S.decimals=S.valueSubString.length-F-1;S.magnitude=K*Math.pow(10,1-F);}}else{return undefined;}}return S;}function k(V,z,I){var A,F=1,K=10,P=z.getPluralCategories(),C,D={number:undefined,factor:F},G=function(H,K,S,J){if(J){C=o(S,K.toString(),H,true);}else{C=z.getDecimalFormat(S,K.toString(),H);}if(C){C=C.replace(/[\s\u00a0\u200F]/g,"");C=C.replace(/'.'/g,".");var M=C.match(r);if(M){var O=M[0];var U=C.replace(O,"");if(!U){return;}var Q=V.indexOf(U);if(Q>=0){A=V.replace(U,"");A=A.replace(/\u200F/g,"");F=K;F*=Math.pow(10,1-O.length);if(D.number===undefined||A.length<D.number.length){D.number=A;D.factor=F;}}}}};["long","short"].forEach(function(S){K=10;while(K<1e15){for(var i=0;i<P.length;i++){var E=P[i];G(E,K,S);}K=K*10;}});if(I&&!A){K=10;while(K<1e15){for(var i=0;i<P.length;i++){var E=P[i];G(E,K,"short",true);}K=K*10;}}if(!A){return;}return D;}function l(F){var S=sap.ui.getCore().getConfiguration().getFormatSettings().getTrailingCurrencyCode();if(F){if(F.trailingCurrencyCode!==undefined){S=F.trailingCurrencyCode;}if(F.pattern){S=false;}if(F.currencyCode===false){S=false;}}return S;}function o(S,K,P,D){var F,C={"short":{"1000-one":"\xa40000","1000-other":"\xa40000","10000-one":"\xa400000","10000-other":"\xa400000","100000-one":"\xa40 Lk","100000-other":"\xa40 Lk","1000000-one":"\xa400 Lk","1000000-other":"\xa400 Lk","10000000-one":"\xa40 Cr","10000000-other":"\xa40 Cr","100000000-one":"\xa400 Cr","100000000-other":"\xa400 Cr","1000000000-one":"\xa4000 Cr","1000000000-other":"\xa4000 Cr","10000000000-one":"\xa40000 Cr","10000000000-other":"\xa40000 Cr","100000000000-one":"\xa400000 Cr","100000000000-other":"\xa400000 Cr","1000000000000-one":"\xa40 Lk Cr","1000000000000-other":"\xa40 Lk Cr","10000000000000-one":"\xa400 Lk Cr","10000000000000-other":"\xa400 Lk Cr","100000000000000-one":"\xa40 Cr Cr","100000000000000-other":"\xa40 Cr Cr"},"sap-short":{"1000-one":"0000\xa0\xa4","1000-other":"0000\xa0\xa4","10000-one":"00000\xa0\xa4","10000-other":"00000\xa0\xa4","100000-one":"0 Lk\xa0\xa4","100000-other":"0 Lk\xa0\xa4","1000000-one":"00 Lk\xa0\xa4","1000000-other":"00 Lk\xa0\xa4","10000000-one":"0 Cr\xa0\xa4","10000000-other":"0 Cr\xa0\xa4","100000000-one":"00 Cr\xa0\xa4","100000000-other":"00 Cr\xa0\xa4","1000000000-one":"000 Cr\xa0\xa4","1000000000-other":"000 Cr\xa0\xa4","10000000000-one":"0000 Cr\xa0\xa4","10000000000-other":"0000 Cr\xa0\xa4","100000000000-one":"00000 Cr\xa0\xa4","100000000000-other":"00000 Cr\xa0\xa4","1000000000000-one":"0 Lk Cr\xa0\xa4","1000000000000-other":"0 Lk Cr\xa0\xa4","10000000000000-one":"00 Lk Cr\xa0\xa4","10000000000000-other":"00 Lk Cr\xa0\xa4","100000000000000-one":"0 Cr Cr\xa0\xa4","100000000000000-other":"0 Cr Cr\xa0\xa4"}},i={"short":{"1000-one":"0000","1000-other":"0000","10000-one":"00000","10000-other":"00000","100000-one":"0 Lk","100000-other":"0 Lk","1000000-one":"00 Lk","1000000-other":"00 Lk","10000000-one":"0 Cr","10000000-other":"0 Cr","100000000-one":"00 Cr","100000000-other":"00 Cr","1000000000-one":"000 Cr","1000000000-other":"000 Cr","10000000000-one":"0000 Cr","10000000000-other":"0000 Cr","100000000000-one":"00000 Cr","100000000000-other":"00000 Cr","1000000000000-one":"0 Lk Cr","1000000000000-other":"0 Lk Cr","10000000000000-one":"00 Lk Cr","10000000000000-other":"00 Lk Cr","100000000000000-one":"0 Cr Cr","100000000000000-other":"0 Cr Cr"}};i["sap-short"]=i["short"];var T=D?i:C;var z=T[S];if(!z){z=T["short"];}if(P!=="one"){P="other";}F=z[K+"-"+P];return F;}N.prototype._checkGrouping=function(V,O,S,i){if(O.groupingSeparator&&V.includes(O.groupingSeparator)){V=V.replace(/^-/,"");V=V.replace(/^0+(\d)/,"$1");if(V.startsWith("0")||V.startsWith(O.groupingSeparator)){return false;}if(S){V=V.replace(/[eE].*/,"");}var H=V.includes(O.decimalSeparator);if(O.decimalSeparator===O.groupingSeparator){H=false;}else if(H){V=V.split(O.decimalSeparator)[0];}var z=V.split(O.groupingSeparator).length===2;if(z&&!H){var A=V.length-V.lastIndexOf(O.groupingSeparator);var C=O.groupingBaseSize||O.groupingSize;if(A!==C+O.groupingSeparator.length){return false;}}if(O.strictGroupingValidation){var D;if(i){this._rIndianCurrencyINRGrouping=this._rIndianCurrencyINRGrouping||g();D=this._rIndianCurrencyINRGrouping;}else{this._rGrouping=this._rGrouping||f(O.groupingSeparator,O.groupingSize,O.groupingBaseSize||O.groupingSize);D=this._rGrouping;}if(!D.test(V)){return false;}}}return true;};function p(V){return V.indexOf("e")>0||V.indexOf("E")>0;}function q(V){var i=N._shiftDecimalPoint(V,0);if(i.indexOf(".")>0&&!d.test(i.split(".")[1])){return undefined;}var F=parseFloat(i);var z=""+F;if(p(z)){z=N._shiftDecimalPoint(z,0);}var I=parseInt(z);if(I!==F){return undefined;}return I;}function t(V,M,i){if(typeof V!=="number"){return NaN;}i=i||N.RoundingMode.HALF_AWAY_FROM_ZERO;M=parseInt(M);var z=""+V;if(!p(z)){var I=z.indexOf(".");if(I<0){return V;}if(z.substring(I+1).length<=M){return V;}}if(typeof i==="function"){V=i(V,M);}else{if(i.match(/^[a-z_]+$/)){i=i.toUpperCase();}if(!M){return m[i](V);}V=N._shiftDecimalPoint(m[i](N._shiftDecimalPoint(V,M)),-M);}return V;}function u(i){return i.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");}function v(V,P){var i=Math.floor(Math.log(Math.abs(V))/Math.LN10);return Math.max(0,P-i-1);}function w(U,V,S){var i={numberValue:undefined,cldrCode:[]};var z=Number.POSITIVE_INFINITY;var A,K;for(A in U){for(K in U[A]){if(K.indexOf("unitPattern")===0){var C=U[A][K];var D=C.indexOf("{0}");var E=D>-1;if(E&&!S){C=C.replace("{0}","").trim();E=false;}if(E){var P=C.substring(0,D);var F=C.substring(D+"{0}".length);var M=V.startsWith(P)&&V.endsWith(F);var G=M&&V.substring(P.length,V.length-F.length);if(G){if(G.length<z){z=G.length;i.numberValue=G;i.cldrCode=[A];}else if(G.length===z&&i.cldrCode.indexOf(A)===-1){i.cldrCode.push(A);}}}else if(C===V){if(S){i.cldrCode=[A];var H;if(K.endsWith("-zero")){H="0";}else if(K.endsWith("-one")){H="1";}else if(K.endsWith("-two")){H="2";}i.numberValue=H;return i;}else if(i.cldrCode.indexOf(A)===-1){i.cldrCode.push(A);}}}}}return i;}function x(V,C){var S="",i,z;for(var A in C){z=C[A];if(V.indexOf(z)>=0&&S.length<z.length){S=z;i=A;}}return{symbol:S,code:i};}function y(C){var V=C.value;var M=x(V,C.currencySymbols);if(!M.code){M=x(V,C.customCurrencyCodes);if(!M.code&&!C.customCurrenciesAvailable){var i=V.match(/(^[A-Z]{3}|[A-Z]{3}$)/);M.code=i&&i[0];}}if(M.code){var z=M.code.length-1;var A=M.code.charAt(z);var D;var E=/[\-\s]+/;if(/\d$/.test(A)){if(V.startsWith(M.code)){D=z+1;if(!E.test(V.charAt(D))){return undefined;}}}else if(/^\d/.test(M.code)){if(V.endsWith(M.code)){D=V.indexOf(M.code)-1;if(!E.test(V.charAt(D))){return undefined;}}}V=V.replace(M.symbol||M.code,"");}var F=false;if(C.duplicatedSymbols&&C.duplicatedSymbols[M.symbol]){M.code=undefined;F=true;b.error("The parsed currency symbol '"+M.symbol+"' is defined multiple "+"times in custom currencies.Therefore the result is not distinct.");}return{numberValue:V,currencyCode:M.code||undefined,duplicatedSymbolFound:F};}return N;});
