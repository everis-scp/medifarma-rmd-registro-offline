/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2021 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/ui/core/mvc/View","sap/ui/core/Component","sap/m/MessageBox","sap/base/Log","sap/fe/navigation/SelectionVariant","sap/ui/mdc/condition/FilterOperatorUtil","sap/ui/mdc/odata/v4/TypeUtil","sap/fe/core/helpers/StableIdHelper","sap/fe/core/library","sap/fe/core/helpers/ModelHelper","sap/fe/core/helpers/SemanticDateOperators","sap/fe/core/templating/FilterHelper","sap/ui/mdc/condition/Condition","sap/ui/mdc/enum/ConditionValidated","sap/fe/core/converters/MetaModelConverter","sap/fe/core/converters/ConverterContext","sap/base/util/merge","sap/fe/core/helpers/BindingExpression","sap/fe/core/controls/DataLossOrDraftDiscard/DataLossOrDraftDiscardHandler","sap/ui/core/XMLTemplateProcessor","sap/ui/core/util/XMLPreprocessor","sap/ui/core/Fragment"],function(V,C,M,L,S,F,T,c,d,e,f,g,h,l,m,n,o,B,D,X,p,q){"use strict";var P=d.ProgrammingModel;var v=["Edm.Boolean","Edm.Byte","Edm.Date","Edm.DateTime","Edm.DateTimeOffset","Edm.Decimal","Edm.Double","Edm.Float","Edm.Guid","Edm.Int16","Edm.Int32","Edm.Int64","Edm.SByte","Edm.Single","Edm.String","Edm.Time","Edm.TimeOfDay"];function r(a){var b=a.getProperty("$Type");if(!a.getProperty("$kind")){switch(b){case"com.sap.vocabularies.UI.v1.DataFieldForAction":case"com.sap.vocabularies.UI.v1.DataFieldForIntentBasedNavigation":b=undefined;break;case"com.sap.vocabularies.UI.v1.DataField":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":case"com.sap.vocabularies.UI.v1.DataFieldWithUrl":b=a.getProperty("Value/$Path/$Type");break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":default:var i=a.getProperty("Target/$AnnotationPath");if(i){if(i.indexOf("com.sap.vocabularies.Communication.v1.Contact")>-1){b=a.getProperty("Target/$AnnotationPath/fn/$Path/$Type");}else if(i.indexOf("com.sap.vocabularies.UI.v1.DataPoint")>-1){b=a.getProperty("Value/$Path/$Type");}else{b=undefined;}}else{b=undefined;}break;}}return b;}function H(a){var b=false;if(a){a.getCurrentContexts().forEach(function(i){if(i&&i.isTransient()){b=true;}});}return b;}function s(a,b){var i=0,j=a.split("/$NavigationPropertyBinding/");for(var k=j[0];i<j.length-1;i++){var K1=t(b,k,j[i+1]);if(K1&&K1["SearchRestrictions"]){return K1["SearchRestrictions"];}k=k+"/$NavigationPropertyBinding/"+j[i];}return b.getObject(a+"@Org.OData.Capabilities.V1.SearchRestrictions");}function t(a,b,i){var j=a.getObject(b+"@Org.OData.Capabilities.V1.NavigationRestrictions");var k=j&&j.RestrictedProperties;return(k&&k.find(function(K1){return(K1&&K1.NavigationProperty&&K1.NavigationProperty.$NavigationPropertyPath===i);}));}function _(a,b,i){var j=false;var k=a.getObject(b+"@Org.OData.Capabilities.V1.FilterRestrictions");if(k&&k.NonFilterableProperties){j=k.NonFilterableProperties.some(function(K1){return K1.$NavigationPropertyPath===i||K1.$PropertyPath===i;});}return j;}function u(a,b,i){var j=b+"/"+i,k=j.split("/").splice(0,2),K1=j.split("/").splice(2),L1=false,M1="";b=k.join("/");L1=K1.some(function(N1,O1,P1){if(M1.length>0){M1+="/"+N1;}else{M1=N1;}if(O1===P1.length-2){var Q1=t(a,b,N1);var R1=Q1&&Q1.FilterRestrictions;var S1=R1&&R1.NonFilterableProperties;var T1=P1[P1.length-1];if(S1&&S1.find(function(U1){return U1.$PropertyPath===T1;})){return true;}}if(O1===P1.length-1){L1=_(a,b,M1);}else if(a.getObject(b+"/$NavigationPropertyBinding/"+N1)){L1=_(a,b,M1);M1="";b="/"+a.getObject(b+"/$NavigationPropertyBinding/"+N1);}return L1===true;});return L1;}function w(a,b,i,j){if(typeof i!=="string"){throw new Error("sProperty parameter must be a string",i);}var k;if(a.getProperty(b+"/@com.sap.vocabularies.Common.v1.ResultContext")===true){return true;}var K1=a.createBindingContext(b+"/"+i);if(K1.getProperty("@com.sap.vocabularies.UI.v1.Hidden")===true){return false;}if(!j&&K1.getProperty("@com.sap.vocabularies.UI.v1.HiddenFilter")){return false;}if(b.split("/").length===2&&i.indexOf("/")<0){k=!_(a,b,i);}else{k=!u(a,b,i);}if(k&&K1){var L1=r(K1);if(L1){k=v.indexOf(L1)!==-1;}else{k=false;}}return k;}function x(a){return K(a).getShellServices();}function y(a,b,i){var j=J1.getShellServices(a);return j.getLinks({semanticObject:b,params:i});}function z(a){var b=[];var j=Object.keys(a);for(var i=0;i<j.length;i++){var k={"LocalProperty":{"$PropertyPath":j[i]},"SemanticObjectProperty":a[j[i]]};b.push(k);}return b;}function A(a,b,j,k){for(var i=0;i<a.length;i++){var K1=a[i];var L1=K1.intent;var M1=L1.split("-")[1].split("?")[0];if(b&&b.indexOf(M1)===-1){k.push({text:K1.text,targetSemObject:L1.split("#")[1].split("-")[0],targetAction:M1.split("~")[0],targetParams:j});}}}function E(a,b,i,j){if(j&&j.length>0){var k=a.unavailableActions?a.unavailableActions:[];var K1=a.mapping?z(a.mapping):[];var L1={navigationContexts:b,semanticObjectMapping:K1};A(j,k,L1,i);}}function G(b,a,i,k,K1,L1){var M1=x(i),N1={},O1="",P1="";var Q1;var R1=[];var S1=[];if(a){if(k&&k.length>0){for(var j=0;j<k.length;j++){var T1=k[j].$PropertyPath;if(!N1[T1]){N1[T1]={value:a[T1]};}}}else{var U1=K1.getObject(L1+"/$Type/$Key");for(var V1 in U1){var W1=U1[V1];if(!N1[W1]){N1[W1]={value:a[W1]};}}}}var X1=N(i).getViewData();var Y1=[];if(X1.additionalSemanticObjects){var Z1=Object.keys(X1.additionalSemanticObjects);for(var V1=0;V1<Z1.length;V1++){y(i,Z1[V1],N1).then(E.bind(this,X1.additionalSemanticObjects[Z1[V1]],b,Y1)).catch(function(_1){L.error("Error while retrieving SO Intents",_1);});}}function $1(){var _1=M1.parseShellHash(document.location.hash);O1=_1.semanticObject;P1=_1.action;return y(i,O1,N1);}$1().then(function(_1){if(_1&&_1.length>0){var a2={};var b2=[];var c2=L1+"@";var d2=L1+"/@";var e2=K1.getObject(c2);Q1=I(e2,O1);if(!Q1.bHasEntitySetSO){var f2=K1.getObject(d2);Q1=I(f2,O1);}S1=Q1.aUnavailableActions;S1.push(P1);a2.navigationContexts=b;a2.semanticObjectMapping=Q1.aMappings;A(_1,S1,a2,b2);R1=b2.concat(Y1);i.getBindingContext("internal").setProperty("relatedApps/visibility",R1.length>0);i.getBindingContext("internal").setProperty("relatedApps/items",R1);}else{i.getBindingContext("internal").setProperty("relatedApps/visibility",false);}}).catch(function(_1){L.error("Cannot read links",_1);});return R1;}function I(a,b){var i={bHasEntitySetSO:false,aUnavailableActions:[],aMappings:[]};var j,k;var K1;for(var L1 in a){if(L1.indexOf("com.sap.vocabularies.Common.v1.SemanticObject")>-1&&a[L1]===b){i.bHasEntitySetSO=true;j="@com.sap.vocabularies.Common.v1.SemanticObjectMapping";k="@com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions";if(L1.indexOf("#")>-1){K1=L1.split("#")[1];j=j+"#"+K1;k=k+"#"+K1;}i.aMappings=i.aMappings.concat(a[j]);i.aUnavailableActions=i.aUnavailableActions.concat(a[k]);break;}}return i;}function U(a){var b=a.getModel().getMetaModel();var i=a.getBindingContext();var j=i&&i.getPath();var k=b.getMetaPath(j);var K1=k+"/"+"@com.sap.vocabularies.Common.v1.SemanticKey";var L1=b.getObject(K1);var M1=i.getObject();if(!M1){i.requestObject().then(function(M1){return G(i,M1,a,L1,b,k);}).catch(function(N1){L.error("Cannot update the related app details",N1);});}else{return G(i,M1,a,L1,b,k);}}function J(b){var a=["sap.m.Button","sap.m.OverflowToolbarButton"];if(b&&a.indexOf(b.getMetadata().getName())!==-1&&b.getVisible()&&b.getEnabled()){b.firePress();}}function R(a){if(a==="true"||a===true){return true;}else{return false;}}function K(a){if(a.isA("sap.fe.core.AppComponent")){return a;}var b=C.getOwnerComponentFor(a);if(!b){return a;}else{return K(b);}}function N(a){if(a&&a.isA("sap.ui.core.ComponentContainer")){a=a.getComponentInstance();a=a&&a.getRootControl();}while(a&&!(a instanceof V)){a=a.getParent();}return a;}function O(a,b,i,j,k){var K1=i.getModel();var L1=false;var M1=K1.bindContext(i.getPath()+"/DraftAdministrativeData").getBoundContext();if(i&&i.getObject()&&(!i.getObject().DraftAdministrativeData||i.getObject().IsActiveEntity===true)){a();}else{M1.requestObject().then(function(N1){if(N1){L1=!(N1.CreationDateTime===N1.LastChangeDateTime);if(L1){D.performAfterDiscardorKeepDraft(a,b,j,k);}else{a();}}else{a();}}).catch(function(N1){L.error("Cannot retrieve draftDataContext information",N1);});}}function Q(a,b,i,j){var k=b.getModel("ui").getProperty("/isEditable"),K1=sap.ui.getCore().getLibraryResourceBundle("sap.fe.templates"),L1=K1&&K1.getText("T_COMMON_UTILS_NAVIGATION_AWAY_MSG"),M1=K1&&K1.getText("T_COMMON_UTILS_NAVIGATION_AWAY_CONFIRM_BUTTON"),N1=K1&&K1.getText("T_COMMON_UTILS_NAVIGATION_AWAY_CANCEL_BUTTON");if(i===P.Sticky&&k){return M.warning(L1,{actions:[M1,N1],onClose:function(O1){if(O1===M1){var P1=b&&b.getModel("internal");L.info("Navigation confirmed.");if(P1){P1.setProperty("/sessionOn",false);}else{L.warning("Local UIModel couldn't be found.");}a();}else{L.info("Navigation rejected.");}}});}return a();}function W(a,b){var i=false,j=a.split("/");if(j.length>1){i=b[j[0]]&&b[j[0]].hasOwnProperty(j[1])&&b[j[0]][j[1]]===0;}else{i=b[a]===0;}return i;}function Y(a,b){var k=[];for(var i=0;i<a.length;i++){var K1=a[i].entitySet,L1=a[i].contextData,M1;delete L1["@odata.context"];delete L1["%40odata.context"];delete L1["@odata.metadataEtag"];delete L1["%40odata.metadataEtag"];delete L1["SAP__Messages"];M1=Object.keys(L1);for(var j=0;j<M1.length;j++){var N1=M1[j],O1=b.getObject("/"+K1+"/"+N1+"@");if(O1){if(O1["@com.sap.vocabularies.PersonalData.v1.IsPotentiallySensitive"]||O1["@com.sap.vocabularies.UI.v1.ExcludeFromNavigationContext"]||O1["@com.sap.vocabularies.Analytics.v1.Measure"]){delete L1[N1];}else if(O1["@com.sap.vocabularies.Common.v1.FieldControl"]){var P1=O1["@com.sap.vocabularies.Common.v1.FieldControl"];if(P1["$EnumMember"]&&P1["$EnumMember"].split("/")[1]==="Inapplicable"){delete L1[N1];}else if(P1["$Path"]&&J1.isFieldControlPathInapplicable(P1["$Path"],L1)){delete L1[N1];}}}}k.push(L1);}return k;}function Z(a,b){var i=a.getObject(b+"/")||{},j={};for(var k in i){if(i.hasOwnProperty(k)&&!/^\$/i.test(k)&&i[k].$kind&&i[k].$kind==="Property"){j[k]=i[k];}}return j;}function $(a,b){var i;if(a&&b){i=a.getObject(b+"@Org.OData.Capabilities.V1.FilterRestrictions/RequiredProperties");}return i;}function a1(a,i){var b=a&&a.getActions();if(b){b.forEach(function(j){if(j.isA("sap.ui.mdc.actiontoolbar.ActionToolbarAction")){j=j.getAction();}if(j.data("IBNData")){i.push(j);}});}return i;}function b1(i,a){var b=this;var j={};var k=function(K1){if(K1){var L1=Object.keys(K1);L1.map(function(M1){if(M1.indexOf("_")!==0&&M1.indexOf("odata.context")===-1){j[M1]={value:K1[M1]};}});}if(i.length){i.forEach(function(M1){var N1=M1.data("IBNData").semanticObject;var O1=M1.data("IBNData").action;b.getShellServices(a).getLinks({semanticObject:N1,action:O1,params:j}).then(function(P1){M1.setVisible(P1&&P1.length===1);}).catch(function(P1){L.error("Cannot retrieve the links from the shell service",P1);});});}};if(a&&a.getBindingContext()){a.getBindingContext().requestObject().then(function(K1){return k(K1);}).catch(function(K1){L.error("Cannot retrieve the links from the shell service",K1);});}else{k();}}function c1(a,b,i,j){var k=a;if(b){if(j){var K1=d1(b.aCustomBundles,a+"|"+j);k=K1?a+"|"+j:a;}return b.getText(k,i);}b=sap.ui.getCore().getLibraryResourceBundle("sap.fe.core");return b.getText(k,i);}function d1(a,k){if(a.length){for(var i=a.length-1;i>=0;i--){var b=a[i].hasText(k);if(b){return true;}d1(a[i].aCustomBundles,k);}}return false;}function e1(a,b,i,j){i=!i?a.getObject(a.getPath()):i;var k=a.getPath().split("/@")[0];var K1=a.getObject(k).$Type;var L1=f1(a.getModel(),K1);if(L1){k="/"+L1;}if(j){return a.getObject(k+"/"+i+"@Org.OData.Core.V1.OperationAvailable");}if(b){return k+"/"+i;}else{return{sContextPath:k,sProperty:a.getObject(k+"/"+i+"@Org.OData.Core.V1.OperationAvailable/$Path"),sBindingParameter:a.getObject(k+"/"+i+"/@$ui5.overload/0/$Parameter/0/$Name")};}}function f1(a,b){var i=a.getObject("/");for(var k in i){if(typeof i[k]==="object"&&i[k].$Type===b){return k;}}}function g1(a,b){var i=a["@com.sap.vocabularies.Common.v1.Text"],j=i&&((a&&a["@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement"])||(b&&b["@com.sap.vocabularies.UI.v1.TextArrangement"]));if(j){if(j.$EnumMember==="com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly"){return"Description";}else if(j.$EnumMember==="com.sap.vocabularies.UI.v1.TextArrangementType/TextLast"){return"ValueDescription";}else if(j.$EnumMember==="com.sap.vocabularies.UI.v1.TextArrangementType/TextSeparate"){return"Value";}return"DescriptionValue";}return i?"DescriptionValue":"Value";}function h1(a,b,j){for(var k in b){a.setProperty("dynamicActions/"+k,{bEnabled:false,aApplicable:[],aNotApplicable:[]});var K1=[],L1=[];var M1=b[k];if(typeof M1==="object"&&M1!==null&&M1!==undefined){for(var i=0;i<j.length;i++){var N1=j[i];if(N1){var O1=N1.getObject();var P1=B.transformRecursively(M1,"Binding",function(R1){return B.constant(O1[R1.path]);},true);var Q1=B.compileBinding(P1);if(Q1==="true"){a.getModel().setProperty(a.getPath()+"/dynamicActions/"+k+"/bEnabled",true);K1.push(N1);}else{L1.push(N1);}}}}else{for(var i=0;i<j.length;i++){var N1=j[i];if(N1){var O1=N1.getObject();if(M1===null&&!!O1["#"+k]){a.getModel().setProperty(a.getPath()+"/dynamicActions/"+k+"/bEnabled",true);break;}else if(N1.getObject(M1)){a.getModel().setProperty(a.getPath()+"/dynamicActions/"+k+"/bEnabled",true);K1.push(N1);}else{L1.push(N1);}}}}a.getModel().setProperty(a.getPath()+"/dynamicActions/"+k+"/aApplicable",K1);a.getModel().setProperty(a.getPath()+"/dynamicActions/"+k+"/aNotApplicable",L1);}}function i1(a){var b=T.getDataTypeClassName(a);var i=T.getBaseType(b);return F.getOperatorsForType(i);}function j1(a,b){var i=a.filter(function(j){return b.indexOf(j)>-1;});return i.toString()||undefined;}function k1(i){var j=J1.AllowedExpressionsPrio;i.sort(function(a,b){return j.indexOf(a)-j.indexOf(b);});return i[0];}function l1(a,b,i,j,k,K1){var L1=J1.getFilterRestrictionsByPath(b,i);var M1=["EQ"];var N1=["EQ","GE","LE","LT","GT","BT","NOTLE","NOTLT","NOTGE","NOTGT"];var O1=["EQ","GE","LE","LT","GT","BT","NE","NOTBT","NOTLE","NOTLT","NOTGE","NOTGT"];var P1=["Contains","NotContains","StartsWith","NotStartsWith","EndsWith","NotEndsWith"];var Q1=f.getSupportedOperations();var R1=k==="true"||k===true;var S1=[];var T1=typeof K1==="string"?JSON.parse(K1).customData:K1;if(i.getObject(b+"/@com.sap.vocabularies.Common.v1.ResultContext")===true){return M1.toString();}if(T1&&T1.operatorConfiguration&&T1.operatorConfiguration.length>0){S1=f.getFilterOperations(T1.operatorConfiguration);}else{S1=f.getSemanticDateOperations();}var U1=i1(j);if(L1&&L1.FilterAllowedExpressions&&L1.FilterAllowedExpressions[a]){if(R1){U1=Q1.concat(U1);}var V1=J1.getSpecificAllowedExpression(L1.FilterAllowedExpressions[a]);var W1;switch(V1){case"SingleValue":W1=j1(U1,M1);break;case"MultiValue":W1=j1(U1,M1);break;case"SingleRange":var X1=j1(U1,j==="Edm.Date"&&R1?S1:N1);W1=X1?X1:"";break;case"MultiRange":W1=j1(U1,O1);break;case"SearchExpression":W1=j1(U1,P1);break;case"MultiRangeOrSearchExpression":W1=j1(U1,P1.concat(O1));break;default:break;}return W1;}else if(j==="Edm.Date"){S1=f.getSemanticDateOperations();var Y1=U1.filter(function(Z1){return S1.indexOf(Z1)<0;});return Y1.toString();}}function m1(a,b){var i=b.substring(0,b.lastIndexOf("/"));var j=a.getObject(i+"/@com.sap.vocabularies.Common.v1.ResultContext");var k={};if(j&&i!==b){k.contextPath=i;k.parameterProperties=J1.getContextPathProperties(a,i);}return k;}function n1(a,b,i,j){var k=g.getConditions(j,a);if(k){if(!b||b.indexOf(k.operator)>-1){i.push(k);}}return i;}function o1(a,b,i,j,k,K1,L1,M1,N1){var O1=[],P1,Q1;if(N1||J1.isPropertyFilterable(M1,a,K1,true)){P1=b.getSelectOption(i);Q1=N1?["EQ"]:J1.getOperatorsForProperty(K1,a,M1);var R1=L1[K1];O1=N1?n1(R1,Q1,O1,P1[0]):P1.reduce(n1.bind(null,R1,Q1),O1);if(O1.length){if(k){j[k+K1]=j.hasOwnProperty(k+K1)?j[k+K1].concat(O1):O1;}else{j[K1]=j.hasOwnProperty(K1)?j[K1].concat(O1):O1;}}}}function p1(a,b,i,j){var k=a.getSelectOptionsPropertyNames(),K1=J1.getContextPathProperties(i,j),L1=Object.keys(K1),M1=J1.getParameterInfo(i,j),N1=M1.contextPath,O1=M1.parameterProperties,P1=!!M1.contextPath&&O1&&Object.keys(O1).length>0;if(P1){var Q1=Object.keys(O1);Q1.forEach(function(R1){var S1;if(k.includes("$Parameter."+R1)){S1="$Parameter."+R1;}else if(k.includes(R1)){S1=R1;}else if(R1.startsWith("P_")&&k.includes("$Parameter."+R1.slice(2,R1.length))){S1="$Parameter."+R1.slice(2,R1.length);}else if(R1.startsWith("P_")&&k.includes(R1.slice(2,R1.length))){S1=R1.slice(2,R1.length);}else if(k.includes("$Parameter.P_"+R1)){S1="$Parameter.P_"+R1;}else if(k.includes("P_"+R1)){S1="P_"+R1;}if(S1){o1(N1,a,S1,b,undefined,R1,O1,i,true);}});}L1.forEach(function(R1){var S1;if(k.includes(R1)){S1=R1;}else if(R1.startsWith("P_")&&k.includes(R1.slice(2,R1.length))){S1=R1.slice(2,R1.length);}else if(k.includes("P_"+R1)){S1="P_"+R1;}if(S1){o1(j,a,S1,b,undefined,R1,K1,i,false);}});k.forEach(function(R1){if(R1.indexOf(".")>0&&!R1.includes("$Parameter")){var S1=("/"+R1.replaceAll(".","/")).startsWith(j)?"/"+R1.replaceAll(".","/"):j+"/"+R1.replaceAll(".","/");if(i.getObject(S1.replace("P_",""))){q1(S1,j,a,R1,i,b);}}});return b;}function q1(a,b,j,k,K1,L1){var M1=k.split(".");if(("/"+k.replaceAll(".","/")).startsWith(b)){var N1=("/"+k).replaceAll(".","/"),O1=N1.replace(b+"/","");M1=O1.split("/");}var P1="";var Q1=M1[M1.length-1];for(var i=0;i<M1.length-1;i++){if(K1.getObject(b+"/"+M1[i].replace("P_","")).$isCollection){P1=P1+M1[i]+"*/";}else{P1=P1+M1[i]+"/";}b=b+"/"+M1[i];}var R1=a.slice(0,a.lastIndexOf("/")),S1=J1.getContextPathProperties(K1,R1),T1=j.getSelectOptionsPropertyNames();var U1=Q1;if(S1[Q1]){U1=Q1;}else if(Q1.startsWith("P_")&&S1[Q1.replace("P_","")]){U1=Q1.replace("P_","");}else if(S1["P_"+Q1]&&T1.includes("P_"+Q1)){U1="P_"+Q1;}if(Q1.startsWith("P_")&&L1[P1+U1]){return;}else if(!Q1.startsWith("P_")&&L1[P1+U1]){delete L1[P1+U1];o1(R1,j,k,L1,P1,U1,S1,K1,false);}else{o1(R1,j,k,L1,P1,U1,S1,K1,false);}}function r1(a,b,i){var j=J1.getAppComponent(i);var k=j.getNavigationService();return k.mixAttributesAndSelectionVariant(b,a.toJSONString());}function s1(a,b,i,j){var k,K1="",L1=null;var M1=function(R1,S1,T1){var U1={option:"",sign:"I",low:S1,high:T1};switch(R1){case"Contains":U1.option="CP";break;case"StartsWith":U1.option="CP";U1.low+="*";break;case"EndsWith":U1.option="CP";U1.low="*"+U1.low;break;case"BT":case"LE":case"LT":case"GT":case"NE":case"EQ":U1.option=R1;break;case"TODAY":case"DATE":U1.option="EQ";break;case"EEQ":U1.option="EQ";break;case"Empty":U1.option="EQ";U1.low="";break;case"NotContains":U1.option="CP";U1.sign="E";break;case"NOTBT":U1.option="BT";U1.sign="E";break;case"NotStartsWith":U1.option="CP";U1.low+="*";U1.sign="E";break;case"NotEndsWith":U1.option="CP";U1.low="*"+U1.low;U1.sign="E";break;case"NotEmpty":U1.option="NE";U1.low="";break;case"NOTLE":U1.option="LE";U1.sign="E";break;case"NOTGE":U1.option="GE";U1.sign="E";break;case"NOTLT":U1.option="LT";U1.sign="E";break;case"NOTGT":U1.option="GT";U1.sign="E";break;default:L.warning(R1+" is not supported. "+k+" could not be added to the navigation context");}return U1;};var N1=b.filterConditions;var O1=b.filterConditionsWithoutConflict?b.filterConditionsWithoutConflict:{};var P1=i.propertiesWithoutConflict?i.propertiesWithoutConflict:{};var Q1=function(a,k,R1){var S1=N1[k];for(var T1 in S1){var U1=S1[T1];K1=(U1.values[0]&&U1.values[0].toString())||"";L1=(U1.values[1]&&U1.values[1].toString())||null;if(U1.operator==="TODAY"||U1.operator==="DATE"){var V1=j[0].aFilters.filter(function(U1){return U1.sPath===k;});K1=V1[0].oValue1||"";L1=null;}var W1=M1(U1.operator,K1,L1);if(W1.option){a.addSelectOption(R1?R1:k,W1.sign,W1.option,W1.low,W1.high);}}};for(var k in N1){if(!a.getSelectOption(k)){if(k==="$editState"){continue;}Q1(a,k);}else{if(P1&&k in P1){Q1(a,k,P1[k]);}if(k in O1){Q1(a,k,O1[k]);}}}return a;}function t1(a){var i=e.isStickySessionSupported(a.getModel().getMetaModel());var b=a.getModel("ui").getProperty("/isEditable");return i&&b;}function u1(a,b,j){if(b&&a&&a.length){for(var i=0;i<a.length;i++){var k=b.getSelectOption("DisplayCurrency"),K1=j&&j.getSelectOption("DisplayCurrency");if(a[i].$PropertyPath==="DisplayCurrency"&&(!k||!k.length)&&K1&&K1.length){var L1=K1[0];var M1=L1["Sign"];var N1=L1["Option"];var O1=L1["Low"];var P1=L1["High"];b.addSelectOption("DisplayCurrency",M1,N1,O1,P1);}}}}function v1(a,b){var i=a.getObject(b+"/").$Key;var j=[];var k=a.getObject(b+"/");for(var K1 in k){if(k[K1].$kind&&k[K1].$kind==="Property"){var L1=a.getObject(b+"/"+K1+"@")||{},M1=i.indexOf(K1)>-1,N1=M1||L1["@Org.OData.Core.V1.Immutable"],O1=!L1["@Org.OData.Core.V1.Computed"],P1=!L1["@com.sap.vocabularies.UI.v1.Hidden"];if(N1&&O1&&P1){j.push(K1);}}}return j;}function w1(a,b,j,k){return new Promise(function(K1,L1){var M1=a.getComponentData(),N1=(M1&&M1.startupParameters)||{},O1=a.getShellServices();if(!O1.hasUShell()){b.map(function(i){var P1=k?"/"+i.$Name:i.getPath().slice(i.getPath().lastIndexOf("/")+1);var Q1=k?P1.slice(1):P1;if(N1[Q1]){j.setProperty(P1,N1[Q1][0]);}});return K1(true);}return O1.getStartupAppState(a).then(function(P1){var Q1=P1.getData()||{},R1=(Q1.selectionVariant&&Q1.selectionVariant.SelectOptions)||[];b.map(function(S1){var T1=k?"/"+S1.$Name:S1.getPath().slice(S1.getPath().lastIndexOf("/")+1);var U1=k?T1.slice(1):T1;if(N1[U1]){j.setProperty(T1,N1[U1][0]);}else if(R1.length>0){for(var i in R1){var V1=R1[i];if(V1.PropertyName===U1){var W1=V1.Ranges.length?V1.Ranges[0]:undefined;if(W1&&W1.Sign==="I"&&W1.Option==="EQ"){j.setProperty(T1,W1.Low);}}}}});return K1(true);});});}function x1(a){var b=[];if(a.parameters){var j=Object.keys(a.parameters)||[];if(j.length>0){j.forEach(function(k){var K1=a.parameters[k];if(K1.value&&K1.value.value&&K1.value.format==="binding"){var L1={"LocalProperty":{"$PropertyPath":K1.value.value},"SemanticObjectProperty":k};if(b.length>0){for(var i=0;i<b.length;i++){if(b[i]["LocalProperty"]["$PropertyPath"]!==L1["LocalProperty"]["$PropertyPath"]){b.push(L1);}}}else{b.push(L1);}}});}}return b;}function y1(a,b){var i=[];var j={};var k;var K1=a.controlConfiguration;for(var L1 in K1){if(L1.indexOf("@com.sap.vocabularies.UI.v1.DataPoint")>-1||L1.indexOf("@com.sap.vocabularies.UI.v1.Chart")>-1){if(K1[L1].navigation&&K1[L1].navigation.targetOutbound&&K1[L1].navigation.targetOutbound.outbound){var M1=K1[L1].navigation.targetOutbound.outbound;var N1=b[M1];if(N1.semanticObject&&N1.action){if(L1.indexOf("Chart")>-1){k=c.generate(["fe","MicroChartLink",L1]);}else{k=c.generate(["fe","HeaderDPLink",L1]);}var i=J1.getSemanticObjectMapping(N1);j[k]={semanticObject:N1.semanticObject,action:N1.action,semanticObjectMapping:i};}else{L.error("Cross navigation outbound is configured without semantic object and action for "+M1);}}}}return j;}function z1(a,b){var j=typeof b==="string"?JSON.parse(b):b;for(var i=0;i<j.length;i++){var k=(j[i]["LocalProperty"]&&j[i]["LocalProperty"]["$PropertyPath"])||(j[i]["@com.sap.vocabularies.Common.v1.LocalProperty"]&&j[i]["@com.sap.vocabularies.Common.v1.LocalProperty"]["$Path"]);var K1=j[i]["SemanticObjectProperty"]||j[i]["@com.sap.vocabularies.Common.v1.SemanticObjectProperty"];if(a.getSelectOption(k)){var L1=a.getSelectOption(k);a.removeSelectOption(k);a.massAddSelectOption(K1,L1);}}return a;}function A1(a,b,i,j){return new Promise(function(k){var K1=a.getObject(b+"@com.sap.vocabularies.Common.v1.SemanticObject");var L1=a.getObject(b+"@com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions");var M1,N1;M1=[{semanticObject:K1}];N1={semanticObject:K1};k({semanticObjectPath:b,semanticObjectForGetLinks:M1,semanticObject:N1,unavailableActions:L1});}).catch(function(k){L.error("Error in fnGetSemanticObjectsFromPath",k);});}function B1(a,b,j,K1){return Promise.all(a).then(function(L1){var M1,N1,O1,P1=[];var Q1={};var R1=function(Z1,$1){for(var _1 in $1){if(_1===Z1){return true;}else{return false;}}};for(var k=0;k<L1.length;k++){M1=L1[k];if(M1&&M1.length>0&&M1[0]!==undefined){var S1={},T1={},U1;for(var i=0;i<M1.length;i++){P1.push([]);var V1=false;var W1=false;for(var X1=0;X1<M1[i][0].length;X1++){N1=M1[i][0][X1];O1=N1&&N1.intent.split("-")[1];if(!(N1&&N1.intent&&N1.intent.indexOf(K1)===0)){V1=true;if(!R1(O1,b[k].unavailableActions)){P1[i].push(N1);W1=true;}}}T1={semanticObject:b[k].semanticObject,path:b[k].path,HasTargets:W1,HasTargetsNotFiltered:V1};if(S1[b[k].semanticObject]===undefined){S1[b[k].semanticObject]={};}U1=b[k].path.replace(/\//g,"_");if(S1[b[k].semanticObject][U1]===undefined){S1[b[k].semanticObject][U1]={};}S1[b[k].semanticObject][U1]=Object.assign(S1[b[k].semanticObject][U1],T1);}var Y1=Object.keys(S1)[0];if(Object.keys(Q1).includes(Y1)){Q1[Y1]=Object.assign(Q1[Y1],S1[Y1]);}else{Q1=Object.assign(Q1,S1);}P1=[];}}if(Object.keys(Q1).length>0){j.setProperty("semanticsTargets",o(Q1,j.getProperty("semanticsTargets")));return Q1;}}).catch(function(i){L.error("fnUpdateSemanticTargetsModel: Cannot read links",i);});}function C1(a,b,i,j){var k;var K1=e.getEntitySetPath(j),L1=K1,M1=L1?L1.slice(1):L1;var N1=m.getInvolvedDataModelObjects(i.createBindingContext("/"+M1));k=n.createConverterContextForMacro(N1.startingEntitySet.name,i,a&&a.getDiagnostics(),o,N1.contextLocation,undefined);return J1.getSemanticObjectsFromPath(i,j,b,k);}function D1(a,b){var k=function(j,$1){return K1(j,$1,[]);};var K1=function(j,$1,_1){if(!j){return _1;}if(j instanceof Array){for(var i in j){_1=_1.concat(K1(j[i],$1,[]));}return _1;}if(j[$1]){_1.push(j[$1]);}if(typeof j=="object"&&j!==null){var a2=Object.keys(j);if(a2.length>0){for(i=0;i<a2.length;i++){_1=_1.concat(K1(j[a2[i]],$1,[]));}}}return _1;};var L1=function(j){return j.filter(function($1,_1){return j.indexOf($1)===_1;});};var M1=a.getView();var N1=M1.getBindingContext("internal");if(N1){var O1=[];var P1=a.getOwnerComponent();var Q1=sap.ui.core.Component.getOwnerComponentFor(P1);var R1=Q1.getMetaModel();var S1=P1.getModel(b).getData();if(JSON.stringify(S1)==="{}"){S1=P1.getModel(b)._getObject("/",undefined);}var T1=k(S1,"semanticObjectPath");T1=L1(T1);var U1=J1.getShellServices(Q1);var V1=U1.hrefForExternal();var W1=[];var X1=[];var Y1;var Z1;if(V1&&V1.indexOf("?")!==-1){V1=V1.split("?")[0];}for(var i=0;i<T1.length;i++){Y1=T1[i];O1.push(J1.getSemanticObjectPromise(Q1,M1,R1,Y1));}if(O1.length===0){return Promise.resolve();}else{Promise.all(O1).then(function($1){var _1=[],a2;var b2=$1.filter(function(c2){if(c2.semanticObject!==undefined&&c2.semanticObject.semanticObject&&typeof c2.semanticObject.semanticObject==="object"){a2=B.compileBinding(B.bindingExpression(c2.semanticObject.semanticObject.$Path));c2.semanticObject.semanticObject=a2;c2.semanticObjectForGetLinks[0].semanticObject=a2;return true;}else if(c2){return c2.semanticObject!==undefined;}else{return false;}});for(var j=0;j<b2.length;j++){Z1=b2[j];if(Z1&&Z1.semanticObject&&!(Z1.semanticObject.semanticObject.indexOf("{")===0)){W1.push(Z1.semanticObjectForGetLinks);X1.push({semanticObject:Z1.semanticObject.semanticObject,unavailableActions:Z1.unavailableActions,path:b2[j].semanticObjectPath});_1.push(U1.getLinksWithCache([Z1.semanticObjectForGetLinks]));}}return J1.updateSemanticTargets(_1,X1,N1,V1);}).catch(function(j){L.error("fnGetSemanticTargetsFromTable: Cannot get Semantic Objects",j);});}}else{return Promise.resolve();}}function E1(a,b){var i=J1.FilterRestrictions;if(b===i.REQUIRED_PROPERTIES||b===i.NON_FILTERABLE_PROPERTIES){var j=[];if(a&&a[b]){j=a[b].map(function(K1){return K1.$PropertyPath;});}return j;}else if(b===i.ALLOWED_EXPRESSIONS){var k={};if(a&&a.FilterExpressionRestrictions){a.FilterExpressionRestrictions.forEach(function(K1){if(k[K1.Property.$PropertyPath]){k[K1.Property.$PropertyPath].push(K1.AllowedExpressions);}else{k[K1.Property.$PropertyPath]=[K1.AllowedExpressions];}});}return k;}return a;}function F1(a,b){var i={},j=J1.FilterRestrictions,k=a?b.getObject(a+"@Org.OData.Capabilities.V1.FilterRestrictions"):{};i[j.REQUIRED_PROPERTIES]=E1(k,j.REQUIRED_PROPERTIES)||[];i[j.NON_FILTERABLE_PROPERTIES]=E1(k,j.NON_FILTERABLE_PROPERTIES)||[];i[j.ALLOWED_EXPRESSIONS]=E1(k,j.ALLOWED_EXPRESSIONS)||{};var K1=a.split("/");if(K1.length>2){var L1=K1[K1.length-1];K1.splice(-1,1);var M1=K1.join("/");var N1=J1.getNavigationRestrictions(b,M1,L1);var O1=N1&&N1["FilterRestrictions"];i[j.REQUIRED_PROPERTIES].concat(E1(O1,j.REQUIRED_PROPERTIES)||[]);i[j.NON_FILTERABLE_PROPERTIES].concat(E1(O1,j.NON_FILTERABLE_PROPERTIES)||[]);i[j.ALLOWED_EXPRESSIONS]=o({},E1(O1,j.ALLOWED_EXPRESSIONS)||{},i[j.ALLOWED_EXPRESSIONS]);}return i;}function G1(a,b,i,j){i=i||{};if(j){return j.templateControlFragment(a,b,i.view).then(function(k){return j.targets==="xmlTree"&&k.length>0?k[0]:k;});}else{return I1().then(function(){return p.process(X.loadTemplate(a,"fragment"),{name:a},b);}).then(function(k){var K1=k.firstElementChild;if(!!i.isXML&&K1){return K1;}return q.load({id:i.id,definition:k,controller:i.controller});});}}function H1(a,b){if(!a||!b){return Promise.resolve(null);}var i=b.getMetaModel();var j=a.split("/").filter(Boolean),k=j.pop(),K1=j.join("/"),L1=K1&&i.getObject("/"+K1);if(L1&&L1.$kind==="Singleton"){var M1=j[j.length-1],N1=b.bindProperty("/"+M1+"/"+k);return N1.requestValue();}return Promise.resolve(null);}function I1(){return new Promise(function(a,b){sap.ui.require(["sap/fe/macros/macroLibrary"],function(){a();});});}var J1={isPropertyFilterable:w,isFieldControlPathInapplicable:W,removeSensitiveData:Y,fireButtonPress:J,getTargetView:N,hasTransientContext:H,updateRelatedAppsDetails:U,resolveStringtoBoolean:R,getAppComponent:K,processDataLossConfirmation:Q,getMandatoryFilterFields:$,getContextPathProperties:Z,getParameterInfo:m1,updateDataFieldForIBNButtonsVisibility:b1,getTranslatedText:c1,getEntitySetName:f1,getActionPath:e1,computeDisplayMode:g1,setActionEnablement:h1,isStickyEditMode:t1,getOperatorsForProperty:l1,addSelectionVariantToConditions:p1,addExternalStateFiltersToSelectionVariant:s1,addPageContextToSelectionVariant:r1,addDefaultDisplayCurrency:u1,getNonComputedVisibleFields:v1,setUserDefaults:w1,getShellServices:x,getIBNActions:a1,getHeaderFacetItemConfigForExternalNavigation:y1,getSemanticObjectMapping:x1,setSemanticObjectMappings:z1,getSemanticObjectPromise:C1,getSemanticTargetsFromPageModel:D1,getSemanticObjectsFromPath:A1,updateSemanticTargets:B1,getPropertyDataType:r,getNavigationRestrictions:t,getSearchRestrictions:s,getFilterRestrictionsByPath:F1,getSpecificAllowedExpression:k1,requestSingletonProperty:H1,templateControlFragment:G1,FilterRestrictions:{REQUIRED_PROPERTIES:"RequiredProperties",NON_FILTERABLE_PROPERTIES:"NonFilterableProperties",ALLOWED_EXPRESSIONS:"FilterAllowedExpressions"},AllowedExpressionsPrio:["SingleValue","MultiValue","SingleRange","MultiRange","SearchExpression","MultiRangeOrSearchExpression"],fnProcessDataLossOrDraftDiscardConfirmation:O};return J1;});
