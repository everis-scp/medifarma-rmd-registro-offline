/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/converters/ManifestSettings","sap/fe/core/converters/helpers/ConfigurableObject","sap/fe/core/converters/helpers/ID","sap/fe/core/helpers/StableIdHelper","sap/fe/core/helpers/BindingExpression","sap/fe/core/formatters/FPMFormatter"],function(M,C,I,S,B,f){"use strict";var _={};var g=B.greaterOrEqual;var a=B.and;var b=B.ifElse;var e=B.equal;var r=B.resolveBindingString;var c=B.isConstant;var d=B.formatResult;var h=B.or;var j=B.compileBinding;var k=B.bindingExpression;var l=B.annotationExpression;var m=S.replaceSpecialChars;var p=I.CustomActionID;var P=C.Placement;var A=M.ActionType;function q(i){return v(i)||u(i)||t(i)||s();}function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");}function t(o,i){if(!o)return;if(typeof o==="string")return w(o,i);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(o,i);}function u(i){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(i))return Array.from(i);}function v(i){if(Array.isArray(i))return w(i);}function w(n,o){if(o==null||o>n.length)o=n.length;for(var i=0,L=new Array(o);i<o;i++){L[i]=n[i];}return L;}var x;(function(x){x["Accept"]="Accept";x["Attention"]="Attention";x["Back"]="Back";x["Critical"]="Critical";x["Default"]="Default";x["Emphasized"]="Emphasized";x["Ghost"]="Ghost";x["Negative"]="Negative";x["Neutral"]="Neutral";x["Reject"]="Reject";x["Success"]="Success";x["Transparent"]="Transparent";x["Unstyled"]="Unstyled";x["Up"]="Up";})(x||(x={}));_.ButtonType=x;function y(i,n,o){var L;var N={};var O=[];var Q=function(R){var T=i[R];if(T.type===A.Menu){var U,V;var W=[];var X=false;var Y=(U=(V=T.menu)===null||V===void 0?void 0:V.map(function(Z){var $,a1,b1;var c1=n.find(function(c1){return c1.key===Z;});if(!c1){c1=i[Z];}if(((($=c1)===null||$===void 0?void 0:$.visible)||((a1=c1)===null||a1===void 0?void 0:a1.type)===A.DataFieldForAction||((b1=c1)===null||b1===void 0?void 0:b1.type)===A.DataFieldForIntentBasedNavigation)&&!o.find(function(d1){return d1.key===Z;})){X=j(h(r(c1.visible,"boolean"),r(X,"boolean")));W.push(c1);}return Z;}))!==null&&U!==void 0?U:[];if(W.length){T.visible=X;T.menu=W;}else{Y=[R];}O=[].concat(q(O),q(Y));}if(o.find(function(Z){return Z.key===R;})){T.visible=false;}N[R]=T;};for(var R in i){Q(R);}(L=O)===null||L===void 0?void 0:L.forEach(function(R){return delete N[R];});return N;}var z=function(i){var o={};i.forEach(function(n){var L;if(n===null||n===void 0?void 0:(L=n.menu)===null||L===void 0?void 0:L.length){n.menu.reduce(function(N,O){var Q=O.key;if(Q&&!N[Q]){N[Q]=true;}return N;},o);}});return i.filter(function(n){return!o[n.key];});};_.removeDuplicateActions=z;var D=function(i,n,o){if(n&&i.enabled===undefined){return undefined;}return F(i,o);};function E(i,n,o,L,N,O){var Q={};var R=function(T){var U,V,W;var X=i[T];var Y=((U=X.press)===null||U===void 0?void 0:U.lastIndexOf("."))||-1;var Z=(o===null||o===void 0?void 0:o.some(function($){return $.key===T;}))||false;Q[T]={id:(o===null||o===void 0?void 0:o.some(function($){return $.key===T;}))?T:p(T),visible:X.visible===undefined?"true":X.visible,enabled:D(X,Z,n),handlerModule:X.press&&X.press.substring(0,Y).replace(/\./gi,"/"),handlerMethod:X.press&&X.press.substring(Y+1),press:X.press,type:X.menu?A.Menu:A.Default,text:X.text,noWrap:X.__noWrap,key:m(T),enableOnSelect:X.enableOnSelect,defaultValuesExtensionFunction:X.defaultValuesFunction,position:{anchor:(V=X.position)===null||V===void 0?void 0:V.anchor,placement:X.position===undefined?P.After:X.position.placement},isNavigable:J(X,L,N),requiresSelection:X.requiresSelection===undefined?false:X.requiresSelection,enableAutoScroll:K(X),menu:(W=X.menu)!==null&&W!==void 0?W:[]};};for(var T in i){R(T);}return y(Q,o!==null&&o!==void 0?o:[],O!==null&&O!==void 0?O:[]);}_.getActionsFromManifest=E;function F(i,n){var o=r(i.enabled,"boolean");var L;if(c(o)&&o.value===undefined){L=true;}else if(c(o)&&typeof o.value==="boolean"){L=o.value;}else if(o._type!=="EmbeddedBinding"&&o._type!=="EmbeddedExpressionBinding"){var N=o.value;L=d([k("/","$view"),N,k("selectedContexts","internal")],f.customIsEnabledCheck,n.getEntityType());}else{L=o;}return j(b(i.requiresSelection===true,a(g(k("numberOfSelectedContexts","internal"),1),L),L));}function G(i){var n,o;if(!i){return"true";}if(!i.isBound){return"true";}var L=(n=i.annotations)===null||n===void 0?void 0:(o=n.Core)===null||o===void 0?void 0:o.OperationAvailable;if(L){var N=j(e(l(L.valueOf()),true));if(N){var O,Q;var R=(O=i.parameters)===null||O===void 0?void 0:(Q=O[0])===null||Q===void 0?void 0:Q.fullyQualifiedName;if(R){R=R.replace(i.fullyQualifiedName+"/","");N=N.replace(R+"/","");}return N;}return"true";}return"true";}_.getEnabledBinding=G;function H(i){var n=[];i.forEach(function(o){var L={"LocalProperty":{"$PropertyPath":o.LocalProperty.value},"SemanticObjectProperty":o.SemanticObjectProperty};n.push(L);});return n;}_.getSemanticObjectMapping=H;function J(i,n,o){var L,N;var O=true;if(o){var Q=n&&(n.detail||n.display);O=(Q===null||Q===void 0?void 0:Q.route)?true:false;}if(i&&i.afterExecution&&(((L=i.afterExecution)===null||L===void 0?void 0:L.navigateToInstance)===false||((N=i.afterExecution)===null||N===void 0?void 0:N.enableAutoScroll)===true)||!O){return false;}return true;}_.isActionNavigable=J;function K(i){var n;return(i===null||i===void 0?void 0:(n=i.afterExecution)===null||n===void 0?void 0:n.enableAutoScroll)===true;}_.enableAutoScroll=K;return _;},false);
