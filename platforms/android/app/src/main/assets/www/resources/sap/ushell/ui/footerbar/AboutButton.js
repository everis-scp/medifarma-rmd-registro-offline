// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define(["sap/m/Button","sap/m/Dialog","sap/m/ObjectHeader","sap/m/VBox","sap/ui/layout/form/SimpleForm","sap/ushell/resources","sap/ushell/ui/launchpad/ActionItem","sap/ushell/services/AppConfiguration","sap/m/Label","sap/m/Text","sap/ushell/utils/type","sap/base/Log","sap/base/util/isEmptyObject","sap/ui/core/library","sap/ui/layout/library"],function(B,D,O,V,S,r,A,a,L,T,t,b,i,c,l){"use strict";var d=l.form.SimpleFormLayout;var e=c.TitleLevel;var f=A.extend("sap.ushell.ui.footerbar.AboutButton",{metadata:{library:"sap.ushell"}});f.prototype.init=function(){if(A.prototype.init){A.prototype.init.apply(this,arguments);}this.setIcon("sap-icon://hint");this.setText(r.i18n.getText("about"));this.setTooltip(r.i18n.getText("about"));this.attachPress(this.showAboutDialog);this._translationBundle=r.i18n;};f.prototype.showAboutDialog=function(){var m=a.getMetadata(),o=sap.ushell.Container.getService("AppLifeCycle").getCurrentApplication(),p=sap.ushell.Container.getLogonSystem().getProductVersion(),C=this._getClientRoleDescription(),g=[new L({text:this._translationBundle.getText("technicalName")}),new T({text:m.technicalName||"",visible:!!m.technicalName}),new L({text:this._translationBundle.getText("fioriVersionFld")}),new T({text:m.version||"",visible:!!m.version}),new L({text:this._translationBundle.getText("sapui5Fld")}),new T({text:(sap.ui.version||"")+(" ("+(sap.ui.buildinfo.buildtime||"")+")")||""}),new L({text:this._translationBundle.getText("userAgentFld")}),new T({text:navigator.userAgent||""}),new L({text:this._translationBundle.getText("productVersionFld"),visible:!!p}),new T({text:p||"",visible:!!p}),new L({text:this._translationBundle.getText("clientRoleFld"),visible:!!C}),new T({text:C||"",visible:!!C})];var s=new S({id:"aboutDialogFormID",editable:false,layout:d.ResponsiveGridLayout,content:g}),h=new O({title:m.title,titleLevel:e.H3,icon:m.icon}).addStyleClass("sapUshellAboutDialogHeader"),j,v,k=new B({text:this._translationBundle.getText("okBtn"),press:function(){j.close();}});if(o){o.getTechnicalParameter("sap-fiori-id").then(function(F){if(t.isArray(F)&&F[0]){s.addContent(new L({text:this._translationBundle.getText("fioriAppId")}));s.addContent(new T({text:F[0]}));}}.bind(this),function(E){b.error("Cannot get technical parameter 'sap-fiori-id'",E,"sap.ushell.ui.footerbar.AboutButton");});o.getTechnicalParameter("sap-ach").then(function(n){if(t.isArray(n)&&n[0]){s.addContent(new L({text:this._translationBundle.getText("sapAch")}));s.addContent(new T({text:n[0]}));}}.bind(this),function(E){b.error("Cannot get technical parameter 'sap-ach'",E,"sap.ushell.ui.footerbar.AboutButton");});}if(i(m)||!m.icon){v=new V({items:[s]});}else{v=new V({items:[h,s]});}j=new D({id:"aboutContainerDialogID",title:this._translationBundle.getText("about"),contentWidth:"25rem",horizontalScrolling:false,leftButton:k,afterClose:function(){j.destroy();if(window.document.activeElement&&window.document.activeElement.tagName==="BODY"){window.document.getElementById("meAreaHeaderButton").focus();}}}).addStyleClass("sapContrastPlus");j.addContent(v);j.open();};f.prototype._getClientRoleDescription=function(){var C=sap.ushell.Container.getLogonSystem().getClientRole();var o={"P":"clientRoleProduction","T":"clientRoleTest","C":"clientRoleCustomizing","D":"clientRoleDemonstration","E":"clientRoleTraining","S":"clientRoleSAPReference"};return this._translationBundle.getText(o[C]);};return f;});
