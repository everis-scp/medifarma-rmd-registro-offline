/*!
 * OpenUI5
 * (c) Copyright 2009-2021 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./CountMode","./ODataContextBinding","./ODataListBinding","./ODataMetadata","./ODataPropertyBinding","./ODataTreeBinding","./ODataUtils","sap/base/assert","sap/base/Log","sap/base/security/encodeURL","sap/base/util/each","sap/base/util/extend","sap/base/util/isEmptyObject","sap/base/util/isPlainObject","sap/base/util/merge","sap/base/util/uid","sap/ui/model/BindingMode","sap/ui/model/Context","sap/ui/model/FilterProcessor","sap/ui/model/Model","sap/ui/model/odata/ODataMetaModel","sap/ui/thirdparty/datajs","sap/ui/thirdparty/URI"],function(C,O,a,b,c,d,e,f,L,g,h,m,n,o,p,u,B,q,F,M,r,s,U){"use strict";var t=M.extend("sap.ui.model.odata.ODataModel",{constructor:function(S,j,i,P,H,T,w,l){M.apply(this,arguments);var k,R,v,A=null,x,y,D,z,E,G,I=this;if(typeof(S)==="object"){j=S;S=j.serviceUrl;}if(typeof j==="object"){i=j.user;P=j.password;H=j.headers;T=j.tokenHandling;l=j.loadMetadataAsync;w=j.withCredentials;v=j.maxDataServiceVersion;k=j.useBatch;R=j.refreshAfterChange;A=j.annotationURI;x=j.loadAnnotationsJoined;D=j.defaultCountMode;y=j.metadataNamespaces;z=j.serviceUrlParams;E=j.metadataUrlParams;G=j.skipMetadataAnnotationParsing;j=j.json;}this.oServiceData={};this.sDefaultBindingMode=B.OneWay;this.mSupportedBindingModes={"OneWay":true,"OneTime":true,"TwoWay":true};this.mUnsupportedFilterOperators={"Any":true,"All":true};this.bCountSupported=true;this.bJSON=j;this.bCache=true;this.aPendingRequestHandles=[];this.oRequestQueue={};this.aBatchOperations=[];this.oHandler;this.bTokenHandling=T!==false;this.bWithCredentials=w===true;this.bUseBatch=k===true;this.bRefreshAfterChange=R!==false;this.sMaxDataServiceVersion=v;this.bLoadMetadataAsync=!!l;this.bLoadAnnotationsJoined=x===undefined?true:x;this.sAnnotationURI=A;this.sDefaultCountMode=D||C.Both;this.oMetadataLoadEvent=null;this.oMetadataFailedEvent=null;this.bSkipMetadataAnnotationParsing=G;this.oHeaders={};this.setHeaders(H);this.oData={};this.oMetadata=null;this.oAnnotations=null;this.aUrlParams=[];if(S.indexOf("?")==-1){this.sServiceUrl=S;}else{var J=S.split("?");this.sServiceUrl=J[0];if(J[1]){this.aUrlParams.push(J[1]);}}if(sap.ui.getCore().getConfiguration().getStatistics()){this.aUrlParams.push("sap-statistics=true");}this.sServiceUrl=this.sServiceUrl.replace(/\/$/,"");var K=this._createRequestUrl("$metadata",undefined,E);if(!t.mServiceData[K]){t.mServiceData[K]={};}this.oServiceData=t.mServiceData[K];if(this.bTokenHandling&&this.oServiceData.securityToken){this.oHeaders["x-csrf-token"]=this.oServiceData.securityToken;}this.sUser=i;this.sPassword=P;this.oHeaders["Accept-Language"]=sap.ui.getCore().getConfiguration().getLanguageTag();if(!this.oServiceData.oMetadata){this.oServiceData.oMetadata=new b(K,{async:this.bLoadMetadataAsync,user:this.sUser,password:this.sPassword,headers:this.mCustomHeaders,namespaces:y,withCredentials:this.bWithCredentials});}this.oMetadata=this.oServiceData.oMetadata;this.pAnnotationsLoaded=this.oMetadata.loaded();if(this.sAnnotationURI||!this.bSkipMetadataAnnotationParsing){var N=this._getAnnotationParser();if(!this.bSkipMetadataAnnotationParsing){if(!this.bLoadMetadataAsync){this.addAnnotationXML(this.oMetadata.sMetadataBody,!!this.sAnnotationURI);}else{this.pAnnotationsLoaded=this.oMetadata.loaded().then(function(Q,V){if(this.bDestroyed){return Promise.reject();}return this.addAnnotationXML(V["metadataString"],Q);}.bind(this,!!this.sAnnotationURI));}}if(this.sAnnotationURI){if(this.bLoadMetadataAsync){this.pAnnotationsLoaded=this.pAnnotationsLoaded.then(N.addUrl.bind(N,this.sAnnotationURI));}else{this.pAnnotationsLoaded=Promise.all([this.pAnnotationsLoaded,N.addUrl(this.sAnnotationURI)]);}}}if(z){this.aUrlParams=this.aUrlParams.concat(e._createUrlParamsArray(z));}this.onMetadataLoaded=function(Q){I._initializeMetadata();I.initialize();};this.onMetadataFailed=function(Q){I.fireMetadataFailed(Q.getParameters());};if(!this.oMetadata.isLoaded()){this.oMetadata.attachLoaded(this.onMetadataLoaded);this.oMetadata.attachFailed(this.onMetadataFailed);}if(this.oMetadata.isFailed()){this.refreshMetadata();}if(this.oMetadata.isLoaded()){this._initializeMetadata(true);}if(this.bJSON){if(this.sMaxDataServiceVersion==="3.0"){this.oHeaders["Accept"]="application/json;odata=fullmetadata";}else{this.oHeaders["Accept"]="application/json";}this.oHandler=s.jsonHandler;}else{this.oHeaders["Accept"]="application/atom+xml,application/atomsvc+xml,application/xml";this.oHandler=s.atomHandler;}this.oHeaders["MaxDataServiceVersion"]="2.0";if(this.sMaxDataServiceVersion){this.oHeaders["MaxDataServiceVersion"]=this.sMaxDataServiceVersion;}this.oHeaders["DataServiceVersion"]="2.0";},metadata:{publicMethods:["create","remove","update","submitChanges","getServiceMetadata","read","hasPendingChanges","refresh","refreshMetadata","resetChanges","isCountSupported","setCountSupported","setDefaultCountMode","getDefaultCountMode","forceNoCache","setProperty","getSecurityToken","refreshSecurityToken","setHeaders","getHeaders","setUseBatch"]}});t.M_EVENTS={RejectChange:"rejectChange",MetadataLoaded:"metadataLoaded",MetadataFailed:"metadataFailed",AnnotationsLoaded:"annotationsLoaded",AnnotationsFailed:"annotationsFailed"};t.mServiceData={};t.prototype.fireRejectChange=function(P){this.fireEvent("rejectChange",P);return this;};t.prototype.attachRejectChange=function(D,i,l){this.attachEvent("rejectChange",D,i,l);return this;};t.prototype.detachRejectChange=function(i,l){this.detachEvent("rejectChange",i,l);return this;};t.prototype._initializeMetadata=function(D){var i=this;this.bUseBatch=this.bUseBatch||this.oMetadata.getUseBatch();var j=function(k){if(k){i.metadataLoadEvent=setTimeout(j.bind(i),0);}else{if(i.oMetadata){i.fireMetadataLoaded({metadata:i.oMetadata});L.debug("ODataModel fired metadataloaded");}}};if(this.sAnnotationURI&&this.bLoadAnnotationsJoined){if(this.oAnnotations&&(this.oAnnotations.bInitialized||this.oAnnotations.isFailed())){j(!this.bLoadMetadataAsync);}else{this.oAnnotations.attachEventOnce("loaded",function(){j(true);});}}else{j(D);}};t.prototype.fireAnnotationsLoaded=function(P){if(!this.bLoadMetadataAsync){setTimeout(this.fireEvent.bind(this,"annotationsLoaded",P),0);}else{this.fireEvent("annotationsLoaded",P);}return this;};t.prototype.attachAnnotationsLoaded=function(D,i,l){this.attachEvent("annotationsLoaded",D,i,l);return this;};t.prototype.detachAnnotationsLoaded=function(i,l){this.detachEvent("annotationsLoaded",i,l);return this;};t.prototype.fireAnnotationsFailed=function(P){if(!this.bLoadMetadataAsync){setTimeout(this.fireEvent.bind(this,"annotationsFailed",P),0);}else{this.fireEvent("annotationsFailed",P);}L.debug("ODataModel fired annotationsFailed");return this;};t.prototype.attachAnnotationsFailed=function(D,i,l){this.attachEvent("annotationsFailed",D,i,l);return this;};t.prototype.detachAnnotationsFailed=function(i,l){this.detachEvent("annotationsFailed",i,l);return this;};t.prototype.fireMetadataLoaded=function(P){this.fireEvent("metadataLoaded",P);return this;};t.prototype.attachMetadataLoaded=function(D,i,l){this.attachEvent("metadataLoaded",D,i,l);return this;};t.prototype.detachMetadataLoaded=function(i,l){this.detachEvent("metadataLoaded",i,l);return this;};t.prototype.fireMetadataFailed=function(P){this.fireEvent("metadataFailed",P);return this;};t.prototype.attachMetadataFailed=function(D,i,l){this.attachEvent("metadataFailed",D,i,l);return this;};t.prototype.detachMetadataFailed=function(i,l){this.detachEvent("metadataFailed",i,l);return this;};t.prototype.refreshMetadata=function(){if(this.oMetadata&&this.oMetadata.refresh){this.oMetadata.refresh();}};t.prototype._createRequestUrl=function(P,i,j,k,l){var v,R,w,x="";if(P&&P.indexOf('?')!=-1){w=P.substr(P.indexOf('?')+1);P=P.substr(0,P.indexOf('?'));}R=this._normalizePath(P,i);if(!k){x=this.sServiceUrl+R;}else{x=R.substr(R.indexOf('/')+1);}v=e._createUrlParamsArray(j);if(this.aUrlParams){v=v.concat(this.aUrlParams);}if(w){v.push(w);}if(v.length>0){x+="?"+v.join("&");}if(l===undefined){l=true;}if(l===false){var y=Date.now();var z=x.replace(/([?&])_=[^&]*/,"$1_="+y);x=z+((z===x)?(/\?/.test(x)?"&":"?")+"_="+y:"");}return x;};t.prototype._loadData=function(P,i,S,E,j,H,k){var R,l,v=this;function _(D,A){var G=D,I={};if(A.statusCode==204){if(S){S(null);}if(k){k(null);}v.fireRequestCompleted({url:l.requestUri,type:"GET",async:l.async,info:"Accept headers:"+v.oHeaders["Accept"],infoObject:{acceptHeaders:v.oHeaders["Accept"]},success:true});return;}if(!G){L.fatal("The following problem occurred: No data was retrieved by service: "+A.requestUri);v.fireRequestCompleted({url:l.requestUri,type:"GET",async:l.async,info:"Accept headers:"+v.oHeaders["Accept"],infoObject:{acceptHeaders:v.oHeaders["Accept"]},success:false});return false;}if(v.bUseBatch){var J=v._getBatchErrors(D);if(J.length>0){w(J[0]);return false;}if(G.__batchResponses&&G.__batchResponses.length>0){G=G.__batchResponses[0].data;}else{L.fatal("The following problem occurred: No data was retrieved by service: "+A.requestUri);}}y=y.concat(G.results);if(G.__next){var K=new U(G.__next);l.requestUri=K.absoluteTo(A.requestUri).toString();x(l);}else{if(G.results){var V,N;for(N in y){V=y[N];if(y===V){continue;}G.results[N]=V;}}if(G.results&&!Array.isArray(G.results)){G=G.results;}v._importData(G,I);if(v.sChangeKey&&I){var Q=v.sChangeKey.substr(v.sChangeKey.lastIndexOf('/')+1);if(I[Q]){delete v.oRequestQueue[v.sChangeKey];v.sChangeKey=null;}}if(S){S(G);}v.checkUpdate(false,false,I);if(k){k(G);}v.fireRequestCompleted({url:l.requestUri,type:"GET",async:l.async,info:"Accept headers:"+v.oHeaders["Accept"],infoObject:{acceptHeaders:v.oHeaders["Accept"]},success:true});}}function w(A){if(v.bTokenHandling&&A.response){var T=v._getHeader("x-csrf-token",A.response.headers);if(!l.bTokenReset&&A.response.statusCode=='403'&&T&&T.toLowerCase()=="required"){v.resetSecurityToken();l.bTokenReset=true;x();return;}}var D=v._handleError(A);if(E){E(A,R&&R.bAborted);}v.fireRequestCompleted({url:l.requestUri,type:"GET",async:l.async,info:"Accept headers:"+v.oHeaders["Accept"],infoObject:{acceptHeaders:v.oHeaders["Accept"]},success:false,errorobject:D});if(!R||!R.bAborted){D.url=l.requestUri;v.fireRequestFailed(D);}}function x(){if(v.bUseBatch){v.updateSecurityToken();var A=U.parse(l.requestUri).query;var D=v._createRequestUrl(P,null,A,v.bUseBatch);l=v._createRequest(D,"GET",true);if(v.bTokenHandling){delete l.headers["x-csrf-token"];}var G=v._createBatchRequest([l],true);R=v._request(G,_,w,s.batchHandler,undefined,v.getServiceMetadata());}else{R=v._request(l,_,w,v.oHandler,undefined,v.getServiceMetadata());}if(H){var W={abort:function(){R.bAborted=true;R.abort();}};H(W);}}var y=[];var z=this._createRequestUrl(P,null,i,null,j||this.bCache);l=this._createRequest(z,"GET",true);if(v.bTokenHandling){delete l.headers["x-csrf-token"];}this.fireRequestSent({url:l.requestUri,type:"GET",async:l.async,info:"Accept headers:"+this.oHeaders["Accept"],infoObject:{acceptHeaders:this.oHeaders["Accept"]}});x();};t.prototype._importData=function(D,k){var j=this,l,K,R,E;if(D.results){l=[];h(D.results,function(i,v){l.push(j._importData(v,k));});return l;}else{K=this._getKey(D);E=this.oData[K];if(!E){E=D;this.oData[K]=E;}h(D,function(N,P){if(P&&(P.__metadata&&P.__metadata.uri||P.results)&&!P.__deferred){R=j._importData(P,k);if(Array.isArray(R)){E[N]={__list:R};}else{E[N]={__ref:R};}}else if(!P||!P.__deferred){E[N]=P;}});k[K]=true;return K;}};t.prototype._removeReferences=function(D){var j=this,l;if(D.results){l=[];h(D.results,function(i,k){l.push(j._removeReferences(k));});return l;}else{h(D,function(P,i){if(i){if(i["__ref"]||i["__list"]){delete D[P];}}});return D;}};t.prototype._restoreReferences=function(D){var k=this,l,R=[];if(D.results){l=[];h(D.results,function(i,j){l.push(k._restoreReferences(j));});return l;}else{h(D,function(P,i){if(i&&i["__ref"]){var v=k._getObject("/"+i["__ref"]);f(v,"ODataModel inconsistent: "+i["__ref"]+" not found!");if(v){delete i["__ref"];D[P]=v;k._restoreReferences(v);}}else if(i&&i["__list"]){h(i["__list"],function(j,E){var v=k._getObject("/"+i["__list"][j]);f(v,"ODataModel inconsistent: "+i["__list"][j]+" not found!");if(v){R.push(v);k._restoreReferences(v);}});delete i["__list"];i.results=R;R=[];}});return D;}};t.prototype.removeData=function(){this.oData={};};t.prototype.initialize=function(){var i=this.getBindings();h(i,function(I,j){j.initialize();});};t.prototype.refresh=function(i,R){if(R){this.removeData();}this._refresh(i);};t.prototype._refresh=function(i,j,E){var k=this.getBindings();h(k,function(I,l){l.refresh(i,j,E);});};t.prototype.checkUpdate=function(i,A,j,k){if(A){if(!this.sUpdateTimer){this.sUpdateTimer=setTimeout(function(){this.checkUpdate(i,false,j);}.bind(this),0);}return;}if(this.sUpdateTimer){clearTimeout(this.sUpdateTimer);this.sUpdateTimer=null;}var l=this.getBindings();h(l,function(I,v){if(!k||this.isMetaModelPath(v.getPath())){v.checkUpdate(i,j);}}.bind(this));};t.prototype.bindProperty=function(P,i,j){var k=new c(this,P,i,j);return k;};t.prototype.bindList=function(P,i,S,j,k){var l=new a(this,P,i,S,j,k);return l;};t.prototype.bindTree=function(P,i,j,k){var l=new d(this,P,i,j,k);return l;};t.prototype.createBindingContext=function(P,i,j,k,R){var R=!!R,l=this.resolve(P,i);if(typeof i=="function"){k=i;i=null;}if(typeof j=="function"){k=j;j=null;}if(!l){if(k){k(null);}return null;}var D=this._getObject(P,i),K,N,v=this;if(!R){R=this._isReloadNeeded(l,D,j);}if(!R){K=this._getKey(D);N=this.getContext('/'+K);if(k){k(N);}return N;}if(k){var I=!P.startsWith("/");if(l){var w=[],x=this.createCustomParams(j);if(x){w.push(x);}this._loadData(l,w,function(D){K=D?v._getKey(D):undefined;if(K&&i&&I){var y=i.getPath();y=y.substr(1);if(v.oData[y]){v.oData[y][P]={__ref:K};}}N=v.getContext('/'+K);k(N);},function(){k(null);});}else{k(null);}}};t.prototype._isReloadNeeded=function(j,D,P){var N,k=[],S,l=[];if(!j){return false;}if(!D){return true;}if(P&&P["expand"]){N=P["expand"].replace(/\s/g,"");k=N.split(',');}if(k){for(var i=0;i<k.length;i++){var v=k[i].indexOf("/");if(v!==-1){var w=k[i].slice(0,v);var x=k[i].slice(v+1);k[i]=[w,x];}}}for(var i=0;i<k.length;i++){var y=k[i];if(Array.isArray(y)){var z=D[y[0]];var A=y[1];if(!z||(z&&z.__deferred)){return true;}else{if(z){if(z.__list&&z.__list.length>0){for(var E=0;E<z.__list.length;E++){var G="/"+z.__list[E];var H=this.getObject(G);var R=this._isReloadNeeded(G,H,{expand:A});if(R){return true;}}}else if(z.__ref){var G="/"+z.__ref;var H=this.getObject(G);var R=this._isReloadNeeded(G,H,{expand:A});if(R){return true;}}}}}else{if(D[y]===undefined||(D[y]&&D[y].__deferred)){return true;}}}if(P&&P["select"]){S=P["select"].replace(/\s/g,"");l=S.split(',');}for(var i=0;i<l.length;i++){if(D[l[i]]===undefined){return true;}}if(l.length==0){var I=this.oMetadata._getEntityTypeByPath(j);if(!I){return false;}else{for(var i=0;i<I.property.length;i++){if(D[I.property[i].name]===undefined){return true;}}}}return false;};t.prototype.destroyBindingContext=function(i){};t.prototype.createCustomParams=function(P){var i=[],j,S={expand:true,select:true};for(var N in P){if(N in S){i.push("$"+N+"="+g(P[N]));}if(N=="custom"){j=P[N];for(var N in j){if(N.indexOf("$")==0){L.warning("Trying to set OData parameter "+N+" as custom query option!");}else{i.push(N+"="+g(j[N]));}}}}return i.join("&");};t.prototype.bindContext=function(P,i,j){var k=new O(this,P,i,j);return k;};t.prototype.setCountSupported=function(i){this.bCountSupported=i;};t.prototype.isCountSupported=function(){return this.bCountSupported;};t.prototype.setDefaultCountMode=function(i){this.sDefaultCountMode=i;};t.prototype.getDefaultCountMode=function(){return this.sDefaultCountMode;};t.prototype._getKey=function(i,D){var k,j;if(i instanceof q){k=i.getPath().substr(1);}else if(i&&i.__metadata&&i.__metadata.uri){j=i.__metadata.uri;k=j.substr(j.lastIndexOf("/")+1);}if(D){k=decodeURIComponent(k);}return k;};t.prototype.getKey=function(i,D){return this._getKey(i,D);};t.prototype.createKey=function(j,k,D){var E=this.oMetadata._getEntityTypeByPath(j),K=j,l=this,N,v,P;f(E,"Could not find entity type of collection \""+j+"\" in service metadata!");K+="(";if(E.key.propertyRef.length==1){N=E.key.propertyRef[0].name;f(N in k,"Key property \""+N+"\" is missing in object!");P=this.oMetadata._getPropertyMetadata(E,N);v=e.formatValue(k[N],P.type);K+=D?v:encodeURIComponent(v);}else{h(E.key.propertyRef,function(i,w){if(i>0){K+=",";}N=w.name;f(N in k,"Key property \""+N+"\" is missing in object!");P=l.oMetadata._getPropertyMetadata(E,N);v=e.formatValue(k[N],P.type);K+=N;K+="=";K+=D?v:encodeURIComponent(v);});}K+=")";return K;};t.prototype.getProperty=function(P,i,I){var v=this._getObject(P,i);if(I==null||I==undefined){return v;}if(!o(v)){return v;}v=p({},v);if(I==true){return this._restoreReferences(v);}else{return this._removeReferences(v);}};t.prototype._getObject=function(P,i){var N=this.isLegacySyntax()?this.oData:null,R=this.resolve(P,i),S,D,j,k,K,l;if(this.oMetadata&&R&&R.indexOf('/#')>-1){if(this.isMetaModelPath(R)){S=R.indexOf('/##');l=this.getMetaModel();if(!this.bMetaModelLoaded){return null;}D=R.substr(0,S);j=R.substr(S+3);k=l.getMetaContext(D);N=l.getProperty(j,k);}else{N=this.oMetadata._getAnnotation(R);}}else{if(i){K=i.getPath();K=K.substr(1);N=this.oData[K];}if(!P){return N;}var v=P.split("/"),I=0;if(!v[0]){N=this.oData;I++;}while(N&&v[I]){N=N[v[I]];if(N){if(N.__ref){N=this.oData[N.__ref];}else if(N.__list){N=N.__list;}else if(N.__deferred){N=undefined;}}I++;}}return N;};t.prototype.updateSecurityToken=function(){if(this.bTokenHandling){if(!this.oServiceData.securityToken){this.refreshSecurityToken();}if(this.bTokenHandling){this.oHeaders["x-csrf-token"]=this.oServiceData.securityToken;}}};t.prototype.resetSecurityToken=function(){delete this.oServiceData.securityToken;delete this.oHeaders["x-csrf-token"];};t.prototype.getSecurityToken=function(){var T=this.oServiceData.securityToken;if(!T){this.refreshSecurityToken();T=this.oServiceData.securityToken;}return T;};t.prototype.refreshSecurityToken=function(S,E,A){var i=this,j,T;A=A===true;j=this._createRequestUrl("/");var R=this._createRequest(j,"GET",A);R.headers["x-csrf-token"]="Fetch";function _(D,l){if(l){T=i._getHeader("x-csrf-token",l.headers);if(T){i.oServiceData.securityToken=T;i.oHeaders["x-csrf-token"]=T;}else{i.resetSecurityToken();i.bTokenHandling=false;}}if(S){S(D,l);}}function k(l){i.resetSecurityToken();i.bTokenHandling=false;i._handleError(l);if(E){E(l);}}return this._request(R,_,k,undefined,undefined,this.getServiceMetadata());};t.prototype._submitRequest=function(R,i,S,E,H,I){var j=this,k,l={};function _(D,x){if(i&&H){var y=j._getBatchErrors(D);if(y.length>0){v(y[0]);return false;}if(D.__batchResponses&&D.__batchResponses.length>0){k=D.__batchResponses[0].data;if(!k&&D.__batchResponses[0].__changeResponses){k=D.__batchResponses[0].__changeResponses[0].data;}}D=k;}if(I){if(D&&D.__batchResponses){h(D.__batchResponses,function(z,x){if(x&&x.data){j._importData(x.data,l);}});}}j._handleETag(R,x,i);j._updateRequestQueue(R,i);if(j._isRefreshNeeded(R,x)){j._refresh(false,R.keys,R.entityTypes);}if(S){S(D,x);}}function v(x){if(j.bTokenHandling&&x.response){var T=j._getHeader("x-csrf-token",x.response.headers);if(!R.bTokenReset&&x.response.statusCode=='403'&&T&&T.toLowerCase()=="required"){j.resetSecurityToken();R.bTokenReset=true;w();return;}}j._handleError(x);if(E){E(x);}}function w(){if(j.bTokenHandling){delete R.headers["x-csrf-token"];}if(j.bTokenHandling&&R.method!=="GET"){j.updateSecurityToken();if(j.bTokenHandling){R.headers["x-csrf-token"]=j.oServiceData.securityToken;}}if(i){return j._request(R,_,v,s.batchHandler,undefined,j.getServiceMetadata());}else{return j._request(R,_,v,j.oHandler,undefined,j.getServiceMetadata());}}return w();};t.prototype._createBatchRequest=function(v,A){var w,R,x={},P={},K={},E={};P.__batchRequests=v;w=this.sServiceUrl+"/$batch";if(this.aUrlParams.length>0){w+="?"+this.aUrlParams.join("&");}m(x,this.mCustomHeaders,this.oHeaders);delete x["Content-Type"];R={headers:x,requestUri:w,method:"POST",data:P,user:this.sUser,password:this.sPassword,async:A};if(A){R.withCredentials=this.bWithCredentials;}h(v,function(i,y){if(y["__changeRequests"]){h(y["__changeRequests"],function(j,z){if(z.keys&&z.method!="POST"){h(z.keys,function(k,l){K[k]=l;});}else if(z.entityTypes&&z.method=="POST"){h(z.entityTypes,function(l,k){E[l]=k;});}});}});R.keys=K;R.entityTypes=E;return R;};t.prototype._handleETag=function(R,k,l){var v,E,w,x,y,z;if(l){y=R.data.__batchRequests;z=k.data.__batchResponses;if(z&&y){for(var i=0;i<y.length;i++){w=y[i].__changeRequests;if(z[i]){x=z[i].__changeResponses;if(w&&x){for(var j=0;j<w.length;j++){if(w[j].method=="MERGE"||w[j].method=="PUT"){v=w[j].requestUri.replace(this.sServiceUrl+'/','');if(!v.startsWith("/")){v="/"+v;}E=this._getObject(v);if(E&&E.__metadata&&x[j].headers&&x[j].headers.ETag){E.__metadata.etag=x[j].headers.ETag;}}}}}else{L.warning("could not update ETags for batch request: corresponding response for request missing");}}}else{L.warning("could not update ETags for batch request: no batch responses/requests available");}}else{v=R.requestUri.replace(this.sServiceUrl+'/','');if(!v.startsWith("/")){v="/"+v;}E=this._getObject(v);if(E&&E.__metadata&&k.headers.ETag){E.__metadata.etag=k.headers.ETag;}}};t.prototype._handleBatchErrors=function(R,D){this._getBatchErrors(D);this._handleETag();};t.prototype._getBatchErrors=function(D){var E=[],i;h(D.__batchResponses,function(I,j){if(j.message){i="The following problem occurred: "+j.message;if(j.response){i+=j.response.statusCode+","+j.response.statusText+","+j.response.body;}E.push(j);L.fatal(i);}if(j.__changeResponses){h(j.__changeResponses,function(I,k){if(k.message){i="The following problem occurred: "+k.message;if(k.response){i+=k.response.statusCode+","+k.response.statusText+","+k.response.body;}E.push(k);L.fatal(i);}});}});return E;};t.prototype._handleError=function(E){var P={},T;var i="The following problem occurred: "+E.message;P.message=E.message;if(E.response){if(this.bTokenHandling){T=this._getHeader("x-csrf-token",E.response.headers);if(E.response.statusCode=='403'&&T&&T.toLowerCase()=="required"){this.resetSecurityToken();}}i+=E.response.statusCode+","+E.response.statusText+","+E.response.body;P.statusCode=E.response.statusCode;P.statusText=E.response.statusText;P.responseText=E.response.body;}L.fatal(i);return P;};t.prototype.getData=function(P,i,I){return this.getProperty(P,i,I);};t.prototype._getETag=function(P,i,E){var j,k,I;if(E){j=E;}else{if(i&&i.__metadata){j=i.__metadata.etag;}else if(P){k=P.replace(this.sServiceUrl+'/','');I=k.indexOf("?");if(I>-1){k=k.substr(0,I);}if(this.oData.hasOwnProperty(k)){j=this.getProperty('/'+k+'/__metadata/etag');}}}return j;};t.prototype._createRequest=function(i,j,A,P,E){var k={},l;m(k,this.mCustomHeaders,this.oHeaders);l=this._getETag(i,P,E);if(l&&j!="GET"){k["If-Match"]=l;}if(this.bJSON&&j!="DELETE"&&this.sMaxDataServiceVersion==="2.0"){k["Content-Type"]="application/json";}if(j=="MERGE"&&!this.bUseBatch){k["x-http-method"]="MERGE";j="POST";}var R={headers:k,requestUri:i,method:j,user:this.sUser,password:this.sPassword,async:A};if(P){R.data=P;}if(A){R.withCredentials=this.bWithCredentials;}return R;};t.prototype._isRefreshNeeded=function(R,i){var j=false,E,k=[],l=this;if(!this.bRefreshAfterChange){return j;}if(R.data&&Array.isArray(R.data.__batchRequests)){if(i){k=l._getBatchErrors(i.data);h(k,function(I,v){if(v.response&&v.response.statusCode=="412"){E=v.response.statusCode;return false;}});if(E){return false;}}h(R.data.__batchRequests,function(I,v){if(Array.isArray(v.__changeRequests)){h(v.__changeRequests,function(I,w){j=j||l._isRefreshNeeded(w);return!j;});}return!j;});}else{if(R.method==="GET"){return false;}else{if(i&&i.statusCode=="412"){j=false;}else{j=true;}}}return j;};t.prototype.update=function(P,D,i){var S,E,j,R,k,l,v,w,x,y,K,z,A=false;if(i instanceof q||arguments.length>3){l=i;S=arguments[3];E=arguments[4];j=arguments[5];}else{l=i.context||i.oContext;S=i.success||i.fnSuccess;E=i.error||i.fnError;v=i.eTag||i.sETag;j=typeof(i.merge)=="undefined"?i.bMerge===true:i.merge===true;A=typeof(i.async)=="undefined"?i.bAsync===true:i.async===true;z=i.urlParameters;}k=this._createRequestUrl(P,l,z,this.bUseBatch);if(j){R=this._createRequest(k,"MERGE",A,D,v);}else{R=this._createRequest(k,"PUT",A,D,v);}P=this._normalizePath(P,l);y=this._getObject(P);R.keys={};if(y){K=this._getKey(y);R.keys[K]=true;}if(this.bUseBatch){x=this._createBatchRequest([{__changeRequests:[R]}],A);w=this._submitRequest(x,this.bUseBatch,S,E,true);}else{w=this._submitRequest(R,this.bUseBatch,S,E);}return w;};t.prototype.create=function(P,D,i){var R,j,k,l,E,v,S,w,A=false,x;if(i&&typeof(i)=="object"&&!(i instanceof q)){v=i.context;S=i.success;x=i.urlParameters;w=i.error;A=i.async===true;}else{v=i;S=arguments[3];w=arguments[4];}k=this._createRequestUrl(P,v,x,this.bUseBatch);R=this._createRequest(k,"POST",A,D);P=this._normalizePath(P,v);E=this.oMetadata._getEntityTypeByPath(P);R.entityTypes={};if(E){R.entityTypes[E.entityType]=true;}if(this.bUseBatch){j=this._createBatchRequest([{__changeRequests:[R]}],A);l=this._submitRequest(j,this.bUseBatch,S,w,true);}else{l=this._submitRequest(R,this.bUseBatch,S,w);}return l;};t.prototype.remove=function(P,i){var j,E,S,k,l,R,v,w,K,x,_,y,z,A,D=false,G=this;if((i instanceof q)||arguments[2]){j=i;k=arguments[2];l=arguments[3];}else if(i){j=i.context||i.oContext;k=i.success||i.fnSuccess;l=i.error||i.fnError;w=i.eTag||i.sETag;x=i.payload||i.oPayload;D=typeof(i.async)=="undefined"?i.bAsync===true:i.async===true;A=i.urlParameters;}_=function(H,I){E=v.substr(v.lastIndexOf('/')+1);if(E.indexOf('?')!=-1){E=E.substr(0,E.indexOf('?'));}delete G.oData[E];delete G.mContexts["/"+E];if(k){k(H,I);}};v=this._createRequestUrl(P,j,A,this.bUseBatch);R=this._createRequest(v,"DELETE",D,x,w);P=this._normalizePath(P,j);S=this._getObject(P);R.keys={};if(S){K=this._getKey(S);R.keys[K]=true;}if(this.bUseBatch){y=this._createBatchRequest([{__changeRequests:[R]}],D);z=this._submitRequest(y,this.bUseBatch,_,l,true);}else{z=this._submitRequest(R,this.bUseBatch,_,l);}return z;};t.prototype.callFunction=function(i,P){var R,j,k,l,v,w,x,S,E,A,y="GET",z={},D=this;if(P&&typeof(P)=="object"){y=P.method?P.method:y;w=P.urlParameters;x=P.context;S=P.success;E=P.error;A=P.async===true;}else{y=P;w=arguments[2];x=arguments[3];S=arguments[4];E=arguments[5];A=arguments[6]===true;}v=this.oMetadata._getFunctionImportMetadata(i,y);f(v,"Function "+i+" not found in the metadata !");if(v){k=this._createRequestUrl(i,x,null,this.bUseBatch);var G=U(k);if(v.parameter!=null){h(w,function(H,I){var J=v.parameter.filter(function(N){return N.name==H&&N.mode=="In";});if(J.length>0){var K=J[0];z[H]=e.formatValue(I,K.type);}else{L.warning("Parameter "+H+" is not defined for function call "+i+"!");}});}if(y==="GET"){return D.read(i,x,z,true,S,E);}else{h(z,function(H,I){G.addQuery(H,I);});R=this._createRequest(G.toString(),y,A);if(this.bUseBatch){j=this._createBatchRequest([{__changeRequests:[R]}],A);l=this._submitRequest(j,this.bUseBatch,S,E,true);}else{l=this._submitRequest(R,this.bUseBatch,S,E);}return l;}}};t.prototype.read=function(P,i){var R,j,k,l,v,w,A,S,E,x,y,z,D,G,H,I,J;if(i&&typeof(i)=="object"&&!(i instanceof q)){v=i.context;w=i.urlParameters;A=i.async!==false;S=i.success;E=i.error;x=i.filters;y=i.sorters;}else{v=i;w=arguments[2];A=arguments[3]!==false;S=arguments[4];E=arguments[5];}A=A!==false;J=e._createUrlParamsArray(w);D=e.createSortParams(y);if(D){J.push(D);}if(x&&!this.oMetadata){L.fatal("Tried to use filters in read method before metadata is available.");}else{I=this._normalizePath(P,v);H=this.oMetadata&&this.oMetadata._getEntityTypeByPath(I);G=F.groupFilters(x);z=e.createFilterParams(G,this.oMetadata,H);if(z){J.push(z);}}j=this._createRequestUrl(P,v,J,this.bUseBatch);R=this._createRequest(j,"GET",A);if(this.bUseBatch){l=this._createBatchRequest([R],A);k=this._submitRequest(l,this.bUseBatch,S,E,true);}else{k=this._submitRequest(R,this.bUseBatch,S,E);}return k;};t.prototype.createBatchOperation=function(P,i,D,j){var k={},E,S,K,l;m(k,this.mCustomHeaders,this.oHeaders);if(P.startsWith("/")){P=P.substr(1);}if(j){E=j.sETag;}if(i!="GET"){E=this._getETag(P,D,E);if(E){k["If-Match"]=E;}}if(this.bJSON){if(i!="DELETE"&&i!="GET"&&this.sMaxDataServiceVersion==="2.0"){k["Content-Type"]="application/json";}}else{k["Content-Type"]="application/atom+xml";}var R={requestUri:P,method:i.toUpperCase(),headers:k};if(D){R.data=D;}if(i!="GET"&&i!="POST"){if(P&&P.indexOf("/")!=0){P='/'+P;}S=this._getObject(P);if(S){K=this._getKey(S);R.keys={};R.keys[K]=true;}}else if(i=="POST"){var N=P;if(P.indexOf('?')!=-1){N=P.substr(0,P.indexOf('?'));}l=this.oMetadata._getEntityTypeByPath(N);if(l){R.entityTypes={};R.entityTypes[l.entityType]=true;}}return R;};t.prototype.addBatchReadOperations=function(R){if(!Array.isArray(R)||R.length<=0){L.warning("No array with batch operations provided!");return false;}var i=this;h(R,function(I,j){if(j.method!="GET"){L.warning("Batch operation should be a GET operation!");return false;}i.aBatchOperations.push(j);});};t.prototype.addBatchChangeOperations=function(i){if(!Array.isArray(i)||i.length<=0){return false;}h(i,function(I,j){if(j.method!="POST"&&j.method!="PUT"&&j.method!="MERGE"&&j.method!="DELETE"){L.warning("Batch operation should be a POST/PUT/MERGE/DELETE operation!");return false;}});this.aBatchOperations.push({__changeRequests:i});};t.prototype.clearBatch=function(){this.aBatchOperations=[];};t.prototype.submitBatch=function(S,E,A,i){var R,j,k=this;function _(D,w){if(S){S(D,w,k._getBatchErrors(D));}}if(!(typeof(S)=="function")){var l=A;var v=E;A=S;S=v;E=l;}A=A!==false;if(this.aBatchOperations.length<=0){L.warning("No batch operations in batch. No request will be triggered!");return false;}R=this._createBatchRequest(this.aBatchOperations,A);j=this._submitRequest(R,true,_,E,false,i);this.clearBatch();return j;};t.prototype.getServiceMetadata=function(){if(this.oMetadata&&this.oMetadata.isLoaded()){return this.oMetadata.getServiceMetadata();}};t.prototype.getServiceAnnotations=function(){if(this.oAnnotations&&this.oAnnotations.getAnnotationsData){return this.oAnnotations.getAnnotationsData();}};t.prototype.submitChanges=function(S,E,P){var R,i,j=this,k,l,T,v,w,K;if(this.sChangeKey){k=this.sChangeKey.replace(this.sServiceUrl,'');w=this._getObject(k);i=w;if(o(w)){i=p({},w);if(i.__metadata){T=i.__metadata.type;v=i.__metadata.etag;delete i.__metadata;if(T||v){i.__metadata={};}if(T){i.__metadata.type=T;}if(v){i.__metadata.etag=v;}}h(i,function(z,A){if(A&&A.__deferred){delete i[z];}});var x=this.oMetadata._getEntityTypeByPath(k);if(x){var N=this.oMetadata._getNavigationPropertyNames(x);h(N,function(I,z){delete i[z];});}i=this._removeReferences(i);}if(P&&P.sETag){l=P.sETag;}R=this._createRequest(this.sChangeKey,"MERGE",true,i,l);if(this.sUrlParams){R.requestUri+="?"+this.sUrlParams;}R.keys={};if(w){K=this._getKey(w);R.keys[K]=true;}this.oRequestQueue[this.sChangeKey]=R;}if(n(this.oRequestQueue)){return undefined;}if(this.bUseBatch){var y=[];h(this.oRequestQueue,function(K,z){delete z._oRef;var A=p({},z);z._oRef=A;A.requestUri=A.requestUri.replace(j.sServiceUrl+'/','');A.data._bCreate?delete A.data._bCreate:false;y.push(A);});R=this._createBatchRequest([{__changeRequests:y}],true);this._submitRequest(R,this.bUseBatch,S,E,true);}else{h(this.oRequestQueue,function(K,z){delete z._oRef;var A=p({},z);z._oRef=A;if(A.data&&A.data._bCreate){delete A.data._bCreate;}j._submitRequest(A,this.bUseBatch,S,E,true);});}return undefined;};t.prototype._updateRequestQueue=function(R,k){var l,v,w,x=this;if(k){l=R.data.__batchRequests;if(l){for(var i=0;i<l.length;i++){v=l[i].__changeRequests;if(v){for(var j=0;j<v.length;j++){w=v[j];h(this.oRequestQueue,function(K,y){if(y._oRef===w&&K!==x.sChangeKey){delete x.oRequestQueue[K];delete x.oData[K];delete x.mContexts["/"+K];}else if(x.sChangeKey&&K===x.sChangeKey){delete x.oRequestQueue[K];x.sChangeKey=null;}});}}}}}else{h(this.oRequestQueue,function(K,y){if(y._oRef===R&&K!==x.sChangeKey){delete x.oRequestQueue[K];delete x.oData[K];delete x.mContexts["/"+K];}else if(x.sChangeKey&&K===x.sChangeKey){delete x.oRequestQueue[K];x.sChangeKey=null;}});}};t.prototype.resetChanges=function(S,E){var P;if(this.sChangeKey){P=this.sChangeKey.replace(this.sServiceUrl,'');this._loadData(P,null,S,E);}};t.prototype.setProperty=function(P,v,j,A){var k,E={},D={},l=this._createRequestUrl(P,j),w=P.substring(0,P.lastIndexOf("/")),K,x,y={},z=false;if(!this.resolve(P,j)){return false;}l=l.replace(this.sServiceUrl+'/','');l=l.substring(0,l.indexOf("/"));l=this.sServiceUrl+'/'+l;k=P.substr(P.lastIndexOf("/")+1);D=this._getObject(w,j);if(!D){return false;}x=w.split("/");for(var i=x.length-1;i>=0;i--){E=this._getObject(x.join("/"),j);if(E){K=this._getKey(E);if(K){break;}}x.splice(i-1,1);}if(!K){K=this._getKey(j);}if(K){y[K]=true;}if(D._bCreate){D[k]=v;z=true;this.checkUpdate(false,A,y);}else{if(!this.sChangeKey){this.sChangeKey=l;}if(this.sChangeKey==l){D[k]=v;z=true;this.checkUpdate(false,A,y);}else{this.fireRejectChange({rejectedValue:v,oldValue:D[k]});}}return z;};t.prototype._isHeaderPrivate=function(H){switch(H.toLowerCase()){case"accept":case"accept-language":case"maxdataserviceversion":case"dataserviceversion":return true;case"x-csrf-token":return this.bTokenHandling;default:return false;}};t.prototype.setHeaders=function(H){var i={},j=this;if(H){h(H,function(k,l){if(j._isHeaderPrivate(k)){L.warning("Not allowed to modify private header: "+k);}else{i[k]=l;}});this.mCustomHeaders=i;}else{this.mCustomHeaders={};}if(this.oAnnotations){this.oAnnotations.setHeaders(this.mCustomHeaders);}};t.prototype.getHeaders=function(){return m({},this.mCustomHeaders,this.oHeaders);};t.prototype._getHeader=function(i,H){var j;for(j in H){if(j.toLowerCase()===i.toLowerCase()){return H[j];}}return null;};t.prototype.hasPendingChanges=function(){return this.sChangeKey!=null;};t.prototype.updateBindings=function(i){this.checkUpdate(i);};t.prototype.forceNoCache=function(i){this.bCache=!i;};t.prototype.setTokenHandlingEnabled=function(T){this.bTokenHandling=T;};t.prototype.setUseBatch=function(i){this.bUseBatch=i;};t.prototype.formatValue=function(v,T){return e.formatValue(v,T);};t.prototype.deleteCreatedEntry=function(i){if(i){var P=i.getPath();delete this.mContexts[P];if(P.startsWith("/")){P=P.substr(1);}delete this.oRequestQueue[P];delete this.oData[P];}};t.prototype.createEntry=function(P,v){var E={},k,j,R;if(!P.startsWith("/")){P="/"+P;}var l=this.oMetadata._getEntityTypeByPath(P);if(!l){f(l,"No Metadata for collection "+P+" found");return undefined;}if(typeof v==="object"&&!Array.isArray(v)){E=v;}else{for(var i=0;i<l.property.length;i++){var w=l.property[i];var x=v&&v.indexOf(w.name)>-1;if(!v||x){E[w.name]=this._createPropertyValue(w.type);if(x){v.splice(v.indexOf(w.name),1);}}}if(v){f(v.length===0,"No metadata for the following properties found: "+v.join(","));}}E._bCreate=true;k=P.substring(1)+"('"+u()+"')";this.oData[k]=E;E.__metadata={type:""+l.entityType};j=this._createRequestUrl(P);R=this._createRequest(j,"POST",true,E);R.entityTypes={};R.entityTypes[l.entityType]=true;this.oRequestQueue[k]=R;return this.getContext("/"+k);};t.prototype._createPropertyValue=function(T){var j=this.oMetadata._splitName(T);var N=j.namespace;var k=j.name;if(N.toUpperCase()!=='EDM'){var l={};var v=this.oMetadata._getObjectMetadata("complexType",k,N);f(v,"Complex type "+T+" not found in the metadata !");for(var i=0;i<v.property.length;i++){var P=v.property[i];l[P.name]=this._createPropertyValue(P.type);}return l;}else{return this._getDefaultPropertyValue(k,N);}};t.prototype._getDefaultPropertyValue=function(T,N){return undefined;};t.prototype._normalizePath=function(P,i){if(P&&P.indexOf('?')!=-1){P=P.substr(0,P.indexOf('?'));}if(!i&&!P.startsWith("/")){P='/'+P;L.warning(this+" path "+P+" should be absolute if no Context is set");}return this.resolve(P,i);};t.prototype.setRefreshAfterChange=function(R){this.bRefreshAfterChange=R;};t.prototype.isList=function(P,i){var P=this.resolve(P,i);return P&&P.substr(P.lastIndexOf("/")).indexOf("(")===-1;};t.prototype.isMetaModelPath=function(P){return P.indexOf("##")==0||P.indexOf("/##")>-1;};t.prototype._request=function(R,S,E,H,i,j){if(this.bDestroyed){return{abort:function(){}};}var k=this;function w(v){return function(){if(k.aPendingRequestHandles){var I=k.aPendingRequestHandles.indexOf(l);if(I>-1){k.aPendingRequestHandles.splice(I,1);}}if(!(l&&l.bSuppressErrorHandlerCall)){v.apply(this,arguments);}};}var l=s.request(R,w(S||s.defaultSuccess),w(E||s.defaultError),H,i,j);if(R.async!==false){this.aPendingRequestHandles.push(l);}return l;};t.prototype.destroy=function(){this.bDestroyed=true;if(this.aPendingRequestHandles){for(var i=this.aPendingRequestHandles.length-1;i>=0;i--){var R=this.aPendingRequestHandles[i];if(R&&R.abort){R.bSuppressErrorHandlerCall=true;R.abort();}}delete this.aPendingRequestHandles;}if(this.oMetadataLoadEvent){clearTimeout(this.oMetadataLoadEvent);}if(this.oMetadataFailedEvent){clearTimeout(this.oMetadataFailedEvent);}if(this.oMetadata){this.oMetadata.detachLoaded(this.onMetadataLoaded);this.oMetadata.detachFailed(this.onMetadataFailed);if(!this.oMetadata.isLoaded()&&!this.oMetadata.hasListeners("loaded")){this.oMetadata.destroy();delete this.oServiceData.oMetadata;}delete this.oMetadata;}if(this.oAnnotations){this.oAnnotations.detachFailed(this.onAnnotationsFailed);this.oAnnotations.detachLoaded(this.onAnnotationsLoaded);this.oAnnotations.destroy();delete this.oAnnotations;delete this.pAnnotationsLoaded;}M.prototype.destroy.apply(this,arguments);};t.prototype._getAnnotationParser=function(A){if(!this.oAnnotations){var i=sap.ui.requireSync("sap/ui/model/odata/ODataAnnotations");this.oAnnotations=new i({annotationData:A,url:null,metadata:this.oMetadata,async:this.bLoadMetadataAsync,headers:this.mCustomHeaders});this.oAnnotations.attachFailed(this.onAnnotationsFailed,this);this.oAnnotations.attachLoaded(this.onAnnotationsLoaded,this);}return this.oAnnotations;};t.prototype.onAnnotationsFailed=function(E){this.fireAnnotationsFailed(E.getParameters());};t.prototype.onAnnotationsLoaded=function(E){this.fireAnnotationsLoaded(E.getParameters());};t.prototype.addAnnotationUrl=function(v){var j=[].concat(v),k=[],A=[],E=[],l=this;h(j,function(i,w){var I=w.indexOf("$metadata");if(I>=0){if(I==0){w=l.sServiceUrl+'/'+w;}k.push(w);}else{A.push(w);}});return this.oMetadata._addUrl(k).then(function(P){return Promise.all(P.map(function(i){E=E.concat(i.entitySets);return l.addAnnotationXML(i["metadataString"]);}));}).then(function(){return l._getAnnotationParser().addUrl(A);}).then(function(P){return{annotations:P.annotations,entitySets:E};});};t.prototype.addAnnotationXML=function(x,S){return new Promise(function(i,j){this._getAnnotationParser().setXML(null,x,{success:i,error:j,fireEvents:!S});}.bind(this));};t.prototype.getMetaModel=function(){var i=this;if(!this.oMetaModel){this.oMetaModel=new r(this.oMetadata,this.oAnnotations,this);this.oMetaModel.loaded().then(function(){i.bMetaModelLoaded=true;i.checkUpdate(false,false,null,true);});}return this.oMetaModel;};t.prototype.annotationsLoaded=function(){return this.oMetadata.isLoaded()&&(!this.oAnnotations||this.oAnnotations.isLoaded())?null:this.pAnnotationsLoaded;};return t;});
