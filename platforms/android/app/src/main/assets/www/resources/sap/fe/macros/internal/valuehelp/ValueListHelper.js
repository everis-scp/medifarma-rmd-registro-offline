/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2021 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/ui/thirdparty/jquery","sap/ui/core/XMLTemplateProcessor","sap/ui/model/json/JSONModel","sap/ui/core/util/XMLPreprocessor","sap/ui/core/Fragment","sap/ui/mdc/field/InParameter","sap/ui/mdc/field/OutParameter","sap/base/Log","sap/ui/dom/units/Rem","sap/fe/core/BusyLocker","sap/fe/core/actions/messageHandling","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ui/model/FilterType","sap/fe/core/helpers/ModelHelper","sap/fe/core/CommonUtils"],function(q,X,J,a,F,I,O,L,R,B,m,b,c,d,M,C){"use strict";var w={};var e=[];var s=[];function _(v){return v.Parameters.some(function(p){return(p["@com.sap.vocabularies.UI.v1.Importance"]&&p["@com.sap.vocabularies.UI.v1.Importance"].$EnumMember==="com.sap.vocabularies.UI.v1.ImportanceType/High");});}function f(v){var o=v.valueListInfo.$model.getMetaModel().getObject("/"+v.valueListInfo.CollectionPath+"@")||{},S=o["@Org.OData.Capabilities.V1.SearchRestrictions"]&&o["@Org.OData.Capabilities.V1.SearchRestrictions"].Searchable;return S===undefined?true:S;}function g(v){return e.find(function(o){return o.sVHId===v;});}function h(v){return s.find(function(o){return o.sVHId===v;});}function i(v,o,p){var r=v.$model.getMetaModel(),P,D,t,u,x;var y=r.getObject("/"+v.CollectionPath+"/"+o.ValueListProperty+"@com.sap.vocabularies.UI.v1.Hidden")===true?false:true;var z=y&&!p&&_(v)&&o["@com.sap.vocabularies.UI.v1.Importance"]&&o["@com.sap.vocabularies.UI.v1.Importance"].$EnumMember==="com.sap.vocabularies.UI.v1.ImportanceType/High"?true:false;if(y){u=v.Parameters.filter(function(A){if(A.ValueListProperty!==o.ValueListProperty&&o.$Type!=="com.sap.vocabularies.Common.v1.ValueListParameterInOut"){P=r.getObject("/"+v.CollectionPath+"/"+A.ValueListProperty+"@");D=P&&P["@com.sap.vocabularies.Common.v1.Text"]&&P["@com.sap.vocabularies.Common.v1.Text"].$Path;}return D&&D===o.ValueListProperty;});u.forEach(function(A){if(A.ValueListProperty!==o.ValueListProperty){P=r.getObject("/"+v.CollectionPath+"/"+A.ValueListProperty+"@");if(p){if(P["@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement"]&&P["@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement"].$EnumMember==="com.sap.vocabularies.UI.v1.TextArrangementType/TextSeparate"){x=undefined;}else{x=r.getObject("/"+v.CollectionPath+"/"+A.ValueListProperty+"@com.sap.vocabularies.UI.v1.Hidden")!==true&&"{_VHUI>/hideColumn}";}}else{t=P["@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement"]&&P["@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement"].$EnumMember==="com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly";if(t){x=r.getObject("/"+v.CollectionPath+"/"+A.ValueListProperty+"@com.sap.vocabularies.UI.v1.Hidden")!==true&&"{_VHUI>/hideColumn}";}if(!A["@com.sap.vocabularies.UI.v1.Importance"]){if(!t){x=undefined;}else{x=z?"{_VHUI>/showColumnInTypeAhead}":"{_VHUI>/hideColumn}";}}}}});return x;}}function j(v){var S,o=v.$model.getMetaModel();v.Parameters.find(function(E){if(o.getObject("/"+v.CollectionPath+"/"+E.ValueListProperty+"@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement/$EnumMember")==="com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly"){S=o.getObject("/"+v.CollectionPath+"/"+E.ValueListProperty+"@com.sap.vocabularies.Common.v1.Text/$Path");}else{S=E.ValueListProperty;}return((E.$Type=="com.sap.vocabularies.Common.v1.ValueListParameterInOut"||E.$Type=="com.sap.vocabularies.Common.v1.ValueListParameterOut"||E.$Type=="com.sap.vocabularies.Common.v1.ValueListParameterDisplayOnly")&&!(o.getObject("/"+v.CollectionPath+"/"+E.ValueListProperty+"@com.sap.vocabularies.UI.v1.Hidden")===true));});return S;}function k(o){var v=o.getModel("viewData");if(v){var D=v.getData();if(D){var p=D.columns;if(p){return p.reduce(function(Q,P){if(P.path&&P.path.indexOf("/")===-1){Q=Q?Q+","+P.path:P.path;}return Q;},undefined);}}}return undefined;}function l(o,E,p){var P=p.split("/"),r,t="";while(P.length){var u=P.shift();r=r?r+"/"+u:u;var v=o.getObject(E+"/"+r);if(v&&v.$kind==="NavigationProperty"&&v.$isCollection){u+="*";}t=t?t+"/"+u:u;}return t;}function n(o,E){var p=[],S=o.getObject(E+"/@com.sap.vocabularies.UI.v1.SelectionFields");if(S){S.forEach(function(r){var t=E+"/"+r.$PropertyPath,u=l(o,E,r.$PropertyPath),P=o.getObject(t+"@"),v={path:u,label:P["@com.sap.vocabularies.Common.v1.Label"]||t,sortable:true,filterable:C.isPropertyFilterable(o,E,r.$PropertyPath,false),$Type:o.getObject(t).$Type};p.push(v);});}return p;}var V={initializeCachedValueHelp:function(){e.forEach(function(v){if(!v.oVHFilterBar.isDestroyed()){v.oVHFilterBar.destroy();}if(!v.oVHDialogTable.isDestroyed()){v.oVHDialogTable.destroy();}});e=[];s=[];},getColumnVisibility:function(v,o,S){var p=S&&!!S.valueHelpWithFixedValues,r=i(v,o,p);if(r){return r;}if(p||!_(v)){return undefined;}else if(o&&o["@com.sap.vocabularies.UI.v1.Importance"]&&o["@com.sap.vocabularies.UI.v1.Importance"].$EnumMember==="com.sap.vocabularies.UI.v1.ImportanceType/High"){return undefined;}else{return"{_VHUI>/showAllColumns}";}},getDialogTableColumnVisibility:function(v,o){var p=v.$model.getMetaModel(),P,D,r,t=false;var H=p.getObject("/"+v.CollectionPath+"/"+o.ValueListProperty+"@com.sap.vocabularies.UI.v1.Hidden")===true&&true;if(!H){r=v.Parameters.filter(function(u){if(u.ValueListProperty!==o.ValueListProperty&&o.$Type!=="com.sap.vocabularies.Common.v1.ValueListParameterInOut"){P=p.getObject("/"+v.CollectionPath+"/"+u.ValueListProperty+"@");D=P&&P["@com.sap.vocabularies.Common.v1.Text"]&&P["@com.sap.vocabularies.Common.v1.Text"].$Path;}return D&&D===o.ValueListProperty;});r.forEach(function(u){if(u.ValueListProperty!==o.ValueListProperty){P=p.getObject("/"+v.CollectionPath+"/"+u.ValueListProperty+"@");if(P["@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement"]&&P["@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement"].$EnumMember==="com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly"){t=p.getObject("/"+v.CollectionPath+"/"+u.ValueListProperty+"@com.sap.vocabularies.UI.v1.Hidden")!==true&&true;}}});}return H?false:!t;},getValueHelpTableSortConditions:function(v,S){var p=v.PresentationVariantQualifier===""?"":"#"+v.PresentationVariantQualifier,P="/"+v.CollectionPath+"/@com.sap.vocabularies.UI.v1.PresentationVariant"+p;var o=v.$model.getMetaModel().getObject(P);if(o&&o.SortOrder){var r={sorters:[]};if(S){o.SortOrder.forEach(function(u){var t={};t.path=u.Property.$PropertyPath;if(!!u.Descending){t.descending=true;}else{t.ascending=true;}r.sorters.push(t);});return"sorter: "+JSON.stringify(r.sorters);}else{o.SortOrder.forEach(function(u){var t={};t.name=u.Property.$PropertyPath;if(!!u.Descending){t.descending=true;}else{t.ascending=true;}r.sorters.push(t);});return JSON.stringify(r);}}else if(!S){var t={},r={sorters:[]};t.name=j(v);t.ascending=true;r.sorters.push(t);return JSON.stringify(r);}return undefined;},hasImportance:function(v){return _(v.getObject())?"Importance/High":"None";},getMinScreenWidth:function(v){return _(v)?"{= ${_VHUI>/minScreenWidth}}":"416px";},getTableItemsParameters:function(v,r,S,o){var p,P="";var t=v.Parameters.some(function(z){return S||z.$Type==="com.sap.vocabularies.Common.v1.ValueListParameterIn";});if(r){P=", parameters: {$$groupId: '"+r+"'";}var u=k(this);if(u){if(P.length>0){P=P+", '"+u+"'";}else{P=", parameters: {$select: '"+u+"'";}}if(P.length>0){P=P+" }";}var x=V.getValueHelpTableSortConditions(v,S);var y=o?", ":", length: 10, ";if(x){return("{path: '/"+v.CollectionPath+"'"+P+", suspended : "+t+y+x+"}");}else{p=j(v);return("{path: '/"+v.CollectionPath+"'"+P+", suspended : "+t+y+"sorter: {path: '"+p+"', ascending: true}}");}},getTableDelegate:function(v){return("{name: 'sap/fe/macros/internal/valuehelp/TableDelegate', payload: {collectionName: '"+v.CollectionPath+"'}}");},getPropertyPath:function(p){return!p.UnboundAction?p.EntityTypePath+"/"+p.Action+"/"+p.Property:"/"+p.Action.substring(p.Action.lastIndexOf(".")+1)+"/"+p.Property;},getWaitForPromise:function(){return w;},getValueListCollectionEntitySet:function(v){var o=v.getObject();return o.$model.getMetaModel().createBindingContext("/"+o.CollectionPath);},getValueListProperty:function(p){var v=p.getModel();var o=v.getObject("/");return o.$model.getMetaModel().createBindingContext("/"+o.CollectionPath+"/"+p.getObject());},getValueListInfo:function(o,p,r,t,P){var K,D,u="",v=p.getObject(r+"@sapui.name"),x,y=[],z=[],A="";return p.requestValueListInfo(r,true,o.getBindingContext()).then(function(E){var G=o.getInParameters().length+o.getOutParameters().length===0,H=o.getModel("_VHUI"),N=H.getProperty("/qualifierForValidation"),S=H.getProperty("/isSuggestion"),Q=H.getProperty("/hasValueListRelevantQualifiers"),T=o.getAggregation("collectiveSearchItems"),U=Object.keys(E),W=U.indexOf(""),Y=U[0],Z;if(W&&W>0){U.unshift(U[W]);U.splice(W+1,1);}if(Y===undefined){return o.getModel("_VHUI").setProperty("/noValidValueHelp",true);}if(Q||U.length>1||T.length>1){if(S&&U.indexOf(N)>-1){Z=N===""?o.getId()+"::non-qualifier":o.getId()+"::qualifier::"+N;H.setProperty("/valueHelpId",Z);H.setProperty("/collectiveSearchKey",N);E=E[N];o.setProperty("validateInput",true);}else{T.forEach(function(b1){if(!U.includes(b1.getKey())){o.removeAggregation("collectiveSearchItems",b1);}});if(U.length===1){o.removeAllAggregation("collectiveSearchItems");P.collectiveSearchKey=undefined;}else{U.forEach(function(b1){if(T.filter(function(c1){return c1.getKey()===b1;}).length===0){o.addAggregation("collectiveSearchItems",new sap.ui.core.Item({key:b1,text:E[b1].Label,enabled:true}));}});}if(P&&P.collectiveSearchKey!==undefined){Y=P.collectiveSearchKey;}else if(P&&P.collectiveSearchKey===undefined){Y=U[0];P.collectiveSearchKey=U[0];}Z=Y===""?o.getId()+"::non-qualifier":o.getId()+"::qualifier::"+Y;o.getModel("_VHUI").setProperty("/valueHelpId",Z);o.getModel("_VHUI").setProperty("/collectiveSearchKey",Y);E=E[Y];if(!o.getParent().isA("sap.ui.mdc.FilterBar")&&S&&N!==Y){o.setProperty("validateInput",false);}}}else{E=E[Y];}var p=E.$model.getMetaModel(),$="/"+E.CollectionPath,a1=n(p,$);E.Parameters.forEach(function(b1){x="/"+E.CollectionPath+"/"+b1.ValueListProperty;var c1=E.$model.getMetaModel().getObject(x),d1=E.$model.getMetaModel().getObject(x+"@")||{};if(c1){if(!K&&b1.$Type.indexOf("Out")>48&&b1.LocalDataProperty.$PropertyPath===v){A=x;K=b1.ValueListProperty;D=d1["@com.sap.vocabularies.Common.v1.Text"]&&d1["@com.sap.vocabularies.Common.v1.Text"].$Path;}if(!u&&c1.$Type==="Edm.String"&&!d1["@com.sap.vocabularies.UI.v1.HiddenFilter"]&&!d1["@com.sap.vocabularies.UI.v1.Hidden"]){u=u.length>0?u+","+b1.ValueListProperty:b1.ValueListProperty;}if(G&&b1.$Type!=="com.sap.vocabularies.Common.v1.ValueListParameterDisplayOnly"&&b1.$Type!=="com.sap.vocabularies.Common.v1.ValueListParameterConstant"&&b1.LocalDataProperty&&b1.LocalDataProperty.$PropertyPath!==v){var e1="";if(t&&t.length>0){if(o.getParent().isA("sap.ui.mdc.Table")&&o.getBindingContext()&&b1.$Type==="com.sap.vocabularies.Common.v1.ValueListParameterIn"){var f1=b1.LocalDataProperty.$PropertyPath.split("/");if(f1.length>1){var g1=f1[0];var h1=o.getModel().getMetaModel().getMetaContext(o.getBindingContext().getPath());var i1=o.getParent().getRowBinding().getPath();if(h1.getObject(i1+"/$Partner")===g1){e1="{"+b1.LocalDataProperty.$PropertyPath.replace(g1+"/","")+"}";}}}if(!e1){e1="{"+t+">/conditions/"+b1.LocalDataProperty.$PropertyPath+"}";}}else{e1="{"+b1.LocalDataProperty.$PropertyPath+"}";}if(b1.$Type.indexOf("Out")>48){if(!t||t.length===0){z.push(new O({value:e1,helpPath:b1.ValueListProperty}));}}if(b1.$Type.indexOf("In")>48){y.push(new I({value:e1,helpPath:b1.ValueListProperty,initialValueFilterEmpty:b1.InitialValueIsSignificant}));}}if(b1.$Type==="com.sap.vocabularies.Common.v1.ValueListParameterConstant"){y.push(new I({value:b1.Constant,helpPath:b1.ValueListProperty}));}var j1=b1.ValueListProperty,k1=d1["@com.sap.vocabularies.Common.v1.Label"]||j1,l1=c1.$Type;if(d1["@com.sap.vocabularies.Common.v1.Text"]&&d1["@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement"]&&d1["@com.sap.vocabularies.Common.v1.Text@com.sap.vocabularies.UI.v1.TextArrangement"].$EnumMember==="com.sap.vocabularies.UI.v1.TextArrangementType/TextOnly"){j1=d1["@com.sap.vocabularies.Common.v1.Text"].$Path;var m1="/"+E.CollectionPath+"/"+j1;l1=E.$model.getMetaModel().getObject(m1).$Type;}var n1=a1.findIndex(function(p1){return p1.path===j1;})===-1;if(n1){var o1={path:j1,label:k1,sortable:true,filterable:!d1["@com.sap.vocabularies.UI.v1.HiddenFilter"],$Type:l1};a1.push(o1);}}});return{keyValue:K,descriptionValue:D,fieldPropertyPath:A,filters:u,inParameters:y,outParameters:z,valueListInfo:E,columnDefs:a1};}).catch(function(E){var G=E.status&&E.status===404?"Metadata not found ("+E.status+") for value help of property "+r:E.message;L.error(G);o.destroyContent();});},_templateFragment:function(o,v,S,p){var r=X.loadTemplate(o,"fragment"),t=v.valueListInfo,u=new J(t),x=t.$model.getMetaModel(),y=new J({converterType:"ListReport",columns:v.columnDefs||null});return Promise.resolve(a.process(r,{name:o},{bindingContexts:{valueList:u.createBindingContext("/"),entityType:x.createBindingContext("/"+t.CollectionPath+"/"),source:S.createBindingContext("/")},models:{valueList:u,entityType:x,source:S,metaModel:x,viewData:y}})).then(function(r){var z={path:p,fragmentName:o,fragment:r};if(L.getLevel()===L.Level.DEBUG){V.ALLFRAGMENTS=V.ALLFRAGMENTS||[];V.ALLFRAGMENTS.push(z);}if(V.logFragment){setTimeout(function(){V.logFragment(z);},0);}return F.load({definition:r});});},createValueHelpDialog:function(p,o,t,r,v,S){var u=o.getMetadata().getName(),W=o.getDialogContent&&o.getDialogContent(),x=W&&W.getId(),y=v&&v.filters,z=o.getModel("_VHUI").getProperty("/valueHelpId"),A=this;if((!t||z!==undefined)&&u.indexOf("FieldValueHelp")>-1){o.setTitle(v.valueListInfo.Label);o.setKeyPath(v.keyValue);o.setDescriptionPath(v.descriptionValue);o.setFilterFields(f(v)?"$search":"");}var D=new J({id:z||o.getId(),groupId:o.data("requestGroupId")||undefined,bSuggestion:S,valueHelpWithFixedValues:o.getModel().getMetaModel().getObject(p+"@")["@com.sap.vocabularies.Common.v1.ValueListWithFixedValues"]});t=t||V._templateFragment("sap.fe.macros.internal.valuehelp.ValueListDialogTable",v,D,p);if(y.length){r=r||V._templateFragment("sap.fe.macros.internal.valuehelp.ValueListFilterBar",v,D,p);}else{r=Promise.resolve();}return Promise.all([t,r]).then(function(E){var z=o.getModel("_VHUI").getProperty("/valueHelpId"),T,t=E[0],r=E[1],G=r?r.getFilterItems():[];if(t){t.setModel(v.valueListInfo.$model);L.info("Value List - Dialog Table - XML content created ["+p+"]",t.getMetadata().getName(),"MDC Templating");}if(r&&G.length){r.setModel(v.valueListInfo.$model);L.info("Value List- Filterbar - XML content created ["+p+"]",r.getMetadata().getName(),"MDC Templating");}if((r&&r!==o.getFilterBar()&&G.length)||(r&&z!==undefined)){o.setFilterBar(r);}else{o.addDependent(r);}if(t!==W.getTable()||z!==undefined){W.setTable(t);if(r){t.setFilter(r.getId());}t.initialized();delete w[x];}T=A.getTableWidth(t,A._getWidthInRem(o._getField()));o.getModel("_VHUI").setProperty("/tableWidth",T);t.setWidth("100%");if(z!==undefined){var H=g(z);if(!H){e.push({sVHId:z,oVHDialogTable:t,oVHFilterBar:r});}else if(H&&H.oVHFilterBar===false){e[e.indexOf(H)].oVHFilterBar=r;}}});},createValueHelpSuggest:function(p,o,t,v,S){var W=o.getSuggestContent&&o.getSuggestContent(),r=W&&W.getId(),u=o.getMetadata().getName(),x=o.getModel("_VHUI").getProperty("/valueHelpId"),y=this;if((!t||x!==undefined)&&u.indexOf("FieldValueHelp")>-1){o.setTitle(v.valueListInfo.Label);o.setKeyPath(v.keyValue);o.setDescriptionPath(v.descriptionValue);o.setFilterFields(f(v)?"$search":"");}var z=new J({id:x||o.getId(),groupId:o.data("requestGroupId")||undefined,bSuggestion:S,valueHelpWithFixedValues:o.getModel().getMetaModel().getObject(p+"@")["@com.sap.vocabularies.Common.v1.ValueListWithFixedValues"]});t=t||V._templateFragment("sap.fe.macros.internal.valuehelp.ValueListTable",v,z,p);return Promise.all([t]).then(function(A){var T,t=A[0];if(t){t.setModel(v.valueListInfo.$model);var D=t.getBinding("items");D.attachEventOnce("dataRequested",function(){B.lock(t);});D.attachEvent("dataReceived",function(K){if(B.isLocked(t)){B.unlock(t);}if(K.getParameter("error")){setTimeout(m.showUnboundMessages,0);}});if(M.isDraftSupported(D.getModel().getMetaModel(),D.getPath())){D.filter(new b("IsActiveEntity",c.EQ,true),d.Control);}L.info("Value List- suggest Table XML content created ["+p+"]",t.getMetadata().getName(),"MDC Templating");}if(t!==W.getTable()||x!==undefined){W.setTable(t);t.attachEventOnce("updateFinished",function(){W.invalidate(t);});delete w[r];}var E=o.data("sourcePath")!==o.data("originalPropertyPath");var G=o._getField();if(G.isA("sap.ui.mdc.FilterField")||G.isA("sap.ui.mdc.Field")){T=y.getTableWidth(t,y._getWidthInRem(G,E));o.getModel("_VHUI").setProperty("/tableWidth",T);t.setWidth(T);}else{o.getModel("_VHUI").setProperty("/tableWidth",undefined);}if(x!==undefined){var H=h(x);if(!H){s.push({sVHId:x,oVHSuggestTable:t});}}});},_getWidthInRem:function(o,p){var $=o.$().width();if(p&&$){$=0.3*$;}var W=$?parseFloat(R.fromPx($)):0;return isNaN(W)?0:W;},getTableWidth:function(t,o){var W,p=t.getColumns(),v=(p&&p.filter(function(r){return r&&r.getVisible&&r.getVisible();}))||[],S=v.reduce(function(r,u){W=u.getWidth();if(W&&W.endsWith("px")){W=R.fromPx(W);}var x=parseFloat(W);return r+(isNaN(x)?9:x);},v.length);return Math.max(S,o)+"em";},showValueListInfo:function(p,o,S,r,P){var t=o.getModel(),u=t.getMetaModel(),W=o.getDialogContent&&o.getDialogContent(),v=o.getSuggestContent&&o.getSuggestContent(),x,D,y,z,E,A=o.getProperty("noDialog"),G,Q,H;if(S){x=v&&v.getId();z=v&&v.getTable&&v.getTable();E=z;}else{D=W&&W.getTable&&W.getTable();y=o&&o.getFilterBar&&o.getFilterBar();x=W&&W.getId();E=D&&y;}G=o.getModel("_VHUI");if(!G){G=new J({});o.setModel(G,"_VHUI");G.setProperty("/hasValueListRelevantQualifiers",!!u.getObject(p+"@")["@com.sap.vocabularies.Common.v1.ValueListRelevantQualifiers"]);if(o.getProperty("validateInput")){Q=u.getObject(p+"@")["@com.sap.vocabularies.Common.v1.ValueListForValidation"];Q=Q&&Q.replace(/\s/g,"");G.setProperty("/qualifierForValidation",Q);}}G.setProperty("/isSuggestion",S);G.setProperty("/showAllColumns",A?true:!S);G.setProperty("/hideColumn",false);G.setProperty("/showColumnInTypeAhead",S);G.setProperty("/minScreenWidth",!S?"418px":undefined);H=o.getModel("_VHUI").getProperty("/valueHelpId");if(D){D.setWidth("100%");}if(z){var T=G.getProperty("/tableWidth");if(!T){var K=o.data("sourcePath")!==o.data("originalPropertyPath");T=this.getTableWidth(z,this._getWidthInRem(o._getField(),K));o.getModel("_VHUI").setProperty("/tableWidth",T);z.setWidth(T);}}if((H!==undefined&&o.getBindingContext())||(o.getModel("_VHUI").getProperty("/collectiveSearchKey")!==undefined&&o.getModel("_VHUI").getProperty("/collectiveSearchKey")!==P.collectiveSearchKey)){D=undefined;y=undefined;z=undefined;E=undefined;delete w[x];}if(!S&&!y&&o.getDependents().length>0){var N=o.getDependents()[0];if(N.isA("sap.ui.mdc.filterbar.vh.FilterBar")){y=N;}}if(w[x]||E){return w["promise"+x];}else{if((S&&!z)||(!S&&!D)){w[x]=true;}var U=V.getValueListInfo(o,u,p,r,P).then(function(Y){var H=o.getModel("_VHUI").getProperty("/valueHelpId");if(o.getModel("_VHUI").getProperty("/noValidValueHelp")){L.error("Context dependent value help not found");return o.close();}var Z=Y&&Y.inParameters,$=Y&&Y.outParameters;if(o.getOutParameters().length!==$.length){$.forEach(function(c1){o.addOutParameter(c1);});}if(o.getInParameters().length!==Z.length){Z.forEach(function(c1){o.addInParameter(c1);});}if(S){var a1=h(H);var z=a1?a1.oVHSuggestTable:undefined;return(Y&&V.createValueHelpSuggest(p,o,z,Y,S));}else{var b1=g(H);if(b1){D=b1.oVHDialogTable;y=b1.oVHFilterBar;}return(Y&&V.createValueHelpDialog(p,o,D,y,Y,S));}}).catch(function(Y){var Z=Y.status&&Y.status===404?"Metadata not found ("+Y.status+") for value help of property "+p:Y.message;L.error(Z);o.destroyContent();});w["promise"+x]=U;return U;}},setValueListFilterFields:function(p,o,S,r){var t=o.getModel(),u=t.getMetaModel();if(o.getBindingContext()&&o.getModel().getMetaModel().getObject(p+"@")["@com.sap.vocabularies.Common.v1.ValueListRelevantQualifiers"]){return;}return V.getValueListInfo(o,u,p,r).then(function(v){v&&o.setFilterFields(f(v)?"$search":"");});},getColumnWidth:function(D,v){if(v&&v.Parameters&&v.Parameters.length===1){return"auto";}switch(D){case"Edm.Stream":return"7em";case"Edm.Boolean":return"8em";case"Edm.Date":case"Edm.TimeOfDay":return"9em";case"Edm.DateTimeOffset":return"12em";default:return"auto";}},fetchValuesOnInitialLoad:function(v){if(v.FetchValues&&v.FetchValues==2){return false;}return true;},getOutParameterPaths:function(p){var P="";p.forEach(function(o){if(o.$Type.endsWith("Out")){P+="{"+o.ValueListProperty+"}";}});return P;}};return V;},true);
