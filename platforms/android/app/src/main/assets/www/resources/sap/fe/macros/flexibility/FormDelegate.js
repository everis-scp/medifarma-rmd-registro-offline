/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2021 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/fe/macros/DelegateUtil","sap/ui/model/json/JSONModel","sap/fe/macros/CommonHelper"],function(D,J,C){"use strict";var a={createLayout:function(p){var m=p.modifier,M=p.appComponent&&p.appComponent.getModel().getMetaModel(),f=p.element,e=D.getCustomData(f,"entitySet",m)||D.getCustomData(f,"navigationPath",m),P="/"+e,F=p.parentSelector?p.modifier.bySelector(p.parentSelector,p.appComponent,p.view):undefined,n=D.getCustomData(F,"navigationPath",m),s=n?P+"/"+n:P,o=M.getMetaContext(s),b=M.createBindingContext(s+"/"+p.bindingPath),c=p.element.sId||p.element.id;var d={sPropertyName:p.bindingPath,sBindingPath:P,sValueHelpType:"FormVH",oControl:f,oMetaModel:M,oModifier:m};var v=Promise.all([D.isValueHelpRequired(d),D.doesValueHelpExist(d)]).then(function(r){var V=r[0],g=r[1];if(V&&!g){return t("sap.fe.macros.flexibility.ValueHelpWrapper");}return Promise.resolve();});function t(g){var h=new J({id:c,idPrefix:p.fieldSelector.id}),i={bindingContexts:{"entitySet":o,"property":b,"this":h.createBindingContext("/")},models:{"this":h,"entitySet":M,metaModel:M,"property":M}};return D.templateControlFragment(g,i,{},m);}function T(g,V){var h=new J({_flexId:p.fieldSelector.id,onChange:C.removeEscapeCharacters(D.getCustomData(f,"onChange",m)),displayMode:C.removeEscapeCharacters(D.getCustomData(f,"displayMode",m))}),i={bindingContexts:{"entitySet":o,"dataField":b,"this":h.createBindingContext("/")},models:{"this":h,"entitySet":M,metaModel:M,"dataField":M}};return D.templateControlFragment(g,i,{view:V},m);}return v.then(function(v){return T("sap.fe.macros.form.FormElement",p.view).then(function(g){return{control:g,valueHelp:v};});});}};return a;});
