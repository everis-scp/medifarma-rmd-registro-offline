/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2021 SAP SE. All rights reserved
    
 */
sap.ui.define(["sap/m/VBox","sap/m/VBoxRenderer","sap/fe/macros/CommonHelper"],function(V,a,C){"use strict";var b=V.extend("sap.fe.core.controls.filterbar.VisualFilter",{renderer:{apiVersion:2,render:a.render},metadata:{interfaces:["sap.ui.core.IFormContent"]}});b.prototype.onAfterRendering=function(){var i=this.getItems()[1].getItems()[0];var I=i.getBinding("segments")||i.getBinding("bars")||i.getBinding("points");var o=i.getBindingContext("internal");var s=i.getId().split("fe::VisualFilter");var c="fe::VisualFilter"+s[1];var r=sap.ui.getCore().getLibraryResourceBundle("sap.fe.macros");var S=i.data("showOverlayInitially");var d=C.parseCustomData(i.data("selectionVariantAnnotation"));var R=C.parseCustomData(i.data("requiredProperties"));var m=i.getModel().getMetaModel();var e=I.getPath();if(S==="true"){if(!Object.keys(d).length){if(R.length>1){o.setProperty(c,{"VFOverLayMessage":r.getText("M_VISUAL_FILTERS_PROVIDE_FILTER_VAL_MULTIPLEVF"),"showOverLayForVF":true});}else{var l=m.getObject(e+"/"+R[0]+"@com.sap.vocabularies.Common.v1.Label")||R[0];o.setProperty(c,{"VFOverLayMessage":r.getText("M_VISUAL_FILTERS_PROVIDE_FILTER_VAL_SINGLEVF",l),"showOverLayForVF":true});}}else{var f=[];var n=[];d.SelectOptions.forEach(function(h){f.push(h.PropertyName.$PropertyPath);});R.forEach(function(p){if(f.indexOf(p)===-1){n.push(p);}});if(n.length>1){o.setProperty(c,{"VFOverLayMessage":r.getText("M_VISUAL_FILTERS_PROVIDE_FILTER_VAL_MULTIPLEVF"),"showOverLayForVF":true});}else{var l=m.getObject(e+"/"+n[0]+"@com.sap.vocabularies.Common.v1.Label")||n[0];o.setProperty(c,{"VFOverLayMessage":r.getText("M_VISUAL_FILTERS_PROVIDE_FILTER_VAL_SINGLEVF",l),"showOverLayForVF":true});}n.length>1?o.setProperty(c,{"VFOverLayMessage":r.getText("M_VISUAL_FILTERS_PROVIDE_FILTER_VAL_MULTIPLEVF"),"showOverLayForVF":true}):o.setProperty(c,{"VFOverLayMessage":r.getText("M_VISUAL_FILTERS_PROVIDE_FILTER_VAL_SINGLEVF",n[0]),"showOverLayForVF":true});}}var g=o.getProperty(c)&&o.getProperty(c).showOverLayForVF;if(I&&I.isSuspended()&&!g){I.resume();}};return b;});
