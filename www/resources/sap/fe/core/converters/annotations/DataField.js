/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)
 *      (c) Copyright 2009-2021 SAP SE. All rights reserved
 */
sap.ui.define(["sap/fe/core/templating/UIFormatters","sap/fe/core/templating/PropertyHelper"],function(U,P){"use strict";var _={};var i=P.isProperty;var g=P.getAssociatedUnitProperty;var a=P.getAssociatedCurrencyProperty;var b=U.getDisplayMode;function c(m){return m.hasOwnProperty("Action");}_.isDataFieldForActionAbstract=c;function d(m){return m.hasOwnProperty("Value");}_.isDataFieldTypes=d;function e(m){var n,o,p,q,r,s,t;return((n=m.annotations)===null||n===void 0?void 0:(o=n.UI)===null||o===void 0?void 0:(p=o.Hidden)===null||p===void 0?void 0:p.valueOf())===true||d(m)&&((q=m.Value)===null||q===void 0?void 0:(r=q.$target)===null||r===void 0?void 0:(s=r.annotations)===null||s===void 0?void 0:(t=s.UI)===null||t===void 0?void 0:t.Hidden)===true;}_.isDataFieldAlwaysHidden=e;function f(m,o){if(typeof o==="object"){var n;if(d(o)&&((n=o.Value)===null||n===void 0?void 0:n.$target)){var p,q,r;var s=(p=o.Value)===null||p===void 0?void 0:p.$target;if((s===null||s===void 0?void 0:(q=s.annotations)===null||q===void 0?void 0:(r=q.Common)===null||r===void 0?void 0:r.SemanticObject)!==undefined){return m.getEntitySetBasedAnnotationPath(s===null||s===void 0?void 0:s.fullyQualifiedName);}}else if(i(o)){var t,u;if((o===null||o===void 0?void 0:(t=o.annotations)===null||t===void 0?void 0:(u=t.Common)===null||u===void 0?void 0:u.SemanticObject)!==undefined){return m.getEntitySetBasedAnnotationPath(o===null||o===void 0?void 0:o.fullyQualifiedName);}}}return undefined;}_.getSemanticObjectPath=f;function h(p){return p.indexOf("/")>-1?p.substring(0,p.lastIndexOf("/")+1):"";}function j(t,n,m,r){if(m==="AnalyticalTable"){var o,p,q;var s=(o=t.annotations)===null||o===void 0?void 0:(p=o.UI)===null||p===void 0?void 0:p.Hidden;if((s===null||s===void 0?void 0:s.path)&&((q=s.$target)===null||q===void 0?void 0:q._type)==="Property"){var u=n+s.path;r.additionalProperties[u]=s.$target;}}return r;}function k(p,m,n,o,t){var r=arguments.length>5&&arguments[5]!==undefined?arguments[5]:{properties:{},additionalProperties:{}};function q(Z,$){if(!r.properties.hasOwnProperty(Z)){r.properties[Z]=$;}return Object.keys(r.properties).indexOf(Z);}function s(Z){r.exportSettingsTemplate=r.exportSettingsTemplate?"".concat(r.exportSettingsTemplate).concat(Z):"".concat(Z);}if(p&&m){var u,v;var w=h(p);var x=(u=m.annotations)===null||u===void 0?void 0:(v=u.Common)===null||v===void 0?void 0:v.Text;var y;var z;var A;if(r.exportSettingsTemplate){s("\n");r.exportSettingsWrapping=true;}if((x===null||x===void 0?void 0:x.path)&&(x===null||x===void 0?void 0:x.$target)){var B=n.getDataModelObjectPath();var C=w+x.path;var D=b(m,B);var E;switch(D){case"Value":y=q(p,m);s("{".concat(y,"}"));break;case"Description":q(p,m);E=q(C,x.$target);s("{".concat(E,"}"));break;case"ValueDescription":y=q(p,m);E=q(C,x.$target);s("{".concat(y,"} ({").concat(E,"})"));break;case"DescriptionValue":y=q(p,m);E=q(C,x.$target);s("{".concat(E,"} ({").concat(y,"})"));break;}}else{var F,G,H,I,J,K,L,M,N,O,Q,R,S;var T=a(m)||g(m);var V=(m===null||m===void 0?void 0:(F=m.annotations)===null||F===void 0?void 0:(G=F.Measures)===null||G===void 0?void 0:G.ISOCurrency)||(m===null||m===void 0?void 0:(H=m.annotations)===null||H===void 0?void 0:(I=H.Measures)===null||I===void 0?void 0:I.Unit);if(T&&(V===null||V===void 0?void 0:V.$target)){y=q(p,m);A=q(T.name,V.$target);s("{".concat(y,"}  {").concat(A,"}"));}else if((J=m.Target)===null||J===void 0?void 0:(K=J.$target)===null||K===void 0?void 0:K.Visualization){var W=m.Target.$target.Value.$target;y=q(p,W);q(m.Target.value,m.Target.$target);z=(m.Target.$target.TargetValue||m.Target.$target.MaximumValue).toString();s("{".concat(y,"}/").concat(z));}else if(((L=m.annotations)===null||L===void 0?void 0:(M=L.UI)===null||M===void 0?void 0:(N=M.DataFieldDefault)===null||N===void 0?void 0:(O=N.Target)===null||O===void 0?void 0:(Q=O.$target)===null||Q===void 0?void 0:Q.$Type)==="com.sap.vocabularies.UI.v1.DataPointType"){var X=m.annotations.UI.DataFieldDefault;y=q(p,m);q(X.Target.value,m);z=(X.Target.$target.TargetValue||X.Target.$target.TargetValue.MaximumValue).toString();s("{".concat(y,"}/").concat(z));}else if(((R=m.Target)===null||R===void 0?void 0:(S=R.$target)===null||S===void 0?void 0:S.$Type)==="com.sap.vocabularies.Communication.v1.ContactType"){var Y;r.exportSettingsContactProperty=m.Target.value.substring(0,m.Target.value.indexOf("/")+1)+((Y=m.Target.$target.fn)===null||Y===void 0?void 0:Y.path);y=q(p,m.Target.$target.fn.$target);s("{".concat(y,"}"));}else if(!o){y=q(p,m);s("{".concat(y,"}"));}}r=j(m,w,t,r);if(Object.keys(r.additionalProperties).length>0&&Object.keys(r.properties).length===0){y=q(p,m);s("{".concat(y,"}"));}}return r;}_.collectRelatedProperties=k;function l(m,n,t){var o,p,q;var r=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{properties:{},additionalProperties:{}};if(m.$Type==="com.sap.vocabularies.UI.v1.DataField"&&m.Value){var s=m.Value;r=k(s.path,s.$target,n,false,t,r);var u=h(s.path);r=j(m,u,t,r);}else if(m.$Type==="com.sap.vocabularies.UI.v1.DataFieldForAnnotation"){switch((o=m.Target)===null||o===void 0?void 0:(p=o.$target)===null||p===void 0?void 0:p.$Type){case"com.sap.vocabularies.UI.v1.FieldGroupType":(q=m.Target.$target.Data)===null||q===void 0?void 0:q.forEach(function(v){r=l(v,n,t,r);});break;case"com.sap.vocabularies.UI.v1.DataPointType":r=k(m.Target.$target.Value.path,m,n,false,t,r);break;case"com.sap.vocabularies.Communication.v1.ContactType":r=k(m.Target.value,m,n,false,t,r);break;}}return r;}_.collectRelatedPropertiesRecursively=l;return _;},false);
