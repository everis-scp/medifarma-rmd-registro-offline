sap.ui.define(["sap/ui/core/mvc/ControllerExtension","sap/m/MessageBox","sap/ui/model/Filter","sap/ui/model/Sorter","sap/ui/generic/app/navigation/service/SelectionVariant","sap/suite/ui/generic/template/genericUtilities/controlHelper","sap/suite/ui/generic/template/genericUtilities/testableHelper","sap/suite/ui/generic/template/detailTemplates/detailUtils","sap/suite/ui/generic/template/ObjectPage/controller/SideContentHandler","sap/suite/ui/generic/template/ObjectPage/extensionAPI/ExtensionAPI","sap/suite/ui/generic/template/js/AnnotationHelper","sap/m/Table","sap/ui/layout/DynamicSideContent","sap/suite/ui/generic/template/lib/ShareUtils","sap/ui/dom/jquery/Selectors","sap/suite/ui/generic/template/genericUtilities/FeLogger","sap/suite/ui/generic/template/ObjectPage/controller/MultipleViewsHandler","sap/suite/ui/generic/template/lib/MessageUtils","sap/ui/events/KeyCodes","sap/base/util/merge","sap/ui/model/FilterProcessor","sap/suite/ui/generic/template/js/StableIdHelper","sap/uxap/ObjectPageSubSection","sap/ui/core/MessageType","sap/base/util/extend","sap/base/util/UriParameters","sap/base/util/isEmptyObject","sap/ui/dom/getFirstEditableInput","sap/ui/dom/jquery/Focusable","sap/suite/ui/generic/template/genericUtilities/FeError","sap/suite/ui/generic/template/lib/CreateWithDialogHandler","sap/ui/fl/apply/api/FlexRuntimeInfoAPI","sap/ui/Device","sap/suite/ui/generic/template/js/placeholderHelper","sap/suite/ui/generic/template/genericUtilities/controlStateWrapperFactory"],function(C,M,F,S,a,c,t,d,b,E,A,R,D,f,g,h,l,m,K,n,o,p,O,q,r,U,s,u,v,w,y,z,B,G,H){"use strict";var I="ObjectPage.controller.ControllerImplementation";var L=new h(I).getLogger();var J=20;var T={};function N(e){e.setSelectedSection(null);}function P(e){return e.data("inlineCreate")==="true";}function Q(e){var i=e.getBlocks().concat(e.getMoreBlocks()).concat(e.getActions());return i;}function V(e,j){if(e.getBindings){var k=e.getBindings();for(var i=0;i<k.length;i++){V(k[i],j);}}else{var x=e.getType();e.setType(x,j);}}var W=/[A-Za-z].*[A-Za-z]/;var X={getMethods:function(Y,Z,$){var _={};var a1=d.getControllerBase(Y,Z,$);Y.oController=$;var b1;var c1=new b($,Z,Z.oComponentUtils.stateChanged);var d1;var e1;var f1;var g1;var h1;var i1=Object.create(null);var j1=null;var k1=[];var l1=null;var m1=null;var n1=null;var o1;var p1;var q1;function r1(e){var i=e.getParameter("bindingParams");i.parameters=i.parameters||{};i.parameters.usePreliminaryContext=true;i.parameters.bCanonicalRequest=Z.oServices.oApplication.mustRequireRequestsCanonical();i.parameters.batchGroupId="facets";return i;}function s1(){L.info("Activate object");var e=Z.oServices.oCRUDManager.activateDraftEntity();var i=b1.getModel("ui");var j=i.getProperty("/createMode");e.then(function(x){G1();if(j){m.showSuccessMessageIfRequired(Z.oCommonUtils.getText("OBJECT_CREATED"),Z.oServices);}else{m.showSuccessMessageIfRequired(Z.oCommonUtils.getText("OBJECT_SAVED"),Z.oServices);}var $2=$.getOwnerComponent();Z.oServices.oViewDependencyHelper.setAllPagesDirty([$2.getId()]);Z.oServices.oViewDependencyHelper.unbindChildren($2);Z.oServices.oApplication.invalidatePaginatorInfo();var _2=$2.getNavToListOnSave();Z.oServices.oApplication.navigateAfterActivation(!_2&&x.context);},Function.prototype);var k={activationPromise:e};Z.oComponentUtils.fire($,"AfterActivate",k);}function t1(e){var i=$.getView();var j=i.getModel();var k=Z.oComponentUtils.isComponentDirty();var x=j.getPendingChanges();var $2=Object.create(null);if(x){for(var _2 in x){if(x.hasOwnProperty(_2)){var a3=j.getContext("/"+_2);$2[_2]={context:a3,change:x[_2]};}}}Z.oCommonEventHandlers.submitChangesForSmartMultiInput();var b3=Z.oServices.oCRUDManager.saveEntity();b3.then(function(d3){if(!e){var e3=Z.oComponentUtils.getTemplatePrivateModel();e3.setProperty("/objectPage/displayMode",1);var e3=Z.oComponentUtils.getTemplatePrivateModel();var f3=e3.getProperty("/objectPage/mHandleEnabledTableToolbar");for(var g3 in f3){if(f3[g3]){Z.oCommonUtils.setEnabledToolbarButtons($.byId(g3));delete f3[g3];}}Y.setEditable(false);}u1(d3,i,k,$2,e);});var c3={saveEntityPromise:b3};Z.oComponentUtils.fire($,"AfterSave",c3);}function u1(e,i,j,k,x){var $2=b1.getModel("ui");var _2=$2.getProperty("/createMode");var a3=$.getOwnerComponent();Z.oServices.oViewDependencyHelper.setParentToDirty(a3,a3.getEntitySet(),1);Z.oServices.oViewDependencyHelper.unbindChildren(a3);var b3=a3.getNavToListOnSave();var c3=!b3||x;if(c3){if(_2){Z.oComponentUtils.adaptUrlAfterNonDraftCreateSaved(i.getBindingContext(),x);}t2(b1);}else{Y.navigateUp();}var d3;if(_2){d3="OBJECT_CREATED";}else{d3=j?"OBJECT_SAVED":"OBJECT_NOT_MODIFIED";}m.showSuccessMessageIfRequired(Z.oCommonUtils.getText(d3),Z.oServices);for(var e3 in k){var f3=k[e3];var g3=f3.context;var h3=f3.change;var i3=Object.keys(h3)||[];var j3=i3.indexOf("__metadata");if(j3>-1){i3.splice(j3,1);}Z.oServices.oApplicationController.executeSideEffects(g3,i3);}}function v1(e){var i=e.getSource().getId();w1("SaveAndContEdit",i);}function w1(e,i){var j=function(e,i){var x;var $2;var _2;if(Z.oComponentUtils.isDraftEnabled()){x=1;$2=s1;_2="activate";}else{x=3;if(e==="SaveAndContEdit"){$2=t1.bind(null,true);_2=i;}else{$2=t1.bind(null,false);_2="save";}}var a3=Z.oComponentUtils.getCRUDActionHandler();Z.oCommonUtils.executeIfControlReady(a3.handleCRUDScenario.bind(null,x,$2),_2);};var k=Promise.resolve($.beforeSaveExtension());k.then(j.bind(null,e,i),jQuery.noop());}function x1(e){if(P(e.getSource())){var i=e.getParameter("bindingParams");if(i.filters&&i.filters.length){var j=o.groupFilters(i.filters);if(!e.getParameter("messageFilterActive")){i.filters=new F({filters:[new F({filters:[new F({path:"IsActiveEntity",operator:"EQ",value1:true}),j],and:true}),new F({filters:[new F({path:"IsActiveEntity",operator:"EQ",value1:false}),new F({filters:[j,new F({path:"HasActiveEntity",operator:"EQ",value1:false})],and:false})],and:true})],and:false});}else{i.filters=j;}}var k=i.sorter[0]&&i.sorter[0].getGroupFunction();var x=k&&function($2){var _2=$2.getObject();if(_2.IsActiveEntity||_2.HasActiveEntity){var a3=r({},k($2));a3.key=a3.key.charAt(0)==="ยง"?"ยง"+a3.key:a3.key;return a3;}return{key:"ยง",text:Z.oCommonUtils.getText("NEW_ENTRY_GROUP")};};if(e.getSource().data("disableInlineCreateSort")==="false"){i.sorter.unshift(new S("HasActiveEntity",false,x));}}}function y1(){return b1.getHeaderTitle();}function z1(e){var i=Z.oComponentUtils.getTemplatePrivateModel();var j={shareEmailPressed:function(){var k=i.getProperty("/objectPage/headerInfo/objectTitle");var x=i.getProperty("/objectPage/headerInfo/objectSubtitle");if(x){k=k+" - "+x;}var $2=Z.oServices.oApplication.getBusyHelper();if($2.isBusy()){return;}var _2=$.getView().getBindingContext();var a3=_2.getObject().IsActiveEntity;var b3=f.getCurrentUrl().then(function(c3){if(a3||a3===undefined){sap.m.URLHelper.triggerEmail(null,k,c3);}else{var d3=Z.oServices.oApplication.getDraftSiblingPromise(_2);var e3=sap.ushell.services&&new sap.ushell.services.URLParsing();$2.setBusy(d3.then(function(f3){var g3=e3?c3.split(e3.getHash(c3))[0]+e3.getShellHash(c3)+"&"+f3.sDeepPath:c3;sap.m.URLHelper.triggerEmail(null,k,g3);}));}});$2.setBusy(b3);},shareJamPressed:function(){f.openJamShareDialog(i.getProperty("/objectPage/headerInfo/objectTitle")+" "+i.getProperty("/objectPage/headerInfo/objectSubtitle"));},getModelData:function(){var k=$.getView().getBindingContext();var x=k.getObject().IsActiveEntity;if(!x){var $2=Z.oServices.oApplication.getDraftSiblingPromise(k);var _2=new sap.ushell.services.URLParsing();return $2.then(function(a3){var b3="#"+_2.getShellHash(document.URL)+"&"+a3.sDeepPath;return{serviceUrl:"",title:i.getProperty("/objectPage/headerInfo/objectTitle"),subtitle:i.getProperty("/objectPage/headerInfo/objectSubtitle"),customUrl:b3};});}else{return Promise.resolve().then(function(){return{serviceUrl:"",title:i.getProperty("/objectPage/headerInfo/objectTitle"),subtitle:i.getProperty("/objectPage/headerInfo/objectSubtitle"),customUrl:f.getCustomUrl()};});}}};f.openSharePopup(Z.oCommonUtils,e,j);}function A1(){return Z.oCommonUtils.getDialogFragmentAsync("sap.suite.ui.generic.template.ObjectPage.view.fragments.RelatedAppsSheet",{buttonPressed:function(e){var i=e.getSource();var j=i.getBindingContext("buttons");var k=j.getProperty("link");var x=j.getProperty("param");var $2=k.intent;var _2=$2.split("#")[1].split("-")[0];var a3=$2.split("-")[1].split("?")[0].split("~")[0];var b3={semanticObject:_2,action:a3,parameters:x};Z.oCommonUtils.fnProcessDataLossOrDraftDiscardConfirmation(function(){var c3=$.getView().getBindingContext();Z.oCommonEventHandlers.onRelatedAppNavigation(b3,c3);},Function.prototype,undefined,(Z.oComponentUtils.isDraftEnabled()&&"NavigateExternal")||undefined);}},"buttons");}var B1;function C1(){B1=function(e){var i=e.getSource().getParent();var j=Z.oServices.oApplication.getBusyHelper();if(j.isBusy()){return;}var k=$.getOwnerComponent();var x=k.getModel("_templPrivGlobal");var $2={objectPage:{currentEntitySet:k.getProperty("entitySet")}};x.setProperty("/generic/multipleViews",$2);var _2=Z.oServices.oCRUDManager.deleteEntity();var a3=k.getBindingContext().getPath();var b3=Object.create(null);b3[a3]=_2;var c3={deleteEntityPromise:_2};Z.oComponentUtils.fire($,"AfterDelete",c3);i.close();};return Z.oCommonUtils.getDialogFragmentAsync("sap.suite.ui.generic.template.ObjectPage.view.fragments.TableDeleteConfirmation",{onCancel:function(e){var i=e.getSource().getParent();i.close();},onDelete:function(e){B1(e);}},"delete",Function.prototype,true);}function D1(){var i;var e=Z.oServices.oApplication.getBusyHelper();if(e.isBusy()){return;}var j=Z.oComponentUtils.getTemplatePrivateModel();var k=(j.getProperty("/objectPage/headerInfo/objectTitle")||"").trim();var x=j.getProperty("/objectPage/headerInfo/objectSubtitle");var $2=Z.oComponentUtils.getViewLevel();var i=$2>1;var _2={};_2.title=Z.oCommonUtils.getText("ST_GENERIC_DELETE_TITLE");_2.text=Z.oCommonEventHandlers.getDeleteText(k,x,!i,i);var a3=Promise.resolve($.beforeDeleteExtension());a3.then(function(b3){r(_2,b3);C1().then(function(c3){var d3=c3.getModel("delete");d3.setData(_2);c3.open();});},Function.prototype);}function E1(e){var i=e.getParameter("columnInfos");var j=i&&i.length-1;while(j>=0){if(i[j].ignore){i.splice(j,1);}j-=1;}var k=i.reduce(function($2,_2){if(!_2.type&&!_2.customParseFunction){$2.push(_2);}return $2;},[]);if(k.length>0){var x=Z.oCommonUtils.getText("DATA_PASTE_UNSUPPORTED_FORMAT_MESSAGE");M.show(x,{icon:M.Icon.ERROR,title:Z.oCommonUtils.getText("ST_ERROR"),actions:[sap.m.MessageBox.Action.CLOSE]});}}function F1(e){var j;var k=e.getSource();var x=k.getId();var $2=x.split("::Table")[0]+"::addEntry";var _2=$.byId($2);if(!_2){return;}var a3=e.getParameter("result");if(a3){if(a3.errors){var b3=a3.errors.map(function(k3){return k3.message;});var c3=Z.oCommonUtils.getText("DATA_PASTE_ERROR_MESSAGE",[b3.length]);var d3=Z.oCommonUtils.getText("DATA_PASTE_ERROR_CORRECTION_MESSAGE");var e3=Z.oCommonUtils.getText("DATA_PASTE_ERROR_CORRECTION_NOTE");b3.unshift("");b3.unshift(e3);b3.unshift(d3);M.show(c3,{icon:M.Icon.ERROR,title:Z.oCommonUtils.getText("ST_ERROR"),actions:[sap.m.MessageBox.Action.CLOSE],details:b3.join("<br>")});}else if(a3.parsedData){j=a3.parsedData;if(j&&j.length){var f3=j.length;var g3;var h3,i3=[];var j3=sap.m.DraftIndicatorState.Saved;for(var i=0;i<f3;i++){g3=i<f3-1;h3=Z.oCommonEventHandlers.addEntry(_2,true,undefined,j[i],g3);i3.push(h3);}Promise.all(i3).then(function(){var k3=Z.oComponentUtils.getTemplatePrivateGlobalModel();k3.setProperty("/generic/draftIndicatorState",j3);});}}}}function G1(){var e=Z.oComponentUtils.getTemplatePrivateModel();var i=e.getProperty("/objectPage/aPasteAttachedTables");var j=i.length;var k;var x;while(j>=0){k=i[j];x=$.byId(k+"::Table");if(x&&x.isA("sap.ui.comp.smarttable.SmartTable")&&x.hasListeners("paste")){x.detachBeforePaste(E1);x.detachPaste(F1);i.splice(j,1);}j-=1;}}function H1(e){Z.oCommonUtils.executeIfControlReady(D1,"delete");}function I1(e,i){var j,k;if(e){k=e.context||(e.targetSiblingKey?e.draftAdministrativeData:e);if(Z.oServices.oDraftController.getDraftContext().hasDraft(k)){Z.oServices.oViewDependencyHelper.setRootPageToDirty();j=k.context||k;}}if(j){Z.oServices.oApplication.invalidatePaginatorInfo();Z.oServices.oApplication.switchToDraft(j,e.targetSiblingKey);}else{var x=Z.oComponentUtils.getTemplatePrivateModel();x.setProperty("/objectPage/displayMode",2);t2(b1);}Y.setEditable(true);}var J1;function K1(e){e=!!e&&typeof e==="boolean";var i=Z.oServices.oCRUDManager.editEntity(e);i.then(function(j){if(j.draftAdministrativeData){J1(j.draftAdministrativeData.CreatedByUserDescription||j.draftAdministrativeData.CreatedByUser);}else{I1(j,false);}});}J1=function(e){var i;Z.oCommonUtils.getDialogFragmentAsync("sap.suite.ui.generic.template.ObjectPage.view.fragments.UnsavedChangesDialog",{onEdit:function(){i.close();K1(true);},onCancel:function(){i.close();}},"Dialog").then(function(j){i=j;var k=Z.oComponentUtils.getMainComponentUtils();var x=Z.oServices.oApplication.getBusyHelper();x.setBusy(k);k.then(function($2){var _2=$2.getText("DRAFT_LOCK_EXPIRED",[e]);var a3=i.getModel("Dialog");a3.setProperty("/unsavedChangesQuestion",_2);i.open();});});};function L1(){var j="{\"SelectionVariantID\":\"\"}";var k=$.getOwnerComponent();var $2=k.getEntitySet();var _2=k.getModel();var a3=_2.getMetaModel();var b3=a3.getODataEntitySet($2);var c3=a3.getODataEntityType(b3.entityType);var d3=c3.property;var e3=[];for(var x in d3){var f3=d3[x];var g3=f3["com.sap.vocabularies.Common.v1.FieldControl"]&&f3["com.sap.vocabularies.Common.v1.FieldControl"].Path;if(g3&&e3.indexOf(g3)<0){e3.push(g3);}}var h3=$.getView().getBindingContext();var i3=h3.getObject();var j3=new a();for(var i in d3){var k3=d3[i].type;var l3=d3[i].name;var m3=i3[d3[i].name];if(e3.indexOf(l3)>-1){continue;}if(l3&&(m3||k3==="Edm.Boolean")){if(k3==="Edm.Time"&&m3.ms!==undefined){m3=m3.ms;}if(typeof m3!=="string"){try{m3=m3.toString();}catch(e){m3=m3+"";}}j3.addParameter(l3,m3);}}j=j3.toJSONString();return j;}function M1(e,i){var j=true;var k=i.getModel();i=i instanceof R?i.getParent():i;var x=Z.oCommonUtils.getDeleteRestrictions(i);var $2=x&&x.Deletable&&x.Deletable.Path;if($2){j=k.getProperty($2,e);}return j;}var N1;function O1(e,j,k){var x=[];N1=function($2){var _2=Z.oServices.oApplication.getBusyHelper();var a3=$2.getSource().getParent();x=[];var b3;var c3;var d3=$.getView().getModel().getObject(j[0].getPath());for(var i=0;i<j.length;i++){if(M1(j[i],e)){x.push(j[i].getPath());}}var e3=Z.oServices.oCRUDManager.deleteEntities({pathes:x});_2.setBusy(e3);Z.oServices.oApplicationController.executeSideEffects(e.getBindingContext(),[],[e.getTableBindingPath()]);e3.then(function(g3){Z.oCommonUtils.refreshSmartTable(e);if(d3.IsActiveEntity===false){c3=0;}else{c3=g3.length;}b3=x.length-c3;var h3="";if(b3>0){if(c.isUiTable(e.getTable())){var i3=e.getTable().getPlugin("sap.ui.table.plugins.SelectionPlugin");if(i3){i3.clearSelection();}}if(b3>1){h3=Z.oCommonUtils.getContextText("DELETE_SUCCESS_PLURAL_WITH_COUNT",e.getId(),null,[b3]);}else{if(c3>0){h3=Z.oCommonUtils.getContextText("DELETE_SUCCESS_WITH_COUNT",e.getId(),null,[b3]);}else{h3=Z.oCommonUtils.getContextText("ITEM_DELETED",e.getId());}}}if(c3>0){if(c3>1){h3+=h3&&h3+"\n";h3+=Z.oCommonUtils.getContextText("DELETE_ERROR_PLURAL_WITH_COUNT",e.getId(),null,[c3]);}else{if(b3>0){h3+="\n";h3+=Z.oCommonUtils.getContextText("DELETE_ERROR_WITH_COUNT",e.getId(),null,[c3]);}else{h3+=Z.oCommonUtils.getContextText("DELETE_ERROR",e.getId());}}}if(h3){if(c3>0){M.error(h3);}else{m.showSuccessMessageIfRequired(h3,Z.oServices);}}});var f3={deleteEntitiesPromise:e3,sUiElementId:k,aContexts:j};Z.oComponentUtils.fire($,"AfterLineItemDelete",f3);a3.close();};return Z.oCommonUtils.getDialogFragmentAsync("sap.suite.ui.generic.template.ObjectPage.view.fragments.TableDeleteConfirmation",{onCancel:function(i){var $2=i.getSource().getParent();$2.close();},onDelete:function(i){N1(i);}},"delete",Function.prototype,true);}function P1(e){var i=Z.oCommonUtils.getOwnerControl(e);if(!c.isSmartTable(i)){i=i.getParent();}var j=Z.oCommonUtils.getSelectedContexts(i);var k=e.getParent().getParent().getId();Q1(i,j,k);}function Q1(e,j,k){if(j.length===0){M.error(Z.oCommonUtils.getText("ST_GENERIC_NO_ITEM_SELECTED"),{styleClass:Z.oCommonUtils.getContentDensityClass()});return;}var x=[];var $2;var _2=[];if("getMode"in e.getTable()){$2=e.getTable().getMode();}for(var i=0;i<j.length;i++){if(M1(j[i],e)){x.push(j[i].getPath());}else{_2.push(j[i]);}}var a3={};a3.undeletableCount=0;a3.tableMode=$2;if(j.length>1){a3.title=Z.oCommonUtils.getText("ST_GENERIC_DELETE_TITLE_WITH_COUNT",[j.length]);a3.text=Z.oCommonUtils.getContextText("DELETE_SELECTED_ITEMS",e.getId());}else{a3.title=Z.oCommonUtils.getText("ST_GENERIC_DELETE_TITLE");a3.text=Z.oCommonEventHandlers.getSelectedItemContextForDeleteMessage(e,j[0],true);}if(_2.length>0){a3.undeletableText=Z.oCommonUtils.getContextText("DELETE_UNDELETABLE_ITEMS",e.getId(),null,[_2.length,j.length]);if($2==='Delete'){a3.undeletableCount=_2.length;a3.undeletableText=undefined;a3.text=Z.oCommonUtils.getText("DELETE_UNDELETABLE_ITEM");}}var b3={sUiElementId:k,aContexts:j};var c3=Promise.resolve($.beforeLineItemDeleteExtension(b3));c3.then(function(d3){r(a3,d3);O1(e,j,k).then(function(e3){if(!_2.length){a3.undeletableText=undefined;}var f3=e3.getModel("delete");f3.setData(a3);e3.open();});},Function.prototype);}function R1(){var i=$.byId("imageDialog");var e=i?Promise.resolve(i):Z.oCommonUtils.getDialogFragmentAsync("sap.suite.ui.generic.template.ObjectPage.view.fragments.ImageDialog",{onImageDialogClose:function(){i.close();}},"headerImage");e.then(function(j){i=j;});return e;}function S1(){var e=Z.oComponentUtils.getTemplatePrivateModel();e.setProperty("/objectPage/isHeaderExpanded",true);var i=$.getView().byId("template::ObjectPage::ObjectPageHeader");i.attachStateChange(function(j){var k=j.getParameter("isExpanded");e.setProperty("/objectPage/isHeaderExpanded",k);});}function T1(){var e;var j=Z.oComponentUtils.getTemplatePrivateModel();var k=function(i){return function(x){var $2=x.getSource();var _2=$2.getExternalValue();j.setProperty("/objectPage/headerInfo/"+i,_2);if(i==="objectTitle"){Z.oComponentUtils.setText(_2);if(!_2){var a3=Z.oComponentUtils.getHeaderDataAvailablePromise();a3.then(function(b3){_2=$2.getExternalValue();if(_2){return;}var c3=$.getView();var d3=b3.getObject();var e3=c3.getModel("ui");var f3=e3.getProperty("/createMode");if(f3&&d3&&(d3.IsActiveEntity===undefined||d3.IsActiveEntity===false||d3.HasActiveEntity===false)){e=e||Z.oCommonUtils.getText("NEW_OBJECT");j.setProperty("/objectPage/headerInfo/objectTitle",e);Z.oComponentUtils.setText(e);}});}}};};b1.getCustomData().forEach(function(x){var $2=x.getKey();if($2==="objectTitle"||$2==="objectSubtitle"){var _2=x.getBinding("value");var a3=!_2&&x.getBindingInfo("value");if(!_2&&!a3){j.setProperty("/objectPage/headerInfo/"+$2,x.getValue());return;}var b3=k($2);if(_2){_2.attachChange(b3);V(_2,"string");}else{a3.events={change:b3};for(var i=0;i<a3.parts.length;i++){a3.parts[i].targetType="string";}}}});}function U1(e){e.preventDefault();var i=Z.oCommonUtils.getControlInformation(e,null,true);if(i){if(Z.oComponentUtils.isDraftEnabled()){i.navigate();}else{Z.oCommonUtils.fnProcessDataLossOrDraftDiscardConfirmation(i.navigate,Function.prototype);}}}function V1(e,j){var k=q1[e];if(k){j.some(function(b3,i){if(b3!==k.controlIds[i]){k=null;return true;}return b3===k.controlId;});}if(!k){k={};var x=Object.create(null);var $2=function(i,e3,f3){if(f3){x[f3.getId()]=e3;}};k.controlId=Z.oCommonUtils.getPositionableControlId(j,true,$2);var _2=[];var a3;for(var b3=k.controlId;b3;){_2.push(b3);var c3=x[b3];a3=a3||(c3&&c.isObjectPageSection(c3)&&c3);b3=c3&&c3.getId();}_2.reverse();k.pathToControlId=_2;if(k.controlId&&!a3){var d3=$.byId(k.controlId);a3=c.isObjectPageSection(d3)&&d3;}k.groupers=a3?[a3]:[];k.controlIds=j;q1[e]=k;}return k;}function W1(e,i){if(!q1){return"";}var j=V1(e,i);var k=j.groupers;return k.length?k[0].getTitle():Z.oCommonUtils.getText("GENERIC_MESSAGE_GROUP_NAME");}var X1=new S("msg>");function Y1(e){switch(e){case q.Error:return 1;case q.Warning:return 2;case q.Success:return 3;case q.Information:return 4;case q.None:return 5;default:return 6;}}function Z1(e,i,j){if(!i){return j?1:0;}if(!j){return-1;}return c.sortChildControls(e,i,j);}X1.fnCompare=function(e,j){var k=V1(e.id,e.controlIds);var x=V1(j.id,j.controlIds);if(k.groupers.length===x.groupers.length&&k.groupers.every(function(d3,i){return x.groupers[i]===d3;})){var $2=Y1(e.type)-Y1(j.type);if($2||!(k.controlId||x.controlId)){return $2;}}var _2=k.pathToControlId;var a3=x.pathToControlId;var b3=Math.max(k.pathToControlId.length,x.pathToControlId.length);var c3=sap.ui.getCore();for(var i=0;i<b3;i++){if(_2[i]!==a3[i]){if(i===0){return Z1(b1,k.groupers[0],x.groupers[0]);}return Z1(c3.byId(_2[i-1]),(i<_2.length)&&c3.byId(_2[i]),(i<a3.length)&&c3.byId(a3[i]));}}return 0;};function $1(e,i){L.info("Set binding context to "+e,"Subsection: "+i.getId());var j=Q(i);j.forEach(function(k){k.setBindingContext(e);});}function _1(e,i,j,k,x,$2){var _2={bWaitForViewportEnter:i,waitFor:{bLayoutFinished:e,bStateApplied:j,bRebindCompleted:k},activeHandler:x||function(a3,b3){if(Q(a3).length&&Q(a3)[0].getBindingContext()===null){$1(undefined,a3);b3.refresh(null,true,true);}},inActiveHandler:$2||function(a3,b3){$1(null,a3);}};return _2;}function a2(e){var i=e.getBlocks()[0];Z.oComponentUtils.onVisibilityChangeOfReuseComponent(true,i);}function b2(e){var i=e.getBlocks()[0];Z.oComponentUtils.onVisibilityChangeOfReuseComponent(false,i);}var c2={lazyLoading:_1(false,true,false,true),lazyLoadingAfterHeader:_1(true,true,false,true),activateAfterHeaderDataReceived:_1(true,false,false,true),activateWithBindingChange:_1(false,false,false,true),reuseComponent:_1(true,true,false,true,a2,b2)};function d2(e,i,j,k){if(k instanceof D){k=k.getMainContent()[0];}else if(!k.getContent){return;}k.getContent().forEach(function(x){if(c.isSmartTable(x)){if(i||e[x.getEntitySet()]){if(x.isInitialised()){Z.oCommonUtils.refreshSmartTable(x,null,j);}else{x.attachInitialise(Z.oCommonUtils.refreshSmartTable.bind(null,x,null,j));}if(!i&&$.getOwnerComponent().getBindingContext()){Z.oServices.oApplicationController.executeSideEffects($.getOwnerComponent().getBindingContext(),[],[x.getTableBindingPath()]);}}}});}function e2(e){return Z.oCommonUtils.getControlInformation(e);}function f2(e){k1.push(e);Z.oCommonUtils.getControlInformation(e,function(i,j){var k=Q(e);c1.initSideContentInfoObject(k[0]);i.refresh=function(_2,a3,b3){var c3=d2.bind(null,_2,a3,b3);k.forEach(c3);};var x=Z.oCommonUtils.getElementCustomData(e).loadingStrategy;var $2=c2[x];i.loadingStrategy=$2||_1(false,false,false,false,Function.prototype,Function.prototype);j.push("subSection");if(!i.loadingStrategy.bWaitForViewportEnter){j.push("subSectionNotWaitingForViewPort");}});}function g2(e){var j=[];for(var i=0;i<e.length;i++){if(e[i].getVisible()){j.push(e[i]);}}return j;}function h2(e){var i=e?e.getSubSections():b1.getSections();var j=g2(i);return j.length===1&&!!(e||h2(j[0]));}function i2(e,i){var j=e.getParent();var k="sapSmartTemplatesObjectPageSubSectionGridExpand",x="sapUxAPObjectPageSubSectionFitContainer";while(j){if(j.isA("sap.ui.layout.Grid")){i?j.addStyleClass(k):j.removeStyleClass(k);}else if(j.isA("sap.uxap.ObjectPageSubSection")){i?j.addStyleClass(x):j.removeStyleClass(x);e.setFitContainer(i);return null;}else{L.warning("Unexpected parent "+j.toString()+" in fnHandleUiTableExpand method");}j=j.getParent();}}function j2(e,i){var j="sapUiSizeCompact",k="sapUiSizeCondensed",x;x=document.body;if(!e.bCondensedTableLayout||!(e.bSetFitContainer||i.hasStyleClass("sapUiSizeCondensed"))){return null;}else if(e.bSetFitContainer&&x.classList.contains(j)){i.addStyleClass(k);}else{i.removeStyleClass(k);}}function k2(e,i,j){if(i.isA("sap.m.Table")){i.setGrowingThreshold(j.growingThreshold);i.setGrowingScrollToLoad(j.bGrowingScrollOnLoad);}else if(i.isA("sap.ui.table.Table")){i2(e,j.bSetFitContainer);j2(j,i);}}function l2(e,i,j){var k={growingThreshold:T[i.getId()],bSetFitContainer:false,bGrowingScrollOnLoad:false};var x=$.getOwnerComponent().mProperties;k.bCondensedTableLayout=x.condensedTableLayout;if(x&&x.sections){var $2=x.sections[j];if($2&&$2.hasOwnProperty("condensedTableLayout")){k.bCondensedTableLayout=$2.condensedTableLayout;}}var _2;if(b1.getUseIconTabBar()){_2=i.getParent();while(_2&&_2.sParentAggregationName!=="sections"){_2=_2.getParent();}}if(h2(_2)){k.growingThreshold=J;k.bGrowingScrollOnLoad=true;k.bSetFitContainer=true;}k2(e,i,k);}function m2(e){var j=b1.getSections().filter(function(a3){return(a3.getTitle()==="Header"||!a3._bInternalVisible)?false:true;});var k;for(var i=0;i<j.length;i++){var x=j[i];var $2=x.getId();var _2=b1.getSelectedSection();if($2===_2){k=(e)?j[(i+1===j.length)?0:i+1]:j[(i===0)?j.length-1:i-1];var j1=k.getId();b1.setSelectedSection(j1);o2(j1);break;}}}function n2(e){var i=e&&e.getParameter("section");var j=i?i.getId():b1.getSelectedSection();var k=e&&e.getParameter("subSection");var x=k&&k.getId();if(j!==j1||x!==l1){L.info("Selected Section: "+j+" and SubSection: "+j);}return{sNewSectionId:j,sNewSubSectionId:x};}function o2(e,i){j1=e;l1=i;Z.oComponentUtils.stateChanged();}function p2(e){var i=n2(e);o2(i.sNewSectionId,i.sNewSubSectionId);}function q2(e,i,j,k,x){var $2=A.createP13NColumnKey(x);var _2=A.getBindingForHiddenPath(x);if(_2==="{= !${} }"){e.push($2);}if(typeof(_2)==="string"){var a3=_2.match(W)&&_2.match(W)[0];if(a3&&a3.indexOf("/")>0&&k.navigationProperty){var b3=$.getOwnerComponent().getEntitySet();var c3=a3.split("/",1)[0];if(j.getODataAssociationSetEnd(k,c3).entitySet===b3){i[$2]=a3.split("/").slice(1).join("/");}}}else if(!_2){e.push($2);}}function r2(b1){var e=b1.getModel("ui");var i=Z.oComponentUtils.getTemplatePrivateModel();var j=i.getProperty("/objectPage/displayMode");var k=e.getProperty("/createMode")||j===4;var x=e.getProperty("/editable")||j===2;var $2;if(k){$2="Create";}else if(x){$2="Edit";}else{$2="Display";}return $2;}function s2(b1,e){if(e==="Display"){var j=b1.getHeaderTitle();var k=j.getActions();for(var i=0;i<k.length;i++){if(k[i].getVisible&&k[i].getVisible()&&k[i].getEnabled&&k[i].getEnabled()){return k[i];}}}else{var x=b1.getSelectedSection();var $2=b1.getUseIconTabBar();if(f1&&!$2){b1.setSelectedSection(null);return u(b1.getDomRef());}var _2=function(d3){b1.setSelectedSection(d3);var e3=d3.getDomRef();var f3=u(e3);if(f3&&f3.type!=="checkbox"){return f3;}return v(e3).firstFocusableDomRef();};var a3=b1.getSections();var b3,c3;for(var i=0;i<a3.length;i++){if(a3[i].getVisible()&&((a3[i].getId()===x)||b3)){b3=a3[i+1]?a3[i+1].getId():undefined;c3=_2(a3[i]);if(c3){break;}}}return c3;}}function t2(b1){var e=$.getOwnerComponent().getModel("_templPrivGlobal");var h1=e.getProperty("/generic/FCL/FCLActionButton");if(!h1){var i=r2(b1);if(document.readyState=='complete'){setTimeout(function(){var j=s2(b1,i);if(j){j.focus();}},0);}}}function u2(e,j,k,x,$2,_2){var a3=[];var b3=Object.create(null);for(var i=0;i<_2.length;i++){var c3=_2[i];q2(a3,b3,x,$2,c3);}if(!s(b3)||a3.length){j.columnHideInfos={staticHiddenColumns:a3,columnKeyToHiddenPath:b3};k.push("smartTableWithColumnHide");}}function v2(e){return e instanceof O?e:e.getParent&&v2(e.getParent());}function w2(e,j,k){j.push("smartTable");j.push("smartControl");e.oControlStateWrapper=H.getControlStateWrapper(k);e.oControlStateWrapper.attachStateChanged(Y.getCurrentState);e.subSection=v2(k);if(k.getUseVariantManagement()){j.push("smartControlWithVariantManagement");e2(e.subSection).loadingStrategy.waitFor.bStateApplied=true;e.afterVariantInitialisePromise=new Promise(function(c3){e.afterVariantInitialiseResolve=c3;});}k=c.isMTable(k)?k.getParent():k;var x=$.getOwnerComponent().getModel().getMetaModel();var $2=x.getODataEntitySet(k.getEntitySet());var _2=x.getODataEntityType($2.entityType);var a3=_2["com.sap.vocabularies.UI.v1.LineItem"];var b3=k.getCustomData();for(var i=0;i<b3.length;i++){if(b3[i].getKey()==="lineItemQualifier"){a3=_2["com.sap.vocabularies.UI.v1.LineItem#"+b3[i].getValue()];break;}}u2(k,e,j,x,_2,a3||[]);}function x2(e){return Z.oCommonUtils.getControlInformation(e,w2);}function y2(e){var i;var j=e.getSource();if(c.isSmartTable(j)){i=x2(j);}else if(c.isSmartChart(j)){i=A2(j);}if(!n1&&!i.afterVariantInitalisedResolve&&!i.bApplyingVariantFromState){Z.oComponentUtils.stateChanged();}}function z2(e,i,j){i.push("smartChart");i.push("smartControl");e.oControlStateWrapper=H.getControlStateWrapper(j);e.oControlStateWrapper.attachStateChanged(Y.getCurrentState);if(j&&j.getUseVariantManagement()){i.push("smartControlWithVariantManagement");e.afterVariantInitialisePromise=new Promise(function(k){e.afterVariantInitialiseResolve=k;});}}function A2(e){return Z.oCommonUtils.getControlInformation(e,z2);}function B2(e,i,j){i.push("searchField");var k=c.isMTable(j.getParent().getParent())?j.getParent().getParent().getParent():j.getParent().getParent();e.table=k;var x=x2(k);x.searchField=j;}function C2(e){return Z.oCommonUtils.getControlInformation(e,B2);}function D2(e){C2(e);}function E2(e){var i=C2(e);i.searchString=e.getSource().getValue();i.table.rebindTable();Z.oCommonUtils.refreshSmartTable(i.table);}function F2(e,i){i.setValue("");if(e.searchString){e.searchString="";e.table.rebindTable();Z.oCommonUtils.refreshSmartTable(e.table);}}function G2(){Z.oCommonUtils.executeForAllInformationObjects("searchField",F2);}function H2(e,i){var j=e.getPath();var k=true;for(var x=0;k;x++){var $2=i.getContextByIndex(x);var _2=$2&&$2.getPath();if(_2===j){return x;}else if(!$2){return-1;}}}function I2(e,j){var k=j.getFirstVisibleRow();var x=j.getVisibleRowCount();var $2=e.getPath();for(var i=0;i<x;i++){if(j.getContextByIndex(k+i).getPath()===$2){return j.getRows()[i];}}}function J2(e,i){var j=e.getTable();if(c.isMTable(j)){return;}function k(){var x=H2(i,j);if(x!==-1){j.setFirstVisibleRow(x);setTimeout(function(){var $2=I2(i,j);var _2=$2&&u($2.getDomRef());if(_2){_2.focus();}},0);}}e.attachEventOnce("dataReceived",k);}function K2(e,i){Z.oCommonEventHandlers.addEntry(e,true).then(J2.bind(null,i));}t.testable(J2,"setFocusOnTableRow");t.testable(I2,"getGridTableRow");t.testable(H2,"getGridTableRowIndexFromContext");function L2(e,i){var j=Z.oCommonUtils.getOwnerControl(i);j=c.isMTable(j)?j.getParent():j;var k=P(j);if(!k){f1=false;g1=true;}if(!i.data("CrossNavigation")&&k){K2(i,j);return;}else if(!i.data("CrossNavigation")&&Z.oComponentUtils.isDraftEnabled()){Z.oCommonEventHandlers.addEntry(i,false);return;}Z.oCommonUtils.fnProcessDataLossOrDraftDiscardConfirmation(function(){Z.oCommonEventHandlers.addEntry(i,false);},Function.prototype,a1.state,(Z.oComponentUtils.isDraftEnabled()&&"NavigateExternal")||undefined);}function M2(e){var i=p.getStableId({type:"ObjectPageAction",subType:"Create",sFacet:e});var j=p.getStableId({type:"ObjectPageAction",subType:"CreateWithDialog",sFacet:e});if(j&&$.byId(j)){var k=$.getOwnerComponent().mProperties&&$.getOwnerComponent().mProperties.sections[e];var x=k&&k.tableSettings&&k.tableSettings.createWithParameterDialog&&k.tableSettings.createWithParameterDialog.fields;}if(!!x&&!s(x)){$.byId(j).setVisible(true);Z.oCommonUtils.executeIfControlReady(e1.createWithDialog.bind(null,$.byId(j)),i);}else{Z.oCommonUtils.executeIfControlReady(L2.bind(null,undefined),i);}}function N2(e,i){var j=i.getId();if(!i1[j]){i1[j]=i.getDataStateIndicator?i.getDataStateIndicator():i.getParent().getDataStateIndicator();}var k=b1.getModel("ui");return k.getProperty("/editable");}function O2(){var e=$.getOwnerComponent().getModel("ui");e.bindProperty("/editable").attachChange(function(){var i=i1;i1=Object.create(null);for(var k in i){var j=i[k];j.refresh();}});}function P2(e){Q2(e);}function Q2(e){var i=e.getId();var j="";var k={search:false,filter:false};var x=e.fetchVariant();if(x&&x.filter&&x.filter.filterItems.length>0){k.filter=true;}var $2=e.getToolbar().getContent().filter(function(_2){return _2.sId===e.getToolbar().getId()+'::SearchField';});if($2.length>0&&$2[0].getValue().trim()!==""){k.search=true;}if(k.search||k.filter){j=Z.oCommonUtils.getContextText("NOITEMS_SMARTTABLE_WITH_FILTER",i);}else{j=Z.oCommonUtils.getContextText("NOITEMS_SMARTTABLE",i);}e.setNoData(j);}function R2(e){var i=[];if(e.fetchVariant()&&e.fetchVariant().filter&&e.fetchVariant().filter.filterItems){i=e.fetchVariant().filter.filterItems;}var j=e.getId();var k="";var x={search:false,filter:false};if(i&&i.length){x.filter=true;}var $2=e.getToolbar().getContent().filter(function(_2){return _2.sId===e.getToolbar().getId()+'::SearchField';});if($2.length>0&&$2[0].getValue().trim()!==""){x.search=true;}if(x.search||x.filter){k=Z.oCommonUtils.getContextText("NOITEMS_SMARTCHART_WITH_FILTER",j);}else{k=Z.oCommonUtils.getContextText("NOITEMS_SMARTCHART",j);}e.getChartAsync().then(function(_2){_2.setCustomMessages({NO_DATA:k});});}Y.refreshFacets=function(e){var i=function(j){var k=e2(j);k.refresh(e,false);};b1.getSections().forEach(function(j){j.getSubSections().forEach(i);});};Y.onComponentActivate=a1.onComponentActivate;Y.getCurrentState=function(){var e=Object.create(null);var i=$.getOwnerComponent().getAppComponent().getStatePreservationMode()==="persistence";function j(d3){return{data:d3,lifecycle:{permanent:true,pagination:i,page:i,session:true}};}if(j1){e.section=j(j1);}if(l1){e.subSection=j(l1);}var k={};Z.oCommonUtils.executeForAllInformationObjects("smartControl",function(d3,e3){k[e3.getId()]=d3.oControlStateWrapper.getState();});if(!s(k)){e.smartControls=j(k);}var x=c1.getCurrentState();if(x){e.sideContent=j(x);}var $2=d1.getCurrentState();if($2){e.multipleViews=j($2);}var _2=Object.create(null);$.provideCustomStateExtension(_2);for(var a3 in _2){e["$custom$"+a3]=_2[a3];}var b3=true;var c3=function(d3,e3){if(!(d3 instanceof C)){throw new w(I,"State must always be set with respect to a ControllerExtension");}if(!b3){throw new w(I,"State must always be provided synchronously");}var f3=d3.getMetadata().getNamespace();if(e3){for(var g3 in e3){e["$extension$"+f3+"$"+g3]=e3[g3];}}};$.templateBaseExtension.provideExtensionStateData(c3);b3=false;return e;};function S2(){o1={bLayoutFinished:false,bStateApplied:false,bRebindCompleted:false};p1=true;}function T2(e){o1[e]=true;V2();}function U2(e){var i=true;for(var j in e.waitFor){if(e.waitFor[j]&&!o1[j]){i=false;break;}}return i;}function V2(){var e=p1?"subSectionNotWaitingForViewPort":"subSection";Z.oCommonUtils.executeForAllInformationObjects(e,function(i,j){var k=U2(i.loadingStrategy);if(k){i.loadingStrategy.activeHandler(j,i);}});if(p1){b1._triggerVisibleSubSectionsEvents();}}function W2(){if(n1){n1();n1=null;T2("bStateApplied");}}function X2(){T2("bLayoutFinished");}function Y2(){N(b1);X2();}Y.applyState=function(_,e){var k=Z.oComponentUtils.getHeaderDataAvailablePromise()||Promise.resolve();k.then(function(){var $2=null;var _2=Object.create(null);var a3=Object.create(null);for(var b3 in _){if(b3.indexOf("$custom$")===0){_2[b3.substring(8)]=_[b3];}else if(b3.indexOf("$extension$")===0){var c3=b3.substring(11,b3.indexOf("$",11));var d3=a3[c3];if(!d3){d3=Object.create(null);a3[c3]=d3;}var e3=b3.substring(b3.indexOf("$",11)+1,b3.length);d3[e3]=_[b3];}}$.applyCustomStateExtension(_2,e);var f3=true;var g3=function(n3){if(!(n3 instanceof C)){throw new w(I,"State must always be retrieved with respect to a ControllerExtension");}if(!f3){throw new w(I,"State must always be restored synchronously");}var c3=n3.getMetadata().getNamespace();return a3[c3];};$.templateBaseExtension.restoreExtensionStateData(g3,e);f3=false;var h3=$.getOwnerComponent();var i3=h3.getAppComponent().getObjectPageHeaderType();var j3=h3.getModel("_templPrivGlobal");h1=j3.getProperty("/generic/FCL/FCLActionButton");if(h1===1){var k3=b1.getHeaderTitle();var l3=(i3==="Dynamic"?k3.getNavigationActions():k3.getActions());if(l3&&l3.length){for(var i=0;i<l3.length;i++){if(l3[i].getId&&l3[i].getId().indexOf("template::FCLActionButtons")>0){var m3=l3[i].getItems();for(var j=0;j<m3.length;j++){if((m3[j].getId().toUpperCase().indexOf("FULLSCREEN")>0)&&m3[j].getVisible&&m3[j].getVisible()){$2=m3[j];}}}}}setTimeout(function(){j3.setProperty("/generic/FCL/FCLActionButton",0);h1=j3.getProperty("/generic/FCL/FCLActionButton");if($2){$2.focus();}},0);}});c1.applyState(_.sideContent,e);d1.applyState(_.multipleViews,e);Z.oCommonUtils.executeForAllInformationObjects("smartControl",function(i,j){i.oControlStateWrapper.setState(_.smartControls&&_.smartControls[j.getId()]);});if(e){if(j1!==(_.section||"")){Z.oComponentUtils.stateChanged();}W2();X2();return;}G2();if(_.section){j1=_.section;L.info("Restoring Selected Section: "+j1);b1.setSelectedSection(j1);if(_.subSection){var x;k1.some(function(i){if(i.getId()===_.subSection){x=i;return true;}return false;});if(x){x.getParent().setSelectedSubSection(x);}l1=_.subSection;L.info("Restoring Selected Subsection: "+l1);}X2();}else{Promise.all([k,Z.oComponentUtils.getNavigationFinishedPromise()]).then(Y2);j1="";}W2();};Y.beforeRebind=function(e){q1=Object.create(null);S2();e.then(function(){T2("bRebindCompleted");});if(!n1){m1=new Promise(function(i){n1=i;});}Z.oCommonUtils.executeForAllInformationObjects("subSection",function(i,j){i.loadingStrategy.inActiveHandler(j);});};Y.afterRebind=function(){L.info("Call of _triggerVisibleSubSectionsEvents (afterRebind)");b1._triggerVisibleSubSectionsEvents();};Y.applyHeaderContextToSmartTablesDynamicColumnHide=function(e){var i=e.getModel();var j=function(k,x,$2){if(s(x.columnHideInfos.columnKeyToHiddenPath)){return;}var _2=x.columnHideInfos.staticHiddenColumns.slice();var a3=k&&j.bind(null,false,x,$2);for(var b3 in x.columnHideInfos.columnKeyToHiddenPath){var c3=x.columnHideInfos.columnKeyToHiddenPath[b3];if(e.getProperty(c3)){_2.push(b3);}if(a3){var d3=i.bindProperty(c3,e);d3.attachChange(a3);}}$2.deactivateColumns(_2);};Z.oCommonUtils.executeForAllInformationObjects("smartTableWithColumnHide",j.bind(null,true));};var K1=t.testable(K1,"editEntity");var M1=t.testable(M1,"isEntryDeletable");var s1=t.testable(s1,"onActivateImpl");var t1=t.testable(t1,"onSaveImpl");t.testable(function(){return m1;},"getStateAppliedPromise");var Z2={onInit:function(){b1=$.byId("objectPage");O2();var e=$.getOwnerComponent();m1=new Promise(function(i){n1=i;});S2();var j=b1.getSections();for(var k=0;k<j.length;k++){var x=j[k];var k1=x.getSubSections();k1.forEach(f2);}var $2=y1();var _2=e.getAppComponent();var a3=_2.getObjectPageHeaderType()==="Dynamic";Y.aBreadCrumbs=$2&&(a3?$2.getBreadcrumbs().getLinks():$2.getBreadCrumbsLinks());(Y.aBreadCrumbs||[]).forEach(function(g3,i){Z.oComponentUtils.registerAncestorTitleUpdater(g3,"text",i+1);});if(a3){S1();}var b3=function(){p1=false;V2();};a1.onInit(null,b3,X1,W1);T1();Z.oCommonUtils.executeGlobalSideEffect();b1.attachEvent("subSectionEnteredViewPort",function(i){var g3=i.getParameter("subSection");L.info("Viewport entered ","Subsection: "+g3.getId());var h3=e2(g3);var i3=h3.loadingStrategy;var j3=U2(h3.loadingStrategy);if(j3){i3.activeHandler(g3,h3);}});e1=new y(_,$,Z);_.oCreateWithDialogHandler=e1;d1=new l($,Z,Z.oComponentUtils.stateChanged);_.oMultipleViewsHandler=d1;var c3=Z.oComponentUtils.getTemplatePrivateModel();c3.setProperty("/objectPage/aPasteAttachedTables",[]);c3.setProperty("/objectPage/mHandleEnabledTableToolbar",[]);Z.oComponentUtils.attach($,"PageDataLoaded",function(i){if(b1&&!h1){var g3=r2(b1);if(g3==="Create"&&g1!==true){f1=true;}else if((Z.oComponentUtils.isDraftEnabled()&&g3==="Create"&&g1===true)||(!Z.oComponentUtils.isDraftEnabled()&&g3==="Display"&&g1===true)){g1=false;}t2(b1);}G.resetPlaceHolders(Z);});function d3(i){if(i.tableSettings){var g3=$.byId(p.getStableId({type:"ObjectPageTable",subType:"SmartTable",sFacet:i.additionalData.facetId}));if(g3){x2(g3);}}else if(i.chartSettings){var h3=$.byId(i.additionalData.facetId+"::Chart");if(h3){A2(h3);}}}function e3(i){var g3=$.byId(i);if(g3){z.waitForChanges({element:g3}).then(function(){Z.oCommonUtils.setPrivateModelControlProperty(i,'visible',g3.getGroups().length>0);});}}var f3=Z.oComponentUtils.getParameterModelForTemplating().getObject("/templateSpecific/sections");f3.forEach(function(i){i.subSections.forEach(function(g3){g3.blocks.forEach(d3);g3.moreBlocks.forEach(d3);e3(g3.dummyFormId);e3(g3.dummyFormIdMoreBlocks);});});},handlers:{onEditAndActiveToggle:function(e,i){Z.oServices.oApplication.performAfterSideEffectExecution(function(){var j=Z.oServices.oApplication.getBusyHelper();if(j.isBusy()){return;}var k=e.getBindingContext();var x=Z.oServices.oApplication.getDraftSiblingPromise(k);j.setBusy(x.then(function($2){if(i){L.info("Navigating to draft entity");I1($2,true);}else{L.info("Navigating to active entity");Z.oServices.oApplication.navigateToSubContext($2,true,1);}g(':focus').blur();}));});},onAfterVariantInitialise:function(e){var i=e.getSource();var j;if(c.isSmartTable(i)){j=x2(i);}else if(c.isSmartChart(i)){j=A2(i);}if(j.afterVariantInitialiseResolve){j.afterVariantInitialiseResolve();delete j.afterVariantInitialiseResolve;}},onAfterVariantSave:function(e){y2(e);},onAfterVariantApply:function(e){y2(e);},addEntry:M2,onCancelCreateWithPopUpDialog:function(){e1.onCancelPopUpDialog();},onSaveCreateWithPopUpDialog:function(e){e1.onSavePopUpDialog(e);},submitChangesForSmartMultiInput:function(){if(Z.oComponentUtils.isDraftEnabled()){Z.oCommonEventHandlers.submitChangesForSmartMultiInput();}},contextEditableChanged:function(e){var i=e.getSource();var j=i.getBindingInfo('editable');if(j&&j.binding&&j.binding.getValue&&!j.binding.getValue()){i.setEditable(false);}},deleteEntry:function(e){var i=e.getParameter('listItem');var j=i.getBindingContext();var k=Z.oCommonUtils.getOwnerControl(e.getSource());if(!c.isSmartTable(k)){k=k.getParent();}var x=[j];var $2=e.getSource().getId();Q1(k,x,$2);},deleteEntries:function(e){var i=p.getStableId({type:"ObjectPageAction",subType:"Delete",sFacet:e});Z.oCommonUtils.executeIfControlReady(P1,i);},onSelectionChange:function(e){var i=Z.oComponentUtils.getTemplatePrivateModel();var j=i.getProperty("/objectPage/mHandleEnabledTableToolbar");if(!j[e.getSource().getId()]){j[e.getSource().getId()]=true;}Z.oCommonUtils.setEnabledToolbarButtons(e.getSource());},onMultiSelectionChange:function(e){Z.oCommonEventHandlers.onMultiSelectionChange(e);},onCancel:function(e){var i=e.getSource();var j=a1.state.onCancel(i);j.then(function(){G1();if(!Z.oComponentUtils.isDraftEnabled()){t2(b1);var k=Z.oComponentUtils.getTemplatePrivateModel();var x=k.getProperty("/objectPage/mHandleEnabledTableToolbar");for(var $2 in x){if(x[$2]){Z.oCommonUtils.setEnabledToolbarButtons($.byId($2));delete x[$2];}}}},Function.prototype);},onContactDetails:function(e){Z.oCommonEventHandlers.onContactDetails(e);},onSmartFieldInitialise:function(e){var i=this.getView().getId();Z.oCommonEventHandlers.onSmartFieldInitialise(e,i);},onPressDraftInfo:function(e){var i=$.getView().getBindingContext();var j=sap.ui.getCore().byId(e.getSource().getId()+(e.getId()==="markChangesPress"?"-changes":"-lock"));Z.oCommonUtils.showDraftPopover(i,j);},onPressDraftInfoObjectPageDynamicHeaderTitle:function(e){var i=$.getView().getBindingContext();var j=$.byId("template::ObjectPage::ObjectMarkerObjectPageDynamicHeaderTitle");Z.oCommonUtils.showDraftPopover(i,j);},onShareObjectPageActionButtonPress:function(e){Z.oCommonUtils.executeIfControlReady(z1,"template::Share");},onRelatedApps:function(e){var x,$2,_2,a3,b3,c3,d3;var e3,f3,g3,h3,i3;var j3=[];x=e.getSource();g3=sap.ushell&&sap.ushell.Container;$2=g3&&g3.getService("URLParsing");_2=$2.parseShellHash(document.location.hash);h3=_2.semanticObject;i3=_2.action;a3=$.getView&&$.getView().getBindingContext();var k3=Z.oComponentUtils.getSettings();var l3=$.getOwnerComponent().getModel().getMetaModel();var m3=a3.getObject();var n3=m3.__metadata.type;var o3=l3.getODataEntityType(n3);var p3=o3["com.sap.vocabularies.Common.v1.SemanticKey"];var q3={};if(p3&&p3.length>0){for(var j=0;j<p3.length;j++){var r3=p3[j].PropertyPath;if(!q3[r3]){q3[r3]=m3[r3];}}}else{for(var k in o3.key.propertyRef){var s3=o3.key.propertyRef[k].name;if(!q3[s3]){q3[s3]=m3[s3];}}}b3=$.getOwnerComponent().getAppComponent();c3=g3&&g3.getService("CrossApplicationNavigation");if(k3.relatedAppsSettings&&Object.keys(k3.relatedAppsSettings).length>0){var t3=[{semanticObject:h3}];j3.push(t3);for(var i=0;i<Object.keys(k3.relatedAppsSettings).length;i++){if(k3.relatedAppsSettings[i].semanticObject!==h3){t3=[{semanticObject:k3.relatedAppsSettings[i].semanticObject}];j3.push(t3);}}d3=c3.getLinks(j3);}else{d3=c3.getLinks({semanticObject:h3,params:q3,ui5Component:b3});}A1().then(function(u3){e3=u3;f3=e3.getModel("buttons");f3.setProperty("/buttons",[]);e3.openBy(x);d3.done(function(v3){var w3=[],x3=[],y3;var z3=o3["com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions"];var A3=[];if(z3){for(var i=0;i<z3.length;i++){A3.push(z3[i].String);}}for(var i=0;i<o3.property.length;i++){if(o3.property[i]["com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions"]){var B3=o3.property[i]["com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions"].length;for(var j=0;j<B3;j++){A3.push(o3.property[i]["com.sap.vocabularies.Common.v1.SemanticObjectUnavailableActions"][j].String);}}}y3=Z.oComponentUtils.getSettings().relatedAppsSettings;if(y3&&Object.keys(y3).length>0){for(var i=0;i<v3.length;i++){for(var j=0;j<v3[i].length;j++){for(var k=0;k<v3[i][j].length;k++){x3.push(v3[i][j][k]);}}}v3=x3;}v3.sort(function(G3,H3){if(G3.text<H3.text){return-1;}if(G3.text>H3.text){return 1;}return 0;});for(var i=0;i<v3.length;i++){var C3=v3[i];var D3=C3.intent;var E3=D3.split("-")[0].split("#")[1];var F3=D3.split("-")[1].split("?")[0];if((E3===h3?F3!==i3:true)&&A3.indexOf(F3)==-1){w3.push({enabled:true,text:C3.text,link:C3,param:q3});}}if(w3.length===0){w3.push({enabled:false,text:Z.oCommonUtils.getText("NO_RELATED_APPS")});}f3.setProperty("/buttons",w3);});});},onEdit:function(e){var j=$.byId("edit");var b1=$.byId("objectPage");var k=b1.getSelectedSection();var x=b1.getSections()||[];for(var i=0;i<x.length;i++){if(x[i].getVisible()&&x[i]._bInternalVisible!==false){if(x[i].getId()===k){f1=true;}else{f1=false;}break;}}if(j.data("CrossNavigation")){Z.oCommonEventHandlers.onEditNavigateIntent(j);return;}Z.oCommonUtils.executeIfControlReady(K1,"edit");},onSave:w1,onSaveAndContinueEdit:v1,onBreadCrumbUrlPressed:U1,onDelete:H1,onCallActionFromToolBar:function(e){Z.oCommonEventHandlers.onCallActionFromToolBar(e,a1.state);},onCallAction:function(e,i,j){Z.oServices.oApplication.performAfterSideEffectExecution(function(){var k=$.getView().getBindingContext();if(k){Z.oServices.oDataLossHandler.performIfNoDataLoss(function(){var x=$.getOwnerComponent();var $2=x.getEntitySet();var _2={functionImportPath:e,contexts:[k],sourceControl:"",label:i,operationGrouping:j};Z.oServices.oCRUDManager.callAction(_2).then(function(a3){var b3=a3&&a3[0];if(b3&&b3.context&&(!b3.actionContext||b3.actionContext&&b3.context.getPath()!==b3.actionContext.getPath())){Z.oServices.oViewDependencyHelper.setParentToDirty(x,$2,1);}});},Function.prototype,a1.state,"Proceed");}},true);},onDataFieldForIntentBasedNavigation:function(e){e=n({},e);Z.oServices.oApplication.performAfterSideEffectExecution(function(){Z.oCommonUtils.fnProcessDataLossOrDraftDiscardConfirmation(function(){Z.oCommonEventHandlers.onDataFieldForIntentBasedNavigation(e,a1.state);},Function.prototype,undefined,(Z.oComponentUtils.isDraftEnabled()&&"NavigateExternal")||undefined);},true);},onDataFieldWithIntentBasedNavigation:function(e){Z.oCommonEventHandlers.onDataFieldWithIntentBasedNavigation(e,a1.state);},onDataFieldWithNavigationPath:function(e){Z.oCommonEventHandlers.onDataFieldWithNavigationPath(e);},onChartInit:function(e){var i=e.getSource();A2(i);i.getChartAsync().then(function(j){if(B.browser.safari){i.setHeight("50vH");}var k=$._templateEventHandlers.onSelectionChange;j.attachSelectData(k).attachDeselectData(k);Z.oCommonUtils.checkToolbarIntentsSupported(i);});},onDataRequested:function(i){L.info("Data requested (SmartTable: "+i+")");d1.onDataRequested(i);},onDataReceived:function(e){Z.oCommonEventHandlers.onDataReceived(e);},onBeforeRebindDetailTable:function(e){var i=e.getSource();e.mParameters.bindingParams.events["dataReceived"]=P2.bind(null,i);i.setNoData(Z.oCommonUtils.getText("WAITING_SMARTTABLE"));var j=r1(e);var k=x2(i);var x=k.searchField;if(x){var $2=Z.oCommonUtils.getControlInformation(x);if($2.searchString){j.parameters.custom={search:$2.searchString};}}Z.oCommonEventHandlers.onBeforeRebindTable(e,{ensureExtensionFields:$.templateBaseExtension.ensureFieldsForSelect,addExtensionFilters:$.templateBaseExtension.addFilters,isFieldControlRequired:true,isPopinWithoutHeader:true,isDataFieldForActionRequired:true,isFieldControlsPathRequired:true,isMandatoryFiltersRequired:true});$.onBeforeRebindTableExtension(e);d1.onRebindContentControl(i.getId(),j);x1(e);if(c.isAnalyticalTable(i.getTable())){j.parameters.entitySet=i.getEntitySet();}},onListNavigate:function(e){Z.oCommonEventHandlers.onListNavigate(e,a1.state);},onBeforeSemanticObjectLinkPopoverOpens:function(e){var i=L1();Z.oCommonUtils.semanticObjectLinkNavigation(e,i,$,_);},onBeforeSemanticObjectLinkNavigationCallback:function(){return new Promise(function(e){Z.oCommonUtils.fnProcessDataLossOrDraftDiscardConfirmation(function(){e(true);},function(){e(false);},undefined,(Z.oComponentUtils.isDraftEnabled()&&"NavigateExternal")||undefined);});},onSemanticObjectLinkNavigationPressed:function(e){var i=e.getParameters();var j=e.getSource();Z.oCommonEventHandlers.onSemanticObjectLinkNavigationPressed(j,i);},onSemanticObjectLinkNavigationTargetObtained:function(e){var i=e.getParameters();var j=e.getSource();Z.oCommonEventHandlers.onSemanticObjectLinkNavigationTargetObtained(j,i,a1.state);},onSemanticObjectLinkNavigationTargetObtainedSmartLink:function(e){var i,j;i=e.getParameters();j=e.getSource();while(j.getMetadata().getName()!=="sap.ui.comp.smarttable.SmartTable"&&j.getParent()){j=j.getParent();}Z.oCommonEventHandlers.onSemanticObjectLinkNavigationTargetObtained(j,i,a1.state);},onHeaderImagePress:function(e){if(e.getSource().getSrc()===""){return;}var i=e.getSource().getId();var j=e.getSource().getSrc();R1().then(function(k){if(k.getAriaLabelledBy()&&k.getAriaLabelledBy().indexOf(i)===-1){k.addAriaLabelledBy(i);}var x=k.getModel("headerImage");x.setProperty("/src",j);if(sap.ui.Device.system.phone){k.setProperty("stretch",true);}k.open();});},sectionChange:p2,onSwitchTabs:m2,onInlineDataFieldForAction:function(e){Z.oCommonEventHandlers.onInlineDataFieldForAction(e,a1.state);},onInlineDataFieldForIntentBasedNavigation:function(e){Z.oCommonEventHandlers.onInlineDataFieldForIntentBasedNavigation(e.getSource(),a1.state);},onDeterminingDataFieldForAction:function(e){Z.oCommonEventHandlers.onDeterminingDataFieldForAction(e);},onBeforeRebindChart:function(e){r1(e);var i=e.getSource();R2(i);i.getChartAsync().then(function(k){i.oModels=k.oPropagatedProperties.oModels;});var j={ensureExtensionFields:Function.prototype,addExtensionFilters:$.templateBaseExtension.addFilters,isFieldControlRequired:true,isMandatoryFiltersRequired:true};Z.oCommonUtils.onBeforeRebindTableOrChart(e,j);},onToggleDynamicSideContent:c1.onToggleDynamicSideContent,sideContentBreakpointChanged:c1.sideContentBreakpointChanged,onTableInit:function(e,i){var j=e.getSource();var k=j.getTable();var x=x2(j);if(x.columnHideInfos){j.deactivateColumns(x.columnHideInfos.staticHiddenColumns);}Z.oCommonUtils.checkToolbarIntentsSupported(j);var $2=function(){if(k.isA("sap.m.Table")||k.isA("sap.ui.table.Table")){if(k.isA("sap.m.Table")&&!T[k.getId()]){T[k.getId()]=k.getGrowingThreshold&&k.getGrowingThreshold();}l2(j,k,i);}};b1.attachEvent("subSectionVisibilityChange",$2);$2();if(P(j)&&!j.data("CrossNavigation")){k.addEventDelegate({onkeyup:function(e){if(e.ctrlKey&&e.keyCode===K.ENTER&&j.getEditable()){K2(j,j);e.preventDefault();e.setMarked();}}});}var _2=Z.oComponentUtils.getTemplatePrivateModel();if(P(j)){k.addEventDelegate({onAfterRendering:function(e){var a3;if(j.getEditable()&&!j.hasListeners("paste")){j.attachBeforePaste(E1);j.attachPaste(F1);a3=_2.getProperty("/objectPage/aPasteAttachedTables");if(a3){a3.push(i);}}}});}},onPasteButtonPress:function(e){var i=Z.oCommonUtils.getText("DATA_PASTE_ACTION_MESSAGE");M.information(i);},onSearchObjectPage:E2,onSearchLiveChange:D2,onSmartTablePaste:F1,onUITableExpand:i2,onSingleSectionOrSubsectionVisible:h2,dataStateFilter:N2},formatters:{sideContentActionButtonText:c1.formatSideContentActionButtonText,setNoDataTextForSmartTable:function(e){if(Z.oCommonUtils&&e){var i=Z.oCommonUtils.getContextText("WAITING_SMARTTABLE",e);if(i!=="WAITING_SMARTTABLE"){return i;}return"";}},setVMVisibilityForVendor:function(){var e=new U(window.location.href);if(e.mParams["sap-ui-layer"]){var j=e.mParams["sap-ui-layer"];for(var i=0;i<j.length;i++){if(j[i].toUpperCase()==="VENDOR"){return true;}}}return false;},formatItemTextForMultipleView:function(i){return i&&d1?d1.formatItemTextForMultipleView(i):"";}},extensionAPI:new E(Z,$,a1,_)};Z2.handlers=r(a1.handlers,Z2.handlers);return Z2;}};return X;});
