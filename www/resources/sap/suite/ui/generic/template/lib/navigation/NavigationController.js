/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/base/Object","sap/base/util/merge","sap/base/util/extend","sap/base/util/isEmptyObject","sap/base/util/UriParameters","sap/ui/core/ComponentContainer","sap/ui/core/routing/HashChanger","sap/ui/core/routing/History","sap/ui/core/library","sap/suite/ui/generic/template/genericUtilities/FeError","sap/suite/ui/generic/template/genericUtilities/FeLogger","sap/suite/ui/generic/template/genericUtilities/oDataModelHelper","sap/suite/ui/generic/template/genericUtilities/ProcessObserver","sap/suite/ui/generic/template/genericUtilities/Queue","sap/suite/ui/generic/template/genericUtilities/testableHelper","sap/suite/ui/generic/template/lib/CRUDHelper","sap/suite/ui/generic/template/lib/navigation/routingHelper","sap/suite/ui/generic/template/lib/navigation/startupParameterHelper","sap/suite/ui/generic/template/lib/TemplateComponent","sap/ui/fl/ControlPersonalizationAPI","sap/suite/ui/generic/template/js/placeholderHelper"],function(B,m,e,a,U,C,H,b,c,F,d,D,P,Q,t,f,r,s,T,g,p){"use strict";var h="lib.navigation.NavigationController";var l=new d(h).getLogger();var k=c.routing.HistoryDirection;var o=b.getInstance();function n(i){i=i||o.getDirection();return i===k.Backwards;}var q=r.getCrossAppNavService();var A="sap-iapp-state--create";var u="sap-iapp-state--history";function v(R){var i=R.substring(R.length-5,R.length);if(i==="query"){return R.substring(0,R.length-5);}return R;}function N(i){if(i.indexOf("/")===0){return i;}return"/"+i;}function w(j){var G="";var R="";var I=Object.keys(j).sort();I.forEach(function(J){var V=j[J];if(Array.isArray(V)){var K=V.sort();for(var i=0;i<K.length;i++){var L=K[i];R=R+G+J+"="+L;G="&";}}else{R=R+G+J+"="+V;G="&";}});return R;}function x(i,j){i=i||"";var G=(i.charAt(i.length-1)==="/")?"?":"/?";return i+(j?G+j:"");}function y(G,I){var S=[];var J=q.createEmptyAppState(G.oAppComponent,true);var K=J.getKey();var L;var M;var O;var R;var V;var W,X;var Y;var Z;var $;var _;var a1=Promise.resolve();var b1=(new Q()).start();function c1(i){var j=i.iHashChangeCount+1;X={iHashChangeCount:j,backTarget:i.iHashChangeCount,componentsDisplayed:Object.create(null),LeaveByBack:true,backSteps:1};}function d1(i){Z=false;G.oBusyHelper.setBusyReason("HashChange",true);$={};M=n();if(M){G.oBusyHelper.getUnbusy().then(function(){M=false;});Y={mode:-1};if(S.length){var j=S.pop();R=j.isInitialNavigation;O=j.myIntentPromise;V=j.previousHashes;V.push(j.currentHash);c1(j.currentHash);return;}}else{R=!q||q.isInitialNavigation();}G.myIntentPromise=sap.ushell&&sap.ushell.renderers&&sap.ushell.Container&&new Promise(function(_2){sap.ushell.Container.getServiceAsync("AppLifeCycle").then(function(a3){var b3=a3.getCurrentApplication();var c3=function(){b3=b3||a3.getCurrentApplication();var d3=b3.getIntent();_2(d3);};if(b3){c3();}else{a3.attachAppLoaded(null,c3);}});});O=G.myIntentPromise?Promise.all([G.myIntentPromise,sap.ushell.Container.getServiceAsync("URLParsing")]).then(function(_2){var a3=e({},_2[0]);var b3=_2[1];a3.appSpecificRoute="&/";var c3=b3.constructShellHash(a3);return"#"+c3;}):Promise.resolve("");i1();if(i){var Z2=!M&&!I.oHashChanger.getHash()&&G.oAppComponent.getComponentData();var $2=Z2&&Z2.startupParameters;if($2){s.parametersToNavigation(G,$2).then(function(_2){if(_2){W={treeNode:G.mRoutingTree.root,keys:[],appStates:Object.create(null)};t2(_2);}I.initialize(!!_2);});}else{I.initialize();}}}var e1=Promise.resolve();var f1=Promise.resolve();var g1=new P();function h1(){var i=n();if(!i){S.push({isInitialNavigation:R,myIntentPromise:O,currentHash:X,previousHashes:V});}O=null;X=null;V=null;W=null;_=null;$=null;}function i1(){X={iHashChangeCount:0,backTarget:0,componentsDisplayed:Object.create(null)};W=null;V=[];Y=null;_=null;}function j1(){G2(G.mRoutingTree.root.sRouteName);return G.mRoutingTree.root.componentCreated;}function k1(){return I.oAppComponent.getManifestEntry("sap.app").title;}function l1(){return I.oAppComponent.getProperty('draftDiscardConfirmationSettings').enabled;}function m1(){var i=sap.ushell&&sap.ushell.Container;return i&&i.getServiceAsync("URLParsing");}function n1(i,j,Z2){if(!i){return Promise.resolve();}var $2=i&&G.componentRegistry[i];var _2=[];var a3=$2&&$2.methods.getUrlParameterInfo;if(a3){_2.push($2.viewRegistered.then(function(){var b3=j&&N(j);return a3(b3,X.componentsDisplayed[$2.route]===1).then(function(c3){e(Z2,c3);});}));}_2.push($2.oStatePreserverPromise.then(function(b3){var c3=j&&N(j);return b3.getUrlParameterInfo(c3,X.componentsDisplayed[$2.route]===1).then(function(d3){e(Z2,d3);});}));return Promise.all(_2);}function o1(i){var j=i.treeNode.componentId;var Z2=i.treeNode.getPath(2,i.keys);var $2=i.appStates;return n1(j,Z2,$2);}function p1(i,j){if(i.treeNode===j.treeNode){j.appStates=i.appStates;return Promise.resolve();}j.appStates=Object.create(null);if(j.treeNode.fCLLevel===0||j.treeNode.fCLLevel===3){return o1(j);}return G.oFlexibleColumnLayoutHandler.getAppStatesPromiseForNavigation(W,j);}function q1(i,j,Z2){var $2=G.mRoutingTree[i];return n1($2.componentId,Z2,j);}function r1(i,j){var Z2;if(!i&&j instanceof T){var $2=j&&G.componentRegistry[j.getId()];var _2=$2&&$2.methods.getTitle;Z2=_2&&_2();}else if(!i&&j&&j.title){Z2=j.title;}Z2=Z2||k1();G.oShellServicePromise.then(function(a3){a3.setTitle(Z2);}).catch(function(){l.warning("No ShellService available");});}function s1(i){var j=[G.oPagesDataLoadedObserver.getProcessFinished(true)];var Z2=null;var $2=X.iHashChangeCount;delete W.componentsDisplayed;var _2=-1;for(var a3 in G.componentRegistry){var b3=G.componentRegistry[a3];var c3=b3.oControllerUtils&&b3.oControllerUtils.oServices.oTemplateCapabilities.oMessageButtonHelper;var d3=X.componentsDisplayed[b3.route]===1;var e3=b3.utils.getTemplatePrivateModel();e3.setProperty("/generic/isActive",d3);if(d3){j.push(b3.oViewRenderedPromise);if(b3.viewLevel>_2){_2=b3.viewLevel;Z2=b3.oComponent;}}else{b3.utils.suspendBinding();}if(c3){c3.setEnabled(d3);}}var f3=a(X.componentsDisplayed)||(G.oFlexibleColumnLayoutHandler&&G.oFlexibleColumnLayoutHandler.isAppTitlePrefered());r1(f3,i||Z2);Promise.all(j).then(function(){if($2===X.iHashChangeCount&&a($)){G.oAppComponent.firePageDataLoaded();}});}var t1=s1.bind(null,null);t.testable(function(i){W=i;V.push(X);X={backTarget:0,componentsDisplayed:Object.create(null)};},"setCurrentIdentity");t.testable(function(i){K=i;},"setHistoryKey");function u1(){return W;}function v1(j,Z2){if(Array.isArray(j)&&j.length<2){j=j[0];}if(Array.isArray(Z2)&&Z2.length<2){Z2=Z2[0];}if(Array.isArray(j)){if(Array.isArray(Z2)){if(j.length===Z2.length){j=j.sort();Z2=Z2.sort();return j.every(function($2,i){return $2===Z2[i];});}return false;}return false;}return Z2===j;}function w1(i,j){if(!i||i.treeNode!==j.treeNode){return false;}for(var Z2=j.treeNode;Z2.level>0;Z2=G.mRoutingTree[Z2.parentRoute]){if(!Z2.noKey&&j.keys[Z2.level]!==i.keys[Z2.level]){return false;}}if(a(i.appStates)){return a(j.appStates);}var $2=e(Object.create(null),j.appStates,i.appStates);for(var _2 in $2){var a3=(_2===u)?K:j.appStates[_2];if(!v1(a3,i.appStates[_2])){return false;}}return true;}function x1(i){return w1(W,i);}function y1(i,j,Z2){var $2=Object.create(null);for(var _2=i;_2.level>0;_2=G.mRoutingTree[_2.parentRoute]){if(!_2.noKey){$2["keys"+_2.level]=j[_2.level];}}var a3=!a(Z2);var b3=i.sRouteName+(a3?"query":"");if(a3){$2["query"]=Z2;}return{route:b3,parameters:$2};}function z1(i){var j=y1(Y.identity.treeNode,Y.identity.keys,Y.identity.appStates);if(!G.ghostapp){I.oRouter.navTo(j.route,j.parameters,i);}}function A1(i){if(!i||!Y.identity){return;}var j=function($2,_2,a3){a3=_2?_2.getId():a3;var b3=G.componentRegistry[a3];(b3.methods.presetDisplayMode||Function.prototype)(i,$2);};for(var Z2=Y.identity.treeNode;Z2;Z2=Z2.parentRoute&&G.mRoutingTree[Z2.parentRoute]){if(Z2.componentId){j(X.componentsDisplayed[Z2.sRouteName]===1,null,Z2.componentId);}else{Z2.componentCreated.then(j.bind(null,false));}if(Z2.fCLLevel===0||Z2.fCLLevel===3){break;}}}function B1(j){if(!Y||Y.identity){return Promise.resolve(j);}var Z2=X;for(var i=0;i>j;i--){if(Z2.backTarget===0){return Promise.resolve(j);}Z2=V[Z2.backTarget];}Y.mode=j;while(x1(Z2.identity)){Y.mode--;if(Z2.backTarget===0){return Promise.resolve(Y.mode);}Z2=V[Z2.backTarget];}if(Z2.identity.treeNode.level===0){Y.identity=Z2.identity;return Promise.resolve(Y.mode);}return D2(Z2.identity).then(function($2){if(!$2){Y.identity=Z2.identity;return Promise.resolve(Y.mode);}if(x1($2.identity)){Y.mode--;return B1(Y.mode);}Y.identity=$2.identity;Y.followUpNeeded=true;return Promise.resolve(Y.mode);});}function C1(i){var j;if(i){if(i.identity){i.identity.appStates[u]=K;}if(Y){if(i.identity){Y={identity:i.identity,followUpNeeded:true,mode:Y?Y.mode:0};A1(i.displayMode);}return;}if(i.identity&&x1(i.identity)){return;}j=i.mode;if(j===1&&i.identity&&X.backTarget&&w1(V[X.backTarget],i.identity)){j=-1;}Y={identity:i.identity,mode:j};A1(i.displayMode);}else{j=1;}Y.followUpNeeded=Y.identity&&j<0;if(Y.identity||(j===-1&&X.backTarget)){G.oBusyHelper.setBusyReason("HashChange",!G.ghostapp);b1.stop();}else{Y=null;}if(j>=0){E2(Y.identity);z1(j===1);}else if(!G.ghostapp){return B1(j).then(function(Z2){window.history.go(Z2);});}}function D1(i,j){i.text=((i.headerTitle!==j)&&j)||"";if(_&&_.linkInfos.length>i.level){_.adjustNavigationHierarchy();}}function E1(i,j){var Z2=Object.create(null);if(G.oFlexibleColumnLayoutHandler){G.oFlexibleColumnLayoutHandler.adaptBreadCrumbUrlParameters(Z2,i);}var $2={treeNode:i};var _2={treeNode:i,keys:W.keys.slice(0,i.level+1),appStates:Z2};var a3;var b3=o1(_2).then(function(){var c3=y1(i,W.keys,Z2);a3=I.oRouter.getURL(c3.route,c3.parameters);Z2[u]=K;c3=y1(i,W.keys,Z2);$2.fullLink=I.oRouter.getURL(c3.route,c3.parameters);});j.push(b3);$2.navigate=function(c3,d3){if(G.oFlexibleColumnLayoutHandler&&!d3){var e3;for(var f3=V[X.backTarget];f3.backTarget>0&&!e3;f3=V[f3.backTarget]){if(f3.identity.treeNode===i){e3=f3.identity;}}G.oFlexibleColumnLayoutHandler.adaptPreferredLayout(Z2,i,e3);}G.oBusyHelper.setBusy(b3.then(function(){return T1(_2,false,c3);}));};$2.adaptBreadCrumbLink=function(c3){b3.then(function(){var d3=H.getInstance();var e3=d3.hrefForAppSpecificHash?d3.hrefForAppSpecificHash(a3):"#/"+a3;c3.setHref(e3);});};return $2;}function F1(i,j){var Z2={title:j.treeNode.headerTitle||"",icon:j.treeNode.titleIconUrl||"",subtitle:j.treeNode.text,intent:i+j.fullLink};return Z2;}function G1(){var j=[];var Z2=[O];var $2=G.oFlexibleColumnLayoutHandler&&G.oFlexibleColumnLayoutHandler.hasNavigationMenuSelfLink(W);for(var _2=$2?W.treeNode:G.mRoutingTree[W.treeNode.parentRoute];_2;_2=G.mRoutingTree[_2.parentRoute]){var a3=E1(_2,Z2);j[_2.level]=a3;}var b3=Promise.all(Z2);var c3=function(){G.oShellServicePromise.then(function(d3){d3.setHierarchy([]);b3.then(function(e3){var f3=e3[0];var g3=[];for(var i=j.length-1;i>=0;i--){g3.push(F1(f3,j[i]));}d3.setHierarchy(g3);});}).catch(function(){l.warning("No ShellService available");});};_={linkInfos:j,adjustNavigationHierarchy:c3};c3();}function H1(){return _.linkInfos;}function I1(i,j){var Z2=Object.create(null);var $2=v(i);Z2.treeNode=G.mRoutingTree[$2];Z2.appStates=j["?query"]||Object.create(null);Z2.keys=[""];for(var _2=Z2.treeNode;_2.level>0;_2=G.mRoutingTree[_2.parentRoute]){Z2.keys[_2.level]=_2.noKey?"":j["keys"+_2.level];}return Z2;}function J1(i){var j=W;if(Y&&Y.identity&&!Y.followUpNeeded){W=Y.identity;}else{var Z2=i.getParameter("config");W=I1(Z2.name,i.getParameter("arguments"));}W.previousIdentity=j;W.componentsDisplayed=Object.create(null);W.componentsDisplayed[W.treeNode.sRouteName]=1;G1();}function K1(i,j){var Z2=g1.getProcessFinished(true).then(function(){var $2={identity:{treeNode:W.treeNode,keys:W.keys,appStates:e(Object.create(null),W.appStates)},mode:1};if(Array.isArray(j)&&j.length<2){j=j[0];}if(j){$2.identity.appStates[i]=j;}else{delete $2.identity.appStates[i];}C1($2);});G.oBusyHelper.setBusy(Z2);return Z2;}var L1;function M1(i,j,Z2,$2,_2,a3){var b3=i.then(function(c3){c3.appStates=a3||Object.create(null);var d3;if(c3.treeNode.fCLLevel===0||c3.treeNode.fCLLevel===3){d3=o1(c3);}else{d3=G.oFlexibleColumnLayoutHandler.getAppStatesPromiseForNavigation(W,c3);}if(!j&&_2&&_2.bIsCreate&&_2.bIsDraft&&!_2.bIsDraftModified){L1={index:V.length,path:$2.getPath(),identity:c3,displayMode:d2()};}return d3.then(function(){return T1(c3,j,Z2);});});G.oBusyHelper.setBusy(b3);return b3;}function N1(i,j,Z2,$2,_2){if(!i||(Array.isArray(i)&&i.length===0)){return m2(j);}var a3=Array.isArray(i)?i:[i];var b3=(a3.length===1&&(!W||W.treeNode.level>0))&&D.analyseContext(a3[0]);var c3=b3&&G.mEntityTree[b3.entitySet];var d3=c3&&(c3.level===1?["",b3.key]:G.oApplicationProxy.getIdentityKeyForContext(a3[0]));var e3=d3?Promise.resolve({treeNode:c3,keys:d3}):new Promise(function(f3,g3){var h3=0,i3;var j3=function(){if(h3==a3.length){f3(i3);}else{var k3=a3[h3];var l3=Y1(i3,k3,true,true);l3.then(function(m3){h3++;i3=m3;j3();});}};j3();});return M1(e3,j,Z2,a3[0],$2,_2);}function O1(i,j,Z2,$2){var _2=Y1(null,i,true,true);return M1(_2,j,Z2,i,$2).then(Function.prototype,Function.prototype);}function P1(j){if(!L1||L1.path!==j.getPath()){return null;}var Z2;var $2=function(e3,i){return e3!==Z2.identity.keys[i];};for(var i=L1.index+1;i<V.length;i++){Z2=V[i];if(!Z2.identity.treeNode||Z2.identity.treeNode.level<L1.identity.treeNode.level||L1.identity.keys.some($2)){return null;}}var _2=0;for(var a3=X;a3.iHashChangeCount!==L1.index;a3=V[a3.backTarget]){if(a3.iHashChangeCount<L1.index){return null;}_2--;}var b3=V[L1.index].identity;var c3={treeNode:b3.treeNode,keys:b3.keys,appStates:Object.create(null)};var d3=C1.bind(null,{identity:c3,mode:_2,displayMode:L1.displayMode});if(b3.treeNode.fCLLevel===0||b3.treeNode.fCLLevel===3){e(c3.appStates,b3.appStates);return Promise.resolve(d3);}return G.oFlexibleColumnLayoutHandler.getSpecialDraftCancelPromise(W,b3,c3.appStates).then(function(){return d3;});}function Q1(i,j,Z2){var $2=D.analyseContext(i);var _2={keys:["",$2.key],appStates:Object.create(null)};var a3=b1.makeQueuable(T1.bind(null,_2,true,j));if(W.treeNode.level===1){_2.treeNode=W.treeNode;e(_2.appStates,W.appStates);return Promise.resolve(a3);}if(Z2){Z2.keys.forEach(function(c3){if(c3){_2.keys.push(c3);}});_2.treeNode=Z2.treeNode;}if(_2.treeNode===W.treeNode){e(_2.appStates,W.appStates);return Promise.resolve(a3);}var b3=G.oFlexibleColumnLayoutHandler.getAppStatesPromiseForNavigation(W,_2);return b3.then(function(){return a3;});}function R1(i,j){if((i&&i.treeNode)!==j.treeNode){return Promise.resolve(false);}if(G.oFlexibleColumnLayoutHandler&&!G.oFlexibleColumnLayoutHandler.areIdentitiesLayoutEquivalent(i,j)){return Promise.resolve(false);}var Z2=true;var $2=i.treeNode.sRouteName;for(var _2=i.treeNode;_2.level>0;_2=G.mRoutingTree[_2.parentRoute]){var a3=_2.noKey||i.keys[_2.level]===j.keys[_2.level];if(!a3&&_2.noOData){return Promise.resolve(false);}Z2=Z2&&a3;if(_2.noOData){$2=_2.parentRoute;}}if(Z2){return Promise.resolve(true);}var b3=G.mRoutingTree[$2];var c3=i.keys.slice(0,b3.level+1);var d3=j.keys.slice(0,b3.level+1);var e3=b3.getPath(2,c3);var f3=b3.getPath(2,d3);return G.oApplicationProxy.areTwoKnownPathesIdentical(e3,f3,b3.level===1,i,j);}function S1(i){var j=V[X.backTarget];var Z2=-1;if(j&&(i.level===0||(G.oFlexibleColumnLayoutHandler&&i.fCLLevel===0))){for(;j.backTarget>0&&j.identity.treeNode&&j.identity.treeNode.level>i.level;Z2--){j=V[j.backTarget];}}return j&&{candidateHash:j,candidateCount:Z2};}function T1(i,j,Z2){var $2=S1(i.treeNode);var _2=R1($2&&$2.candidateHash.identity,i);var a3=_2.then(function(b3){var c3=b3?$2.candidateCount:(0+!!j);var d3={identity:i,mode:c3,displayMode:Z2};C1(d3);});G.oBusyHelper.setBusy(a3);return a3;}function U1(){if(M){return m2(true);}var i=G.componentRegistry[W.treeNode.componentId];var j=i.utils.getTemplatePrivateModel();var Z2=V1();t2({title:Z2.dataLoadFailedTitle,text:Z2.dataLoadFailedText,description:"",viewLevel:j.getProperty("/generic/viewLevel")});return Promise.resolve();}function V1(){return{dataLoadFailedTitle:G.getText("ST_ERROR"),dataLoadFailedText:G.getText("ST_GENERIC_ERROR_LOAD_DATA_TEXT")};}function W1(i,j,Z2,$2){if(!j){return{treeNode:G.mRoutingTree.root,key:""};}var _2=D.analyseContext(j);var a3=(i.level&&i.entitySet===_2.entitySet)?i:i.children.indexOf(_2.entitySet)>=0&&G.mEntityTree[_2.entitySet];if(a3){return{treeNode:a3,key:_2.key};}if(Z2){var b3=G.oAppComponent.getModel();var c3=b3.getMetaModel();var d3=c3.getODataEntitySet(_2.entitySet);var e3=c3.getODataEntityType(d3.entityType);var f3;var g3=i.children.some(function(i3){a3=G.mEntityTree[i3];f3=a3.navigationProperty;if(!f3){return false;}var j3=c3.getODataAssociationEnd(e3,f3);return!!j3&&j3.multiplicity.endsWith("1");});if(g3){return{treeNode:a3,navigationProperty:f3};}}if($2&&i.level>0){var h3=G.mRoutingTree[i.parentRoute];return W1(h3,j,Z2,true);}}function X1(i,j,Z2,$2){if($2.navigationProperty){return new Promise(function(a3,b3){var c3=Z2.getModel();c3.createBindingContext($2.navigationProperty,Z2,null,function(d3){var e3=d3&&X1(i,j,d3,{treeNode:$2.treeNode,key:D.analyseContext(d3).key});if(e3){e3.then(a3,b3);}else{b3();}});});}var _2=j.slice(0,$2.treeNode.level);_2.push($2.key);return Promise.resolve({treeNode:$2.treeNode,keys:_2});}function Y1(i,j,Z2,$2){var _2=(i&&i.treeNode)||(W&&W.treeNode)||G.mRoutingTree.root;var a3=(i&&i.keys)||(W&&W.keys)||[""];var b3=W1(_2,j,Z2,$2);return b3?X1(_2,a3,j,b3):Promise.reject();}function Z1(i,j,Z2){var $2={treeNode:i,keys:Z2||W.keys.slice(0,i.level+1),appStates:j};if(i.fCLLevel===0||i.fCLLevel===3){return o1($2);}return G.oFlexibleColumnLayoutHandler.getAppStatesPromiseForNavigation(W,$2);}function $1(i){var j=Y1({treeNode:G.mRoutingTree.root},i,false,true);var Z2=j.then(function($2){$2.appStates=Object.create(null);var _2;if($2.treeNode===W.treeNode){Object.assign($2.appStates,W.appStates);_2={identity:$2,mode:1,displayMode:1};C1(_2);return null;}var a3=Z1($2.treeNode,$2.appStates);return a3.then(T1.bind(null,$2,true,1));});G.oBusyHelper.setBusy(Z2);return Z2;}function _1(i){var j;var Z2=0;for(j=X;j.backTarget>0&&(!j.identity||!j.identity.treeNode||j.identity.treeNode.level>i);Z2++){j=V[j.backTarget];}if(!R&&(Z2===0||!j.identity.treeNode||j.identity.treeNode.level>i)){window.history.go(-Z2-1);return Promise.resolve();}var $2=-Z2||1;var _2=y2(i);var a3={treeNode:_2,keys:W.keys.slice(0,_2.level+1),appStates:Object.create(null)};var b3=Z1(a3.treeNode,a3.appStates).then(function(){if($2<0&&(a3.treeNode.fCLLevel===1||a3.treeNode.fCLLevel===2)&&j.identity.treeNode===a3.treeNode){for(;j.backTarget>0&&!G.oFlexibleColumnLayoutHandler.areIdentitiesLayoutEquivalent(j.identity,a3);$2--){j=V[j.backTarget];if(j.identity.treeNode!==a3.treeNode){break;}}}var c3={identity:a3,mode:$2,displayMode:a3.treeNode.isDraft?6:1};C1(c3);});G.oBusyHelper.setBusy(b3);return b3;}var a2;function b2(i,j,Z2,$2){var _2=G.mEntityTree[i];var a3=G.componentRegistry[_2.componentId];var b3;if(j){var c3=q.createEmptyAppState(G.oAppComponent);c3.setData(j);c3.save();b3=c3.getKey();}var d3=W?W.keys.slice(0,_2.level):[""];d3.push("-");$2=$2||Object.create(null);var e3=Z1(_2,$2,d3);var f3=e3.then(function(){if(b3){$2[A]=b3;}var g3={treeNode:_2,keys:d3,appStates:$2};a2=Z2;if(x1(g3)){var h3={componentsDisplayed:X.componentsDisplayed,isNonDraftCreate:true};return A2("-",h3,a3.oComponent);}else{var i3=!W||!!(a3&&a3.nonDraftCreateContext);return T1(g3,i3,4);}});G.oBusyHelper.setBusy(f3);return f3;}function c2(i){var j=Y1(null,i,false,false);var Z2=j.then(function($2){$2.appStates=Object.create(null);e($2.appStates,W.appStates);delete $2.appStates[A];var _2={identity:$2,mode:1};C1(_2);});G.oBusyHelper.setBusy(Z2);return Z2;}function d2(){var i=G.componentRegistry[W.treeNode.componentId];var j=i.utils.getTemplatePrivateModel();var Z2=j.getProperty("/objectPage/displayMode")||0;return Z2;}function e2(i,j,Z2,$2,_2){var a3=W.keys.slice(0,i.level);a3.push(j?Z2:"");var b3=Object.create(null);var c3=Z1(i,b3,a3);var d3=c3.then(function(){var e3={treeNode:i,keys:a3,appStates:b3};return T1(e3,$2,_2);});G.oBusyHelper.setBusy(d3);return d3;}function f2(Z2,$2,_2,a3,b3,c3){var d3;var e3=true;for(var i=0;i<Z2.children.length&&!d3;i++){var f3=Z2.children[i];var g3=G.mEntityTree[f3];if(g3[Z2.level?"navigationProperty":"sRouteName"]===$2){d3=g3.sRouteName;e3=!g3.noKey;}}var h3=!d3&&_2&&Z2.embeddedComponents[_2];if(h3){for(var j=0;j<h3.pages.length&&!d3;j++){var i3=h3.pages[j];if(i3.navigationProperty===$2){d3=Z2.sRouteName+"/"+_2+"/"+$2;e3=!(i3.routingSpec&&i3.routingSpec.noKey);}}}if(d3){var j3=G.mRoutingTree[d3];if(!c3){c3=d2();}return e2(j3,e3,a3,b3,c3);}return Promise.reject();}function g2(i,j,Z2,$2){var _2=Y1({treeNode:i},j,true,false);var a3=_2.then(function(b3){b3.appStates=Object.create(null);var c3=Z1(b3.treeNode,b3.appStates,b3.keys);return c3.then(T1.bind(null,b3,$2,Z2));});G.oBusyHelper.setBusy(a3);return a3;}function h2(){return!!Y;}function i2(i){l.info("Navigate back");if(X.backTarget&&N(o.getPreviousHash()||"")!==N(X.hash)){G.oBusyHelper.setBusyReason("HashChange",true);}X.LeaveByBack=!X.forwardingInfo;if(X.LeaveByBack){X.backSteps=i;}window.history.go(-i);}function j2(j,Z2,$2,_2){var a3=G.oAppComponent.getObjectPageHeaderType()==="Dynamic"&&G.oAppComponent.getObjectPageVariantManagement()==="VendorLayer";var b3;var c3=new U(window.location.href);if(c3.mParams["sap-ui-layer"]){var d3=c3.mParams["sap-ui-layer"];for(var i=0;i<d3.length;i++){if(d3[i].toUpperCase()==="VENDOR"){b3=true;break;}}}j=N(j||"");l.info("Navigate to hash: "+j);if(j===X.hash){l.info("Navigation suppressed since hash is the current hash");return;}X.targetHash=j;if(X.backTarget&&N(o.getPreviousHash()||"")===j){I.navigateBack();return;}var e3=W?W.treeNode.level:0;if(a3&&b3){if(!_2){if(!G.oFlexibleColumnLayoutHandler){g.clearVariantParameterInURL();}else{if(e3>=$2){if($2===1){g.clearVariantParameterInURL();}else if($2===2){var f3;for(var g3 in G.componentRegistry){if(G.componentRegistry[g3].viewLevel===2){f3=G.componentRegistry[g3];break;}}var h3=f3.oController.byId("template::ObjectPage::ObjectPageVariant");g.clearVariantParameterInURL(h3);}}}}}G.oBusyHelper.setBusyReason("HashChange",true);X.LeaveByReplace=Z2;if(Z2){I.oHashChanger.replaceHash(j);}else{I.oHashChanger.setHash(j);}}function k2(i,j,Z2,$2,_2,a3){var b3=j.then(function(c3){i=x(i,c3);if(_2){X.backwardingInfo={count:_2.count,index:_2.index,targetHash:N(i)};i2(_2.count);}else{j2(i,$2,Z2,a3);}return i;});G.oBusyHelper.setBusy(b3);return b3;}function l2(i,j,Z2){var $2=V[X.backTarget];return $2&&$2.hash&&N($2.hash.split("?")[0])===N(j)&&{count:1,index:X.backTarget};}function m2(i){if(W.treeNode.level===0){return Promise.resolve();}var j={treeNode:G.mRoutingTree["root"],keys:[""],appStates:Object.create(null)};var Z2=o1(j);var $2=Z2.then(T1.bind(null,j,i));G.oBusyHelper.setBusy($2);return $2;}function n2(j,Z2){var $2=X.componentsDisplayed;var _2=function(b3){var c3=G.componentRegistry[b3.getId()];(c3.methods.presetDisplayMode||Function.prototype)(Z2,$2[c3.route]===1);};for(var i=0;i<j.length;i++){var a3=j[i];a3.then(_2);}}function o2(i,j,Z2,$2,_2){var a3={};var b3=G.oFlexibleColumnLayoutHandler&&G.oFlexibleColumnLayoutHandler.getFCLAppStatesPromise(i,a3);var c3=q1(i,a3,j);var d3=(b3?Promise.all([b3,c3]):c3).then(w.bind(null,a3));var e3=l2($2,j,Z2);var f3=k2(j,d3,Z2,$2,e3,_2);G.oBusyHelper.setBusy(f3);return f3;}function p2(j,Z2,$2,_2,a3){if(typeof j==="string"){var b3=j;var c3=N(b3);if(c3==="/"){return m2($2);}var d3=c3.split("/");var e3=d3.length-1;var f3=[];var g3;switch(e3){case 1:g3=d3[1].split("(")[0];break;default:g3="";var h3="";for(var i=0;i<e3;i++){var i3=d3[i+1];var j3=i3.indexOf("(");if(j3>0){i3=i3.substring(0,j3);}g3=g3+h3+i3;h3="/";}g3=g3.replace(r.getEmbeddedComponentsPatternDelimiter(),"/");}n2(f3,_2||0);return o2(g3,b3,e3,$2,a3);}return N1(j,$2,_2);}function q2(i,j){X.componentsDisplayed[i]=j;var Z2=G.mRoutingTree[i];var $2=Z2.componentId;if($2){var _2=G.componentRegistry[$2];var a3=_2.utils.getTemplatePrivateModel();a3.setProperty("/generic/isActive",j===1);}}function r2(i){var j,Z2,$2,_2,a3,b3=null,c3,d3;if(i){j=i.entitySet;Z2=i.text;b3=i.icon;d3=i.description;}if(j){c3=G.oAppComponent.getModel().getMetaModel();if(c3){$2=c3.getODataEntitySet(j);_2=c3.getODataEntityType($2.entityType);a3=_2["com.sap.vocabularies.UI.v1.HeaderInfo"];}if(a3&&a3.TypeImageUrl&&a3.TypeImageUrl.String){b3=a3.TypeImageUrl.String;}}G.oTemplatePrivateGlobalModel.setProperty("/generic/messagePage",{text:Z2,icon:b3,description:d3});if(G.oFlexibleColumnLayoutHandler){G.oFlexibleColumnLayoutHandler.displayMessagePage(i,X.componentsDisplayed);}else{var e3=I.oRouter.getTargets();if(!G.ghostapp){e3.display("messagePage");}for(var f3 in X.componentsDisplayed){q2(f3,5);}}s1(i);}function s2(){if(!a($)){var j=null;for(var i=0;!j;i++){j=$[i];}$={};r2(j);}}function t2(i){if(I.oTemplateContract.oFlexibleColumnLayoutHandler){i.viewLevel=i.viewLevel||0;$[i.viewLevel]=i;var j=Promise.all([f1,I.oTemplateContract.oPagesDataLoadedObserver.getProcessFinished(true)]);j.then(s2);j.then(G.oBusyHelper.setBusyReason.bind(null,"HashChange",false));return;}r2(i);G.oBusyHelper.setBusyReason("HashChange",false);}function u2(){var i=[];if(W||X){var j=W.componentsDisplayed||X.componentsDisplayed;for(var Z2 in G.componentRegistry){var $2=G.componentRegistry[Z2];if(j[$2.route]===1){i.push(Z2);}}}return i;}function v2(){var i=[];for(var j in G.componentRegistry){i.push(j);}return i;}function w2(i){return W.keys.slice(0,i+1);}function x2(){var i=W.treeNode.componentId;var j=G.componentRegistry[i];var Z2=!!j.nonDraftCreateContext;if(Z2){var $2=Object.assign({},X);$2.isNonDraftCreate=Z2;return $2;}return X;}function y2(i){return G.oApplicationProxy.getAncestralNode(W.treeNode,i);}function z2(i){return i?new Promise(function(j,Z2){var $2=q.getAppState(G.oAppComponent,i);$2.done(function(_2){var a3=_2.getData();(a3===undefined?Z2:j)(a3);});$2.fail(Z2.bind(null,undefined));}):Promise.reject();}function A2(j,Z2,$2){var _2=$2.getId();var a3=G.componentRegistry[_2];var b3=w2(a3.viewLevel);var c3=a3.route;var d3=Z2.componentsDisplayed[c3];var e3=d3===1;var f3=function(l3){a3.sCurrentBindingPath=l3;var m3=function(){a3.utils.bindComponent(a3.sCurrentBindingPath,e3);if(_2===W.treeNode.componentId){var o3=Object.create(null);o3.root=true;for(var g3=W.treeNode;g3.level>0;g3=G.mRoutingTree[g3.parentRoute]){o3[g3.sRouteName]=true;g3.bindElement(G.oNavigationHost,null,true);if(g3.contextTargets){for(var i=0;i<g3.contextTargets.length;i++){var p3=g3.contextTargets[i];g3.bindElement(p3,null,false);}}}for(var q3 in G.mRoutingTree){if(!o3[q3]){var r3=G.mRoutingTree[q3];G.oNavigationHost.unbindElement(r3.specificModelName);if(r3.contextTargets){r3.contextTargets.forEach(function(p3){p3.unbindElement();});}}}}a3.utils.refreshBinding();a3.oStatePreserverPromise.then(function(s3){s3.applyAppState(l3,e3);});return(a3.methods.onActivate||Function.prototype)(l3,e3);};var n3=a3.fnViewRegisteredResolve?a3.viewRegistered.then(m3):(m3()||Promise.resolve());return Promise.all([n3,a3.viewRegistered]).then(function(){a3.aKeys=b3;var i=a3.reactivate;if(i){delete a3.reactivate;i.then(function(o3){o3();});}});};X.componentsDisplayed[c3]=1;if(Z2.isNonDraftCreate&&j==="-"){var g3=G.mRoutingTree[c3];var h3=G.mRoutingTree[g3.parentRoute];var i3=h3.getPath(2,b3);var j3=G.oAppComponent.getModel();var k3=i3?new Promise(function(i){var l3={canonicalRequest:!G.bCreateRequestsCanonical};j3.createBindingContext(i3,null,l3,i);}):Promise.resolve();return k3.then(function(i){var l3=i?g3.navigationProperty:"/"+$2.getEntitySet();var m3=W.appStates[A];var n3=z2(m3);var o3=function(p3){a3.nonDraftCreateContext=a2||a3.nonDraftCreateContext||f.createNonDraft(i,l3,j3,p3,G.oApplicationProxy.mustRequireRequestsCanonical());a2=null;return f3(a3.nonDraftCreateContext.getPath());};return n3.then(o3,o3);});}delete a3.nonDraftCreateContext;return f3(j);}function B2(i,j,Z2){return A2(i,j,Z2).then(t1);}function C2(i,j,Z2){var $2={};if(j||Z2){var _2=i.level;for(var a3=0;a3<_2;a3++){$2[a3]=G.oPaginatorInfo[a3];}}G.oPaginatorInfo=$2;}function D2(i){return G.oApplicationProxy.getAlternativeIdentityPromise(i);}function E2(i){if(!L){return;}var j=G.oFlexibleColumnLayoutHandler;var Z2=G.oTemplatePrivateGlobalModel;var $2=G.mRoutingTree;p.setPlaceholder(i,j,Z2,$2);}var F2=Object.create(null);function G2(i,j){if(F2[i.sRouteName]){return;}var Z2=I.createHostView();F2[i.sRouteName]=Z2;var $2=I.oRouter.getViews();var _2=Z2.getController();_2.setRouteName(i.sRouteName);var a3=L&&i.behaviour&&i.behaviour.getPlaceholderInfo();var b3=a3&&a3.getPlaceholderPage(Z2.getId());if(b3){b3.then(function(d3){var e3=Z2.byId("placeholderHost");e3.addPage(d3);e3.to(d3);});}$2.setView(i.sRouteName,Z2);var c3=Z2.byId("host");V2(c3,i.sRouteName,j);}function H2(i){var j=G.mRoutingTree;if(j&&j[i]){G2(j[i],true);}}function I2(i){Z=false;b1.stop();g1.startProcess();J1(i);G2(W.treeNode);E2(W);W.treeNode.display();if(G.oFlexibleColumnLayoutHandler){a1=G.oFlexibleColumnLayoutHandler.handleBeforeRouteMatched(W);}}function J2(){var i={isInitialNavigation:R,historicalEntries:[]};for(var j=X;j.iHashChangeCount>0;j=V[j.backTarget]){var Z2=(j===X)?W:j.identity;var $2=Z2.treeNode&&{sRouteName:Z2.treeNode.sRouteName,keys:Z2.keys,appStates:Z2.appStates};i.historicalEntries.push($2);}J.setData(i);J.save();var _2=W.appStates[u];if(_2===K||!(_2||X.backTarget||R)){return false;}C1({identity:{treeNode:W.treeNode,keys:W.keys,appStates:e(Object.create(null),W.appStates)},mode:1});return true;}function K2(){g1.stopProcess();if(Y&&Y.followUpNeeded&&Y.identity&&!x1(Y.identity)){C1();return;}G.oBusyHelper.setBusyReason("HashChange",false);var Z2=W.treeNode.level;var $2=N(I.oHashChanger.getHash()||"");l.info("Route matched with hash "+$2);var _2;if(X.backwardingInfo){_2=X;_2.identity=W.previousIdentity;delete W.previousIdentity;V.push(_2);var a3=_2.iHashChangeCount+1;X={iHashChangeCount:a3,forwardingInfo:{bIsProgrammatic:true,bIsBack:true,iHashChangeCount:a3,targetHash:_2.backwardingInfo.targetHash,componentsDisplayed:_2.componentsDisplayed},backTarget:V[_2.backwardingInfo.index].backTarget,componentsDisplayed:Object.create(null)};}if(X.forwardingInfo&&X.forwardingInfo.targetHash&&X.forwardingInfo.targetHash!==$2){X.hash=$2;var b3=X.forwardingInfo.targetHash;delete X.forwardingInfo.targetHash;j2(b3,true);return;}var c3=false;for(var i=0;i<G.aStateChangers.length;i++){var d3=G.aStateChangers[i];if(d3.isStateChange(W.appStates)){c3=true;}}if(c3){Y=null;X.hash=$2;if(!J2()){b1.start();}return;}G.oTemplatePrivateGlobalModel.setProperty("/generic/routeLevel",Z2);var e3=X.forwardingInfo;delete X.forwardingInfo;if(!e3){e3={componentsDisplayed:X.componentsDisplayed,isNonDraftCreate:!W.treeNode.isDraft&&W.keys[W.treeNode.level]==="-"};var f3=X.iHashChangeCount;e3.iHashChangeCount=f3+1;var g3=o.getDirection();if(Y){e3.bIsProgrammatic=!!Y.identity;e3.bIsBack=Y.mode<0;if(e3.bIsBack){X.backSteps=0-Y.mode;}e3.bIsForward=!e3.bIsBack&&(g3===k.Forwards);X.LeaveByReplace=Y.mode===1;}else{e3.bIsProgrammatic=($2===X.targetHash);e3.bIsBack=!!(X.LeaveByBack||(!e3.bIsProgrammatic&&(g3===k.Backwards)));e3.bIsForward=!e3.bIsBack&&(g3===k.Forwards);X.LeaveByReplace=e3.bIsProgrammatic&&X.LeaveByReplace;if(!e3.bIsProgrammatic&&W.previousIdentity&&W.previousIdentity.treeNode.level>0&&!W.previousIdentity.treeNode.isDraft){var h3=W.treeNode!==W.previousIdentity.treeNode;for(var j=1;!h3&&j<W.keys.length;j++){h3=W.keys[j]!==W.previousIdentity.keys[j];}if(h3){var i3=G.componentRegistry[W.previousIdentity.treeNode.componentId];var j3=i3.oComponent.getModel("ui");if(j3.getProperty("/editable")){i3.utils.cancelEdit();}}}}X.LeaveByBack=e3.bIsBack;_2=X;_2.identity=W.previousIdentity;delete W.previousIdentity;V.push(_2);X={iHashChangeCount:e3.iHashChangeCount,componentsDisplayed:Object.create(null)};if(_2.LeaveByReplace){X.backTarget=_2.backTarget;}else if(e3.bIsBack){var k3=_2.backTarget;for(var l3=_2.backSteps||1;l3>0;l3--){k3=V[k3].backTarget;}X.backTarget=k3;}else{X.backTarget=f3;}}X.hash=$2;var m3=function(n3){if(n3){var o3,p3;if(w1(_2.identity,n3.identity)){o3=X.backTarget&&V[X.backTarget];p3=-1;}else{o3=n3.identity;p3=1;}var q3={identity:o3,mode:p3,displayMode:n3.displayMode};C1(q3);return;}if(J2()){return;}C2(W.treeNode,e3.bIsProgrammatic,e3.bIsBack);if(G.oFlexibleColumnLayoutHandler){f1=G.oFlexibleColumnLayoutHandler.handleRouteMatched(e3);}else{f1=W.treeNode.componentCreated.then(function(r3){return B2(e3.isNonDraftCreate?"-":W.treeNode.getPath(2,W.keys),e3,r3);});}G.oBusyHelper.setBusy(f1);f1.then(b1.start);};if(e3.bIsBack&&!Y){G.oBusyHelper.setBusy(D2(W).then(m3));}else{Y=null;m3();}}function L2(){var i=Promise.all([a1,e1.then(function(){return G.oStatePreserversAvailablePromise;})]);var j=i.then(K2,G.oBusyHelper.setBusyReason.bind(null,"HashChange",false));G.oBusyHelper.setBusy(j);P2();}function M2(j){V.push(X);var Z2;if(j){R=j.isInitialNavigation;for(var i=j.historicalEntries.length;i>0;i--){var $2=j.historicalEntries[i-1];Z2={iHashChangeCount:V.length,backTarget:V.length-1};if($2){Z2.identity={treeNode:G.mRoutingTree[$2.sRouteName],keys:$2.keys,appStates:$2.appStates};}V.push(Z2);}}else{Z2={iHashChangeCount:1,backTarget:0,identity:W};V.push(Z2);}c1(Z2);L2();}function N2(){if(M&&!V.length){var i=W.appStates[u];var j=z2(i);j.then(M2,M2);return;}L2();}function O2(){W={appStates:Object.create(null),keys:[]};t2({title:G.getText("ST_ERROR"),text:G.getText("ST_GENERIC_UNKNOWN_NAVIGATION_TARGET"),description:""});G.oBusyHelper.setBusyReason("HashChange",false);}function P2(){var j=function(d3){if(!d3.selectionInfo){return false;}for(var i=1;i<=d3.level;i++){if(d3.selectionInfo.keys[i]!==W.keys[i]){return false;}}return true;};var Z2=function(i,c3,b3,d3){if(i.selectionInfo===c3){b3.setProperty("/generic/currentActiveChildContext",d3);}};for(var $2,_2=W.treeNode;_2;_2=$2){$2=_2.parentRoute&&G.mRoutingTree[_2.parentRoute];if($2){$2.selectionInfo={pageEntitySet:_2.entitySet,path:_2.getPath(3,W.keys),keys:W.keys.slice(0,_2.level+1)};}var a3=_2.componentId&&G.componentRegistry[_2.componentId];if(a3){var b3=a3.utils.getTemplatePrivateModel();if(j(_2)){var c3=_2.selectionInfo;b3.setProperty("/generic/currentActiveChildContext",c3.path);if(a3.oController.onChildOpenedExtension){a3.oController.onChildOpenedExtension(c3,Z2.bind(null,_2,c3,b3));}}else{_2.selectionInfo=null;b3.setProperty("/generic/currentActiveChildContext","");}}}}I.oRouter.attachBeforeRouteMatched(I2);I.oRouter.attachRouteMatched(N2);I.oRouter.attachBypassed(O2);var Q2=[];function R2(i,j){I[i]=j;Q2.push(i);}function S2(){Q2.forEach(function(i){I[i]=b1.makeQueuable(I[i]);});I.routerInitialized=Function.prototype;}function T2(i){e1=Promise.all([e1,i.componentCreated]);}function U2(i,j){for(var Z2 in j){var $2=j[Z2];i.setModel($2,Z2||undefined);}}function V2(i,j,Z2){var $2=G.mRoutingTree[j];var _2=$2.page.component.name;var a3=$2.entitySet;var b3=$2.fCLLevel-($2.fCLLevel===3||!G.oFlexibleColumnLayoutHandler);var c3=b3<0?G.oNavigationObserver:G.aNavigationObservers[b3];var d3=new P();var e3=b3<0?G.oHeaderLoadingObserver:G.aHeaderLoadingObservers[b3];e3.addObserver(d3);var f3={};var g3={appComponent:G.oAppComponent,isLeaf:!$2.page.pages||!$2.page.pages.length,entitySet:a3,navigationProperty:$2.navigationProperty,componentData:{registryEntry:{oAppComponent:G.oAppComponent,route:j,routeConfig:$2.page,viewLevel:$2.level,routingSpec:$2.page.routingSpec,oNavigationObserver:c3,oHeaderLoadingObserver:d3,preprocessorsData:f3}}};if($2.page.component.settings){e(g3,$2.page.component.settings);}G.oAppComponent.runAsOwner(function(){var h3=sap.ui.core.Component.create({name:_2,settings:g3,handleValidation:true,manifest:true});h3.then(function(i3){if(Z2){U2(i,G.oAppComponent.oModels);i.setComponent(i3);i3.onBeforeRendering();}else{i.setComponent(i3);}});});}function W2(){Z=true;}function X2(j){if(Z){Z=false;return false;}if(Y){return false;}if(j.isCrossAppNavigation){return true;}var Z2=I.oRouter.getRouteInfoByHash(j.innerAppRoute);var $2=I1(Z2.name,Z2.arguments);return $2.treeNode!==W.treeNode||$2.keys.some(function(_2,i){return _2!==W.keys[i];});}function Y2(){if(J){var i=J.getData().historicalEntries;var W=u1();if(W.treeNode.level===0){return false;}if(i.length===1||i[1].sRouteName==="root"){return true;}var j=G.oApplicationProxy.getAncestralNode(W.treeNode,1);var Z2=G.mRoutingTree[i[1].sRouteName];var $2=G.oApplicationProxy.getAncestralNode(Z2,1);return j!==$2;}else{return false;}}I.routerInitialized=S2;I.treeNodeFirstDisplay=T2;I.navigate=j2;R2("navigateBack",C1.bind(null,{mode:-1}));I.activateOneComponent=A2;I.afterActivation=t1;I.addUrlParameterInfoForRoute=q1;I.getApplicableStateForIdentityAddedPromise=o1;I.adaptAppStates=p1;I.setVisibilityOfRoute=q2;I.getActiveComponents=u2;I.getAllComponents=v2;I.getRootComponentPromise=j1;I.getActivationInfo=x2;I.getCurrentKeys=w2;I.getAppTitle=k1;I.getParsedShellHashFromFLP=m1;I.isDiscardDraftConfirmationNeeded=l1;R2("navigateByExchangingQueryParam",K1);R2("navigateToSubContext",N1);R2("navigateToDetailContextIfPossible",O1);I.getSwitchToSiblingPromise=Q1;I.getSpecialDraftCancelPromise=P1;I.getCurrentIdentity=u1;R2("navigateToIdentity",T1);R2("navigateAfterActivation",$1);R2("navigateUpAfterDeletion",_1);R2("navigateForNonDraftCreate",b2);R2("adaptUrlAfterNonDraftCreateSaved",c2);R2("navigateToChild",f2);R2("navigateFromNodeAccordingToContext",g2);I.isNavigating=h2;I.getLinksToUpperLayers=H1;I.setTextForTreeNode=D1;R2("navigationContextNotFound",U1);I.clearHistory=b1.makeQueuable(i1);I.suspend=h1;I.restore=d1.bind(null,false);I.prepareHostView=G2;I.preloadComponent=H2;I.navigateToMessagePage=t2;I.getAppStateFromShell=z2;I.userHasAcceptedDataLoss=W2;I.unwantedDataLossPossible=X2;I.isBackLeavingTheMainObject=Y2;var V2=t.testable(V2,"createTemplateComponent");var m1=t.testable(m1,"getParsedShellHashFromFLP");var H2=t.testable(H2,"preloadComponent");t.testable(function(i){I.createHostView=i;},"setCreateHostView");t.testable(function(i){G2=i;},"setPrepareHostView");G.oBusyHelper.setBusy((m1()||Promise.resolve()).then(function(i){var j=i&&i.parseParameters(document.location.search);if(j&&j["sap-ui-xx-placeholder"]){var Z2=j["sap-ui-xx-placeholder"][0]==='true'?true:false;G.oTemplatePrivateGlobalModel.setProperty("/generic/enablePlaceholder",Z2);}L=G.oTemplatePrivateGlobalModel.getProperty("/generic/enablePlaceholder");if(!L){G.oTemplatePrivateGlobalModel.setProperty("/generic/placeholdersShown",Object.create(null));}return r.generateRoutingStructure(G).then(d1.bind(null,true));}));return{navigateToRoot:b1.makeQueuable(m2),navigateToContext:b1.makeQueuable(p2),navigateToMessagePage:t2,navigateBack:function(){I.navigateBack();}};}function z(i,j){var R=j.oAppComponent.getRouter();var G={oAppComponent:j.oAppComponent,oRouter:R,oHashChanger:R.getHashChanger(),oTemplateContract:j};j.oNavigationControllerProxy=G;var I=new Promise(function(J){G.initialize=function(K){R.initialize(K);J();G.routerInitialized();};G.fnInitializationResolve=J;});j.oBusyHelper.setBusy(I);e(i,y(j,G));}var E=B.extend("sap.suite.ui.generic.template.lib.navigation.NavigationController",{metadata:{library:"sap.suite.ui.generic.template"},constructor:function(i){B.apply(this,arguments);t.testableStatic(z,"NavigationController")(this,i);}});E._sChanges="Changes";return E;});
