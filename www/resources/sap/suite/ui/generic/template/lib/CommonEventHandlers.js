sap.ui.define(["sap/ui/base/Object","sap/ui/base/Event","sap/m/MessageBox","sap/m/Table","sap/ui/model/Sorter","sap/suite/ui/generic/template/genericUtilities/controlHelper","sap/suite/ui/generic/template/genericUtilities/expressionHelper","sap/suite/ui/generic/template/genericUtilities/testableHelper","sap/ui/model/json/JSONModel","sap/ui/core/library","sap/suite/ui/generic/template/js/AnnotationHelper","sap/ui/generic/app/navigation/service/SelectionVariant","sap/ui/core/mvc/Controller","sap/suite/ui/generic/template/genericUtilities/FeLogger","sap/suite/ui/generic/template/lib/MessageUtils","sap/base/util/extend","sap/base/util/isEmptyObject","sap/ui/generic/app/library","sap/suite/ui/generic/template/js/placeholderHelper","sap/suite/ui/generic/template/genericUtilities/polyFill"],function(B,E,M,T,S,c,e,t,J,a,A,b,C,F,d,f,g,h,p){"use strict";var l=new F("lib.CommonEventHandlers").getLogger();var V=a.mvc.ViewType;function m(v){if(!v){return v;}if(Array.isArray(v)){return m(v[0]);}var r={};return n(v,r);}function n(v,r){var O=typeof v.getObject==="function"?v.getObject():v;for(var k in O){if(!k.startsWith("_")){r[k]=O[k];}}return r;}function o(j){var r=[];for(var i=0;i<j.length;i++){var R={};r[i]=n(j[i],R);}return r;}function q(r,s,u,v){function w(i){var j=v.getOwnerControl(i.getSource());return c.isSmartTable(j)?j:j.getParent();}function x(i){var j={};for(var k in i){var F1=i[k];if(typeof F1==="string"){j[k]=F1;}else if(typeof F1==="object"){if(F1.value){j[k]=x(F1).value;}else{j[k]=F1;}}}return j;}function H(i){if(i instanceof sap.ui.generic.app.navigation.service.NavError){if(i.getErrorCode()==="NavigationHandler.isIntentSupported.notSupported"){sap.m.MessageBox.show(v.getText("ST_NAV_ERROR_NOT_AUTHORIZED_DESC"),{title:v.getText("ST_GENERIC_ERROR_TITLE")});}else{sap.m.MessageBox.show(i.getErrorCode(),{title:v.getText("ST_GENERIC_ERROR_TITLE")});}}}var y=Object.create(null);function z(j,k,F1){var G1=v.getTableOrListBindingInfo(j);var H1=G1&&G1.binding;if(!H1){return null;}var I1=c.isMTable(j);var J1=c.isUiTable(j);var K1;var L1=Object.create(null);var M1=k.getBindingContext().getPath();var N1=-1;if(c.isTreeTable(j)){var O1=(H1.getLength()>0)?H1.getLength():0;K1=[];for(var P1=0;P1<O1;P1++){var Q1=H1.getContextByIndex(P1);K1.push(Q1);if(Q1&&Q1.getPath()===M1){N1=P1;}}if(N1<0){return null;}}else if(J1){K1=H1.getContexts();}else if(I1){K1=H1.getCurrentContexts();var R1=j.getSelectedItems();R1.forEach(function(i){L1[i.getBindingContext().getPath()]=i;});}else{K1=H1.getCurrentContexts();}if(N1<0&&!K1.some(function(Q1,i){if(Q1.getPath()===M1){N1=i;return true;}})){return null;}var S1;if(I1){S1=j.getGrowingThreshold();}else if(J1){S1=j.getThreshold();}var T1=k.getParent();var U1=T1.getId();var V1=function(Q1){var i=Q1.getPath();var W1=L1[i];if(!W1){var X1=y[U1];if(!X1){var Y1=k.isSelected&&k.isSelected();X1=k.clone();X1.setParent(T1);if(Y1){k.setSelected(true);}y[U1]=X1;}X1.setBindingContext(Q1);W1=X1;}h1(W1,F1,Q1,true);};return{listBinding:H1,growingThreshold:S1,selectedRelativeIndex:N1,objectPageNavigationContexts:K1,paginate:V1};}function D(i,j){var k=v.getOwnerControl(i);if(k.getTable){k=k.getTable();}var F1=c.isAnalyticalTable(k);s.setPaginatorInfo(F1?null:z(k,i,j),true);}function G(i){var j=i.getSource(),k=j.getParent();v.setEnabledToolbarButtons(k);}var I;function K(j){I=j;return v.getDialogFragmentAsync("sap.suite.ui.generic.template.ListReport.view.fragments.DeleteConfirmation",{onCancel:function(i){var k=i.getSource().getParent();k.close();},onDelete:function(k){var F1=k.getSource().getParent();var G1=F1.getModel("delete");var H1=G1.getProperty("/items");var I1=[];var J1=[];var K1=[];var L1=[];for(var i=0;i<H1.length;i++){if(!H1[i].draftStatus.locked&&H1[i].deletable){if(!H1[i].draftStatus.draft){if(H1[i].draftStatus.draftActive){K1.push(H1[i].context.sPath);}else if(H1.length===G1.getProperty("/unsavedChangesItemsCount")||!H1[i].draftStatus.unsavedChanges||G1.getProperty("/unsavedChangesCheckboxSelected")){I1.push(H1[i].context.sPath);}}else{J1.push(H1[i].context.sPath);L1.push(H1[i].context.sPath);}}}J1=J1.concat(I1).concat(K1);var M1={smartTable:I,pathes:J1,onlyOneDraftPlusActive:J1.length===2&&L1.length===1&&K1.length===1,suppressRefreshAllComponents:!(L()||N()),withWarningDialog:true};var N1=u.oCRUDManager.deleteEntities(M1);N1.then(function(O1){var P1=0;var Q1=[];var R1=O1.some(function(X1){return X1.isWarning;});for(var i=0;i<O1.length;i++){Q1.push("/"+O1[i].sPath.split('/')[1]);if(K1.indexOf(Q1[i])!==-1){P1=P1+1;}}var S1=J1.length-K1.length;var T1=O1.length-P1;var U1=S1-T1;if(T1>0){var V1="";if(U1>0){V1+=v.getText("ST_GENERIC_NOT_DELETED_RECORDS",[T1,S1]);}else{V1=(T1>1)?v.getText("ST_GENERIC_DELETE_ERROR_PLURAL"):v.getText("ST_GENERIC_DELETE_ERROR");}if(R1){V1+="\n";if(T1===1){V1+=v.getText("ST_GENERIC_DELETE_WITH_WARNING_SUGGESTION_SINGULAR");}else{V1+=v.getText("ST_GENERIC_DELETE_WITH_WARNING_SUGGESTION_PLURAL");}}M.error(V1);}else{var W1="";W1=(U1>1)?v.getText("ST_GENERIC_DELETE_SUCCESS_PLURAL"):v.getText("ST_GENERIC_OBJECT_DELETED");d.showSuccessMessageIfRequired(W1,u);}},Function.prototype);F1.close();}},"delete");}function L(){return s.getFclProxy()&&s.getFclProxy().isNextObjectLoadedAfterDelete();}function N(){return!!(s&&s.getSettings()&&s.getSettings().quickVariantSelectionX);}function O(i,j){return new Promise(function(k,F1){j.read(i+"/SiblingEntity",{success:function(G1){var H1="/"+j.getKey(G1);k(H1);},error:function(G1){var H1="Error";k(H1);}});});}function P(j,k){var F1=r.getView().getModel();var G1=F1.getMetaModel();var H1=G1.getODataEntitySet(r.getOwnerComponent().getEntitySet());var I1=H1["Org.OData.Capabilities.V1.DeleteRestrictions"];var J1=(I1&&I1.Deletable&&I1.Deletable.Path)?I1.Deletable.Path:"";var K1={items:undefined,itemsCount:j.length,text:{title:undefined,text:undefined,unsavedChanges:undefined,longText:undefined,undeletableText:undefined},lockedItemsCount:0,unsavedChangesItemsCount:0,undeletableCount:0,unsavedChangesCheckboxSelected:true,unsavedChangesCheckboxVisible:true,undeletableLocked:0,tableMode:""};var L1=[];var M1=[];var N1,O1,P1,Q1,R1,S1;var T1=[];for(var i=0;i<j.length;i++){N1=F1.getObject(j[i].getPath());if(!N1.IsActiveEntity){if(N1.HasActiveEntity){T1.push(O(j[i].getPath(),F1));}}}var U1=0;return new Promise(function(V1,W1){Promise.all(T1).then(function(X1){for(var i=0;i<j.length;i++){N1=F1.getObject(j[i].getPath());O1={};P1={};Q1=true;R1={};S1=false;if(J1){if(F1.getProperty(J1,j[i])===false){Q1=false;K1.undeletableCount++;}}if(!N1.IsActiveEntity){O1.draft=true;if(N1.HasActiveEntity){P1.draft=false;P1.draftActive=true;if(X1[U1]!="Error"){R1["oModel"]=j[0].getModel();R1["sPath"]=X1[U1++];}if(R1.sPath&&Q1&&F1.getProperty(J1,F1.getContext(R1.sPath))===false){Q1=false;K1.undeletableCount++;}}}else if(N1.HasDraftEntity){var Y1=F1.getProperty("DraftAdministrativeData/CreatedByUserDescription",j[i])||F1.getProperty("DraftAdministrativeData/CreatedByUser",j[i]);S1=F1.getProperty("DraftAdministrativeData/InProcessByUser",j[i]);if(S1){if(Q1===false){K1.undeletableLocked++;}O1.locked=true;O1.user=Y1;K1.lockedItemsCount++;}else if(Q1){O1.unsavedChanges=true;O1.user=Y1;K1.unsavedChangesItemsCount++;}}L1.push({context:j[i],draftStatus:O1,deletable:Q1});if(!N1.IsActiveEntity&&N1.HasActiveEntity){M1.push({context:R1,draftStatus:P1,deletable:Q1});}}if(M1.length>0){L1=L1.concat(M1);}K1.items=L1;K1.text.unsavedChanges=v.getText("ST_GENERIC_UNSAVED_CHANGES_CHECKBOX");if(K1.itemsCount>1){var Z1=0;if(K1.lockedItemsCount===K1.itemsCount){K1.text.text=v.getText("ST_GENERIC_DELETE_LOCKED_PLURAL");}else if(K1.unsavedChangesItemsCount===K1.itemsCount&&K1.undeletableCount===0){K1.text.text=v.getText("ST_GENERIC_DELETE_UNSAVED_CHANGES_PLURAL");}else if(K1.lockedItemsCount>0){Z1=K1.itemsCount-K1.lockedItemsCount;K1.text.text=Q(K1.lockedItemsCount,"ST_GENERIC_CURRENTLY_LOCKED_PLURAL","ST_GENERIC_CURRENTLY_LOCKED",[K1.lockedItemsCount,K1.itemsCount]);K1.text.text+="\n";K1.undeletableCount=K1.undeletableLocked>0?K1.undeletableCount-K1.undeletableLocked:K1.undeletableCount;if(K1.undeletableCount>0&&Z1>=K1.undeletableCount){K1.text.text+=v.getText("ST_GENERIC_DELETE_UNDELETABLE",[K1.undeletableCount,K1.itemsCount]);Z1=Z1-K1.undeletableCount;K1.text.text+="\n";}if(K1.unsavedChangesItemsCount&&Z1===K1.unsavedChangesItemsCount){K1.text.text+=Q(Z1,"ST_GENERIC_DELETE_REMAINING_UNSAVED_CHANGES_PLURAL","ST_GENERIC_DELETE_REMAINING_UNSAVED_CHANGES");Z1=0;}}else if(K1.undeletableCount>0){Z1=K1.itemsCount-K1.undeletableCount;K1.text.text=v.getText("ST_GENERIC_DELETE_UNDELETABLE",[K1.undeletableCount,K1.itemsCount]);K1.text.text+="\n";if((K1.unsavedChangesItemsCount&&Z1===K1.unsavedChangesItemsCount)||K1.itemsCount===K1.unsavedChangesItemsCount){K1.text.text+=Q(Z1,"ST_GENERIC_DELETE_REMAINING_UNSAVED_CHANGES_PLURAL","ST_GENERIC_DELETE_REMAINING_UNSAVED_CHANGES");Z1=0;}}else{K1.text.text=v.getText("ST_GENERIC_DELETE_SELECTED_PLURAL");}if(Z1>0){K1.text.text+=(Z1>1)?v.getText("ST_GENERIC_DELETE_REMAINING_PLURAL",[Z1]):v.getText("ST_GENERIC_DELETE_REMAINING");}}else{var $1;if("getMode"in k.getTable()){$1=k.getTable().getMode();}if(K1.lockedItemsCount>0){K1.text.text=v.getText("ST_GENERIC_DELETE_LOCKED",[" ",K1.items[0].draftStatus.user]);}else if(K1.undeletableCount>0){if($1==="Delete"){K1.tableMode=$1;}K1.text.text=v.getText("ST_GENERIC_NOT_DELETABLE");}else if(K1.unsavedChangesItemsCount>0){K1.text.text=v.getText("ST_GENERIC_DELETE_UNSAVED_CHANGES",[" ",K1.items[0].draftStatus.user]);}else{K1.text.text=R(k,j[0]);}}if(K1.lockedItemsCount===K1.itemsCount){K1.text.title=v.getText("ST_GENERIC_ERROR_TITLE");}else if(K1.itemsCount&&(K1.lockedItemsCount+K1.undeletableCount===K1.itemsCount)){K1.text.title=v.getText("WARNING");}else{K1.text.title=K1.text.title=(K1.itemsCount>1)?v.getText("ST_GENERIC_DELETE_TITLE_WITH_COUNT",[K1.itemsCount]):v.getText("ST_GENERIC_DELETE_TITLE");}if(K1.unsavedChangesItemsCount>0){if(K1.unsavedChangesItemsCount!==K1.itemsCount){if(K1.lockedItemsCount>0){if(K1.undeletableCount>0){if(((K1.itemsCount-K1.lockedItemsCount)-K1.undeletableCount)===K1.unsavedChangesItemsCount){K1.unsavedChangesCheckboxVisible=false;}}else if((K1.itemsCount-K1.lockedItemsCount)===K1.unsavedChangesItemsCount){K1.unsavedChangesCheckboxVisible=false;}}else if(K1.undeletableCount>0&&((K1.itemsCount-K1.undeletableCount)===K1.unsavedChangesItemsCount)){K1.unsavedChangesCheckboxVisible=false;}}else{K1.unsavedChangesCheckboxVisible=false;}}else{K1.unsavedChangesCheckboxVisible=false;}V1(K1);});});}function Q(i,j,k,F1){var G1;if(!F1){G1=i>1?v.getText(j):v.getText(k);}else if(i>1&&F1.length>1){G1=v.getText(j,[F1[0],F1[1]]);}else if(F1){G1=v.getText(k,[F1[1]]);}return G1;}function R(i,j,k){var F1;var G1;var H1;var I1;var J1=j.getModel();var K1=J1.oData;var L1=i.getCustomData();var M1=i.getModel("@i18n")&&i.getModel("@i18n").getResourceBundle();for(var N1 in L1){if(L1[N1].getKey()&&L1[N1].getKey()==="headerInfo"&&L1[N1].getValue()&&L1[N1].getValue()["headerTitle"]){F1=j.getPath().split("/")[1];I1=L1[N1].getValue();G1=I1["headerTitle"];H1=I1["headerSubTitle"];if(I1["isHeaderTitlePath"]){G1=(K1[F1]&&K1[F1][G1])||"";}else if(G1.match(/{@i18n>.+}/gi)){G1=M1.getText(G1.substring(G1.indexOf(">")+1,G1.length-1));}if(H1&&I1["isHeaderSubTitlePath"]){H1=(K1[F1]&&K1[F1][H1])||"";}else if(H1.match(/{@i18n>.+}/gi)){H1=M1.getText(H1.substring(H1.indexOf(">")+1,H1.length-1));}break;}}if(i){var O1=e.getAnnotationFormatter(J1,i.getEntitySet(),"/com.sap.vocabularies.UI.v1.HeaderInfo/Title/Value",M1);G1=O1.format(j);O1.done();var P1=r.getOwnerComponent().getAppComponent().getConfig();var Q1=P1.settings&&P1.settings.flexibleColumnLayout?true:false;if(Q1){var R1=r.getOwnerComponent().getModel("_templPrivGlobal");if(!R1.getProperty("/generic/FCL/isVisuallyFullScreen")){var O1=e.getAnnotationFormatter(J1,i.getEntitySet(),"/com.sap.vocabularies.UI.v1.HeaderInfo/Description/Value",M1);H1=O1.format(j);O1.done();}}}return E1(G1,H1,k,false,i);}function U(i,j,k,F1){var G1=u.oApplication.getNavigationHandler();var H1={};var I1={};i.parameters=x(i.parameters);for(var J1 in i.parameters){if(g(i.parameters[J1])){H1[J1]=i.parameters[J1];}else{I1[J1]=i.parameters[J1];}}G1.mixAttributesAndSelectionVariant({},F1).getParameterNames().forEach(function(J1){delete H1[J1];});var K1,L1,M1;if(Array.isArray(j)&&j.length>1){var N1=o(j);return G1.mixAttributesAndSelectionVariant(N1,F1);}else{K1=m(k);L1=m(j);M1=f({},H1,K1,L1,I1);if((Array.isArray(j)&&j.length===1)||K1){return G1.mixAttributesAndSelectionVariant(M1,F1);}else{return G1.mixAttributesAndSelectionVariant(M1,F1,h.navigation.service.SuppressionBehavior.ignoreEmptyString);}}}function W(i,j,k,F1,G1,H1){var I1=u.oApplication.getNavigationHandler();var J1,K1;if(k){J1=k.getUiState().getSelectionVariant();if(typeof J1!=="string"){J1=JSON.stringify(J1);}if(k.getEntitySet()!==F1.getEntitySet()){var L1=I1.constructContextUrl(F1.getEntitySet(),F1.getModel());var M1=JSON.parse(J1);M1.FilterContextUrl=L1;J1=JSON.stringify(M1);}}K1=U(i,j,r.getView().getBindingContext(),J1);var N1={semanticObject:i.semanticObject,action:i.action};v.removePropertiesFromNavigationContext(K1,F1,G1);r.adaptNavigationParameterExtension(K1,N1);if(!H1){v.setComponentRefreshBehaviour(i);}I1.navigate(i.semanticObject,i.action,K1.toJSONString(),null,H);}function X(i,j){var k=u.oApplication.getNavigationHandler();var F1={semanticObject:i.semanticObject,action:i.action};var G1=k.mixAttributesAndSelectionVariant(i.semanticAttributes);v.removePropertiesFromNavigationContext(G1,j);r.adaptNavigationParameterExtension(G1,F1);v.setComponentRefreshBehaviour(i);k.navigate(i.semanticObject,i.action,G1.toJSONString(),null,H);}function Y(i,k){var F1=i.byId("icon");var G1=F1&&F1.getSrc();if(G1===""){G1=undefined;}var H1=i.byId("title");var I1=H1&&H1.getText();if(I1===""){I1=undefined;}var J1=i.byId("description");var K1=J1&&J1.getText();if(K1===""){K1=undefined;}for(var j=0;j<k.length;j++){var L1=k[j];var M1=A.getStableIdPartFromFacet(L1)+"::contactTitleAreaIcon";var N1=i.byId(M1);var O1=A.getStableIdPartFromFacet(L1)+"::contactTitleAreaTitle";var P1=i.byId(O1);var Q1=A.getStableIdPartFromFacet(L1)+"::contactTitleAreaDescription";var R1=i.byId(Q1);var S1=N1&&N1.getSrc();if(S1===""){S1=undefined;}var T1=P1&&P1.getText();if(T1===""){T1=undefined;}var U1=R1&&R1.getText();if(U1===""){U1=undefined;}if(G1&&S1&&I1&&T1&&K1&&U1){if((G1===S1||!S1)&&(I1===T1||!T1)&&(K1===U1||!U1)){var V1=A.getStableIdPartFromFacet(L1)+"::contactTitleArea";var W1=i.byId(V1);if(W1&&W1.setVisible){W1.setVisible(false);}}}}}function Z(i,j,k,F1,G1){var H1=r.getOwnerComponent().getAppComponent().getManifestEntry("sap.app");var I1=H1.crossNavigation.outbounds[i.data("CrossNavigation")];var J1;if(c.isSmartChart(i)){J1=v.getOwnerControl(F1)||v.getOwnerControl(i);}else{J1=v.getOwnerControl(i)&&v.getOwnerControl(i).getParent();}W(I1,j,k,J1,Object.create(null),G1);}function $(i,j){window.location.href=i.mParameters.href;}function _(i,j){v.fnProcessDataLossOrDraftDiscardConfirmation(function(){var k=i.data('SemanticObject');var F1=i.data('Action');var G1=i.data('SemanticAttributes');if(k&&F1){var H1={semanticObject:k,action:F1};if(G1){G1="{"+G1+"}";H1.semanticAttributes=JSON.parse(G1);}X(H1,i);}},Function.prototype,undefined,(s.isDraftEnabled()&&"NavigateExternal")||undefined);}function a1(k,F1,G1,H1,I1){var J1;var K1=k.getModel().getMetaModel();var L1=function(){var l2=function(){var t2=F1.originalId;var u2=r.getView().byId(t2);if(!u2){var v2=document.querySelector("#"+t2.replace(/(:|\.|\[|\]|,|=)/g,"\\$1"));if(v2){var w2=v2.closest('[data-sap-ui]');if(w2){u2=sap.ui.getCore().byId(w2.id);}}}return u2&&u2.mProperties.fieldName;};var m2=K1.getODataEntitySet(k.getEntitySet());var n2=s.getParameterModelForTemplating().oData.templateSpecific.targetEntities[m2.entityType].mTargetEntities;J1=l2();if(n2[J1]){var o2=n2[J1].entityType;var p2=K1.getODataEntityContainer().entitySet.find(function(m2){return m2.entityType==o2;}).name;var M1={navigation:n2[J1].navName,entitySet:p2,entityType:o2};var q2=K1.getODataEntityType(o2);if(q2&&q2["com.sap.vocabularies.UI.v1.HeaderInfo"]){var r2=K1.getODataEntityType(o2,true)+"/com.sap.vocabularies.UI.v1.HeaderInfo";M1.headerInfoPath=r2;}if(q2&&q2["com.sap.vocabularies.UI.v1.QuickViewFacets"]){var s2=K1.getODataEntityType(o2,true)+"/com.sap.vocabularies.UI.v1.QuickViewFacets";M1.quickViewFacetODataPath=s2;}if(M1.headerInfoPath||M1.quickViewFacetODataPath){return M1;}}};var M1=L1();var N1=false;var O1=false;var P1=false;var Q1=[];if(M1){if(M1.quickViewFacetODataPath){var R1=K1.createBindingContext(M1.quickViewFacetODataPath,true);var S1=R1&&R1.getModel().getObject(R1.getPath());if(S1){N1=true;for(var j=0;j<S1.length;j++){var T1=S1[j];if(T1&&T1.Target&&T1.Target.AnnotationPath){if(T1.Target.AnnotationPath.indexOf("com.sap.vocabularies.UI.v1.FieldGroup")>-1){O1=true;}else if(T1.Target.AnnotationPath.indexOf("com.sap.vocabularies.Communication.v1.Contact")>-1){P1=true;Q1.push(T1);}}}}}}if(N1){var U1,V1;U1=K1.getODataEntitySet(k.getEntitySet());V1=K1.getODataEntityType(U1.entityType);var W1=M1.headerInfoPath&&K1.createBindingContext(M1.headerInfoPath,true);var I1=F1.mainNavigation;var X1=F1.semanticObject;var Y1,Z1;if(X1&&I1){var $1=I1.getTarget&&I1.getTarget()||"";var _1=I1.getKey&&I1.getKey();if(_1){var a2=_1.split(X1+"-");Y1=a2&&a2[1];if(X1&&Y1){Z1={"Target":$1,"SemanticObject":X1,"Action":Y1};}if(F1.semanticAttributes){Z1.SemanticAttributes=F1.semanticAttributes;for(var i in F1.semanticAttributes){var b2=F1.semanticAttributes[i];if(b2.indexOf("{\"__deferred\":")>-1){delete Z1.SemanticAttributes[i];}if(b2.indexOf("{\"__ref\":")>-1){delete Z1.SemanticAttributes[i];}}if(Z1.SemanticAttributes){var c2=JSON.stringify(Z1.SemanticAttributes);if(c2&&c2.length>1){Z1.SemanticAttributes=c2.substring(1,c2.length-1);}}}}}var d2=K1.getODataProperty(V1,J1);var e2=k&&k.mProperties&&k.mProperties.fieldSemanticObjectMap;var f2=new J({sourceClickedField:d2,sourceEntityType:V1,showFieldGroup:O1,showContact:P1,ignoredFields:e2,navigationPath:M1.navigation,mainNavigation:Z1});f2.setDefaultBindingMode("OneWay");var g2;var h2=C.extend("",{oState:G1,_templateEventHandlers:{onSemanticObjectLinkNavigationPressed:r._templateEventHandlers.onSemanticObjectLinkNavigationPressed.bind(r._templateEventHandlers),onDataFieldWithIntentBasedNavigation:r._templateEventHandlers.onDataFieldWithIntentBasedNavigation.bind(r._templateEventHandlers)},onInit:function(){},onExit:function(){},onAfterRendering:function(){var i2=this.oView;var l2=i2.getParent().getParent().getParent();l2.setBusy(false);}});g2=new h2();h2.connectToView=r.connectToView.bind(g2);var i2=sap.ui.view({async:true,preprocessors:{xml:{bindingContexts:{sourceEntitySet:K1.createBindingContext(K1.getODataEntitySet(k.getEntitySet(),true)),entitySet:K1.createBindingContext(K1.getODataEntitySet(M1.entitySet,true)),header:W1,facetCollection:R1},models:{sourceEntitySet:K1,entitySet:K1,header:K1,facetCollection:K1,quickView:f2,parameter:s.getParameterModelForTemplating()}}},controller:g2,type:V.XML,viewName:"sap.suite.ui.generic.template.fragments.QuickViewSmartForm",height:"100%"});F1.show(undefined,undefined,undefined,i2);var j2=function(l2){var m2=l2.getSource();if(m2){var n2=m2.getParent().getParent().getParent();n2.setBusy(true);n2.setBusyIndicatorDelay(10);}};i2.attachBeforeRendering(j2.bind(this));var k2=function(l2){var m2=l2.getSource();if(m2){var n2=m2.byId("ownTitleArea");if(n2){var o2=m2.getParent();if(o2&&o2.getItems){var p2=o2.getItems()&&o2.getItems()[0];if(p2&&p2!=m2){p2.setVisible(false);}}}if(P1&&Q1&&n2){Y(m2,Q1);}}};i2.attachAfterRendering(k2.bind(this));}else{F1.show(H1,I1,undefined,undefined);}}function b1(r,i){var F1=r.getView&&r.getView().getBindingContext();var G1=F1.getObject();var H1=r.getOwnerComponent().getModel().getMetaModel();var I1=H1.getODataEntitySet(r.getOwnerComponent().getEntitySet());var J1=H1.getODataEntityType(I1.entityType);var K1=J1["com.sap.vocabularies.Common.v1.SemanticKey"];var L1={};if(K1&&K1.length>0){for(var j=0;j<K1.length;j++){var M1=K1[j].PropertyPath;if(!L1[M1]){L1[M1]=[];L1[M1].push(G1[M1]);}}}else{for(var k in J1.key.propertyRef){var N1=J1.key.propertyRef[k].name;if(!L1[N1]){L1[N1]=[];L1[N1].push(G1[N1]);}}}return L1;}function c1(k,i,F1,G1){if(k[i].entitySet==F1&&G1===k[i].navigationProperty&&k[i].navigation&&k[i].navigation["display"]&&(k[i].component&&k[i].component.settings&&k[i].component.settings.hideChevronForUnauthorizedExtNav===true)){return k[i].navigation.display.target;}else if(k[i].entitySet==F1&&k[i].navigation&&k[i].navigation["display"]&&(k[i].component&&k[i].component.settings&&k[i].component.settings.hideChevronForUnauthorizedExtNav===true)){return k[i].navigation.display.target;}else if(k[i].pages){for(var j=0;j<(k[i].pages.length);j++){var H1=c1(k[i].pages,j,F1,G1);if(H1!==undefined&&H1!==null){return H1;}}}}function d1(i){var j=i.getSource().getTable();var k=i.getSource().getEntitySet();var F1=i.getSource().getTableBindingPath();var G1=sap.ushell&&sap.ushell.Container&&sap.ushell.Container.getService&&sap.ushell.Container.getService("CrossApplicationNavigation");var H1=r.getOwnerComponent().getAppComponent().getConfig().pages;var I1=c1(H1,0,k,F1);if(I1!==undefined&&I1!==null&&G1){var J1=r.getOwnerComponent().getAppComponent().getManifestEntry("sap.app").crossNavigation.outbounds[I1];if(J1){var K1=J1.semanticObject;var L1=J1.action;var M1=r.getView().getModel("_templPriv");var N1=M1.getProperty("/generic/supportedIntents/");var O1=(F1==="")?k:k+"::"+F1;var P1=M1.getProperty("/generic/supportedIntents/"+K1+"/"+L1+"/"+O1);if(!P1){var Q1={},R1;var S1=r.getOwnerComponent().getAppComponent();for(var T1 in J1.parameters){if(!g(J1.parameters[T1])){Q1[T1]=J1.parameters[T1];}}if(r.getMetadata().getName()==='sap.suite.ui.generic.template.ObjectPage.view.Details'){R1=b1(r,S1);}var U1={semanticObject:K1,action:L1};var V1=f({},R1,Q1);var W1={target:U1,params:V1};var X1=G1.isNavigationSupported([W1],S1);X1.done(function(Y1){var Z1=M1.getProperty("/generic/supportedIntents/"+K1);if(!Z1){N1[K1]={};N1[K1][L1]={};N1[K1][L1][O1]={"supported":Y1[0].supported};}else if(!Z1[L1]){Z1[L1]={};Z1[L1][O1]={"supported":Y1[0].supported};}else{Z1[L1][O1]={"supported":Y1[0].supported};}M1.updateBindings();if(Y1[0].supported&&c.isUiTable(j)){var $1=j.getRowActionTemplate();$1.getItems()[0].setVisible(true);j.setRowActionTemplate($1);}});}}}}function e1(i){if(c.isSmartTable(i.getSource())){v.setEnabledToolbarButtons(i.getSource());d1(i);}}function f1(F1,G1){var H1=F1.getSource();var I1=H1.getTable();var J1=c.isMTable(I1);var K1=I1.getColumns();if(!G1||(G1&&G1.isPopinWithoutHeader)&&J1){for(var L1=0;L1<K1.length;L1++){var M1=K1[L1].data("p13nData")&&K1[L1].data("p13nData").columnKey;if(M1&&(M1.search("template::DataFieldForIntentBasedNavigation")>-1||M1.search("template::DataFieldForAction")>-1)){K1[L1].setPopinDisplay("WithoutHeader");}}}var N1=F1.getParameter("bindingParams");N1.parameters=N1.parameters||{};if(H1.data().allowSearchWorkListLight||H1&&H1.data&&H1.data().searchString){N1.parameters["custom"]={"search":F1.getSource().data().searchString};H1.data("allowSearchWorkListLight",false);if(F1.getSource().data().searchString){N1.parameters["custom"]={"search":F1.getSource().data().searchString};}}var O1=r.byId(H1.getSmartFilterId());var P1=H1.getCustomData();var Q1={};for(var k=0;k<P1.length;k++){Q1[P1[k].getKey()]=P1[k].getValue();}var R1=Q1.InitialExpansionLevel;if(R1){N1.parameters.numberOfExpandedLevels=parseInt(R1,10);}if(!O1&&r.getMetadata().getName()==='sap.suite.ui.generic.template.ListReport.view.ListReport'){O1=r.byId("listReportFilter");var S1=O1.getBasicSearchValue();if(S1){N1.parameters["custom"]={"search":S1};}}var T1=[];var U1=[];function V1(i,j,Z1,$1,_1){for(var a2=0;a2<i.length;a2++){var b2=i[a2];if(b2){var c2=j.getODataProperty(Z1,b2);if(c2){var d2=c2["com.sap.vocabularies.Common.v1.FieldControl"];if(d2&&d2!==" "&&d2.Path){if(G1.isFieldControlRequired||U1.indexOf(b2)!==-1){T1.push(d2.Path);}}}}}var e2=$1["Org.OData.Capabilities.V1.DeleteRestrictions"];T1.push(e2&&e2.Deletable&&e2.Deletable.Path);var f2=$1["Org.OData.Capabilities.V1.UpdateRestrictions"];T1.push(f2&&f2.Updatable&&f2.Updatable.Path);var g2=Z1[_1+"@com.sap.vocabularies.UI.v1.Criticality"];T1.push(g2&&g2.Path);}function W1(i,j,Z1){var $1,_1=[];if(i.Value&&i.Value.Path){$1=j.getODataProperty(Z1,i.Value.Path);if($1){if($1["com.sap.vocabularies.Common.v1.Text"]){_1[0]=$1["com.sap.vocabularies.Common.v1.Text"].Path;}if($1["sap:text"]){_1[0]=$1["sap:text"];}}if(!_1[0]){_1[0]=i.Value.Path;}}if(i.SemanticObject&&i.SemanticObject.Path){_1.push(i.SemanticObject.Path);}if(i.Action&&i.Action.Path){_1.push(i.Action.Path);}return _1;}function X1(i,j){var Z1=j.getODataFunctionImport(i.Action.String,true);if(Z1){var $1=j.getObject(Z1);if($1["sap:action-for"]!==" "&&$1["sap:applicable-path"]!==" "){return $1["sap:applicable-path"];}}return null;}function Y1(i,j){var Z1=[];if(i.Target&&i.Target.AnnotationPath){var $1=i.Target.AnnotationPath;var _1=$1.split("@")[1];var a2=j[_1];if(a2&&a2.MeasureAttributes){if(a2.MeasureAttributes[0]&&a2.MeasureAttributes[0].DataPoint&&a2.MeasureAttributes[0].DataPoint.AnnotationPath){var b2=a2.MeasureAttributes[0].DataPoint.AnnotationPath.split("@")[1];var c2=j[b2];if(c2){for(var d2 in c2){Z1.push(c2[d2]&&c2[d2].Path);if(d2==="CriticalityCalculation"&&c2.CriticalityCalculation){for(var e2 in c2.CriticalityCalculation){Z1.push(c2.CriticalityCalculation[e2].Path);}}}}}}Z1.push(a2&&a2.Measures&&a2.Measures[0]&&a2.Measures[0].PropertyPath);}return Z1;}G1=G1||Object.create(null);G1.setBindingPath=H1.setTableBindingPath.bind(H1);G1.addNecessaryFields=function(Z1,$1,_1){var a2=H1.getModel().getMetaModel();var b2=a2.getODataEntitySet(_1);var c2=a2.getODataEntityType(b2.entityType);if(Z1.length>0){var d2=H1.data("lineItemQualifier");var e2="com.sap.vocabularies.UI.v1.LineItem"+(d2?"#"+d2:"");var f2=c2[e2]||[];for(var g2=0;g2<f2.length;g2++){switch(f2[g2].RecordType){default:break;case"com.sap.vocabularies.UI.v1.DataFieldWithIntentBasedNavigation":case"com.sap.vocabularies.UI.v1.DataFieldWithNavigationPath":var h2=W1(f2[g2],a2,c2);if(h2){T1=T1.concat(h2);}break;case"com.sap.vocabularies.UI.v1.DataFieldForAction":if(G1.isDataFieldForActionRequired){var i2=X1(f2[g2],a2);if(i2){U1.push(i2);T1.push(i2);}}break;case"com.sap.vocabularies.UI.v1.DataFieldForAnnotation":var j2=f2[g2];if(j2.Target&&j2.Target.AnnotationPath&&j2.Target.AnnotationPath.indexOf("com.sap.vocabularies.UI.v1.FieldGroup")>=0){var k2=j2.Target.AnnotationPath;var l2=c2[k2.split("@")[1]];f2=f2.concat(l2&&l2.Data);continue;}var m2=Y1(j2,c2);for(var n2=0;n2<m2.length;n2++){if(m2[n2]){T1.push(m2[n2]);}}break;}}if(G1.isFieldControlsPathRequired){V1(Z1,a2,c2,b2,e2);var o2=v.getBreakoutActions(H1);for(var p2 in o2){T1.push(o2[p2].requiresSelection&&o2[p2].applicablePath);}var q2=u.oDraftController.getDraftContext();if(q2.isDraftEnabled(_1)&&q2.isDraftRoot(_1)&&q2.hasDraftAdministrativeData(_1)){if(Z1.length>0){T1.push("DraftAdministrativeData");}}}}var r2=H1.fetchVariant();if(!Q1.TemplateSortOrder&&G1&&G1.determineSortOrder){Q1.TemplateSortOrder=G1.determineSortOrder();}if((!r2||!r2.sort)&&Q1.TemplateSortOrder){var s2=Q1.TemplateSortOrder.split(", ");for(var j=0;j<s2.length;j++){var t2=s2[j].split(" ");if(t2.length>1){N1.sorter.push(new S(t2[0],t2[1]==="true"));}else{N1.sorter.push(new S(t2[0]));}}}for(var i=0;i<T1.length;i++){$1(T1[i]);}};v.onBeforeRebindTableOrChart(F1,G1,O1);}function g1(i,j,k,F1,G1){var H1=new E("press",i,j);F1=F1||i.getBindingContext();if(r.onListNavigationExtension&&r.onListNavigationExtension(H1,F1,G1)){return;}if(i.data("CrossNavigation")){var I1=w(H1);var J1=I1.getEntitySet();v.setExternalChevronRefreshBehaviour(J1);Z(i,F1,k.oSmartFilterbar,Object.create(null),true);return;}D(i,k);v.navigateFromListItem(F1,G1);}function h1(i,j,k,F1){var G1=r.getOwnerComponent().getModel("_templPrivGlobal");p.setPlaceHolderPreconditions(G1);var H1,I1={};if(i instanceof E){H1=i.getSource();I1=i.getParameters();if(c.isMTable(H1)){H1=i.getParameter('listItem');I1.id=H1.getId();}}else{H1=i;}if(F1){g1(H1,I1,j,k,true);}else{var J1=s.getViewLevel();var K1=u.oApplication.getCurrentKeys(J1+1);var L1=K1.length>J1+1;if(H1.data("CrossNavigation")||(!H1.data("CrossNavigation")&&!s.isDraftEnabled())){v.fnProcessDataLossOrDraftDiscardConfirmation(g1.bind(null,H1,I1,j,k,L1),Function.prototype,undefined,(s.isDraftEnabled()&&"NavigateExternal")||undefined);}else{g1(H1,I1,j,k,L1);}}}function i1(i){u.oApplication.performAfterSideEffectExecution(function(){if(u.oApplication.getBusyHelper().isBusy()){l.info("Ignore incorrect selection, since app is busy anyway");return;}var j=i?"ST_GENERIC_MULTIPLE_ITEMS_SELECTED":"ST_GENERIC_NO_ITEM_SELECTED";M.error(v.getText(j),{styleClass:v.getContentDensityClass()});});}function j1(k){var F1,i,G1;var H1=r.getOwnerComponent(),I1=k.getSource().getCustomData(),J1="10rem";if(I1.length===0){return;}for(i=0,G1=I1.length;i<G1;i++){if(I1[i].getProperty("key")==="Target"){F1=I1[i].getProperty("value");break;}}if(!F1){M.show(v.getText("ST_GENERIC_ERROR_IN_NAVIGATION"),{icon:M.Icon.ERROR,title:v.getText("ST_ERROR"),actions:[sap.m.MessageBox.Action.CLOSE],horizontalScrolling:true,contentWidth:J1,details:v.getText("ST_GENERIC_ERROR_IN_NAVIGATION_PROPERTY_MISSING",["DataFieldWithNavigationPath"])});return;}var K1=H1.getModel(),L1=K1.getMetaModel();var M1=k.getSource().getBindingContext().getPath(),N1=M1.slice(1,M1.indexOf("(")),O1=L1.getODataEntityType(L1.getODataEntitySet(N1).entityType),j,P1=false,Q1=O1.navigationProperty.length;for(j=0;j<Q1;j++){if(O1.navigationProperty[j].name===F1){P1=true;break;}}if(!P1){M.show(v.getText("ST_GENERIC_ERROR_IN_NAVIGATION"),{icon:M.Icon.ERROR,title:v.getText("ST_ERROR"),actions:[sap.m.MessageBox.Action.CLOSE],horizontalScrolling:true,contentWidth:J1,details:v.getText("ST_GENERIC_ERROR_NAVIGATION_PROPERTY_NOT_CORRECT",[F1,"DataFieldWithNavigationPath"])});return;}var R1=L1.getODataAssociationEnd(O1,F1),S1=L1.getODataEntityType(R1.type),T1,U1;if(S1){T1=S1.namespace+"."+S1.name;}var V1=L1.getODataEntityContainer().entitySet;for(i=0,G1=V1.length;i<G1;i++){if(V1[i].entityType===T1){U1=V1[i].name;break;}}if(!U1){var W1=T1.split(".")[1];W1=W1.slice(0,W1.length-4);M.show(v.getText("ST_GENERIC_ERROR_IN_NAVIGATION"),{icon:M.Icon.ERROR,title:v.getText("ST_ERROR"),actions:[sap.m.MessageBox.Action.CLOSE],horizontalScrolling:true,contentWidth:J1,details:v.getText("ST_NAV_ERROR_TARGET_ENTITYSET_IS_MISSING",[W1])});return;}var X1=v.getNavigationKeyProperties(U1),Y1=u.oNavigationController,Z1={"$expand":""};if(s.isDraftEnabled()){Z1={"$expand":"DraftAdministrativeData"};}var $1=new Promise(function(_1,a2){K1.read(M1+"/"+F1,{urlParameters:Z1,success:function(b2){_1(b2);u.oApplication.invalidatePaginatorInfo();var c2=v.mergeNavigationKeyPropertiesWithValues(X1,b2);u.oApplication.setStoredTargetLayoutToFullscreen(1);Y1.navigateToContext(c2,null,false);},error:function(b2){a2(b2);}});});s.getBusyHelper().setBusy($1);}function k1(i,j){var k=i.getSource();var F1=v.getElementCustomData(k);var G1=v.getOwnerControl(k);G1=c.isMTable(G1)?G1.getParent():G1;var H1=v.getSelectedContexts(G1);m1(k,F1,H1,j);}function l1(i,j){var k=i.getSource();var F1=k.getParent().getBindingContext();var G1=k.data("SemanticObject");var H1=k.data("Action");v.fnProcessDataLossOrDraftDiscardConfirmation(function(){var I1={action:H1,semanticObject:G1};W(I1,F1,j.oSmartFilterbar||undefined,j.oSmartTable||k,j);},Function.prototype,j,(s.isDraftEnabled()&&"NavigateExternal")||undefined);}function m1(i,j,k,F1){var G1={action:j.Action,semanticObject:j.SemanticObject};W(G1,k,F1.oSmartFilterbar||undefined,F1.oSmartTable||i);}function n1(i,j,k){var F1=v.getElementCustomData(i);var G1=v.getSelectedContexts(j);var H1=!(F1.RequiresContext&&F1.RequiresContext==="false");if(H1&&!G1.length){i1(G1.length);}else{v.fnProcessDataLossOrDraftDiscardConfirmation(function(){m1(i,F1,G1,k);},Function.prototype,k,(s.isDraftEnabled()&&"NavigateExternal")||undefined);}}function o1(i,j){v.fnProcessDataLossOrDraftDiscardConfirmation(function(){var k={semanticObject:i.data("SemanticObject"),action:i.data("Action")};var F1=i.getParent().getBindingContext();W(k,F1,j.oSmartFilterbar,j.oSmartTable||i,j);},Function.prototype,j,(s.isDraftEnabled()&&"NavigateExternal")||undefined);}function p1(i,j){var k=i.getSource();var F1=v.getOwnerControl(k).getParent();var G1=[k.getBindingContext()];var H1=v.getElementCustomData(k);var I1=F1.getEntitySet();v.triggerAction(G1,I1,H1,F1,j);}function q1(i,j){var k=r.getView();var F1=i.getSource().data();var G1=j?v.getSelectedContexts(j):[k.getBindingContext()];if(F1.ActionFor&&G1.length===0){i1(G1.length);}else{var H1=i.getSource();var F1=v.getElementCustomData(H1);var I1=j?j.getEntitySet():r.getOwnerComponent().getEntitySet();v.triggerAction(G1,I1,F1,j);}}function r1(i,j){var k,F1="";var G1=v.getOwnerControl(i.getSource());G1=c.isMTable(G1)?G1.getParent():G1;var H1=i.getSource().data();var I1=v.getSelectedContexts(G1);if(c.isSmartTable(G1)){k=G1.getTable();F1=G1.getEntitySet();}else if(c.isSmartChart(G1)){G1.getChartAsync().then(function(M1){k=M1;});F1=G1.getEntitySet();}var J1=t1(I1,H1);if(H1.ActionFor&&J1.inApplicableCount>0&&(c.isSmartTable(G1)&&((k.getMode&&k.getMode()==="MultiSelect")||(k.getSelectionMode&&k.getSelectionMode()==="MultiToggle")))){var K1=v.getText("ST_GENERIC_WARNING_TEXT",[J1.inApplicableCount]);J1.warningText=K1;var L1={functionImportPath:H1.Action,contexts:J1.aApplicableContexts,sourceControl:k,label:H1.Label,operationGrouping:H1.InvocationGrouping,sEntitySet:F1,oState:j};s1(G1).then(function(M1){var N1=M1.getModel("Action");N1.setData(L1);var O1=new sap.ui.model.json.JSONModel(J1);M1.setModel(O1,"list");var P1=M1.getModel("list");P1.setData(J1);M1.open();});}else{u1({functionImportPath:H1.Action,contexts:I1,sourceControl:k,label:H1.Label,operationGrouping:H1.InvocationGrouping},j,F1);}}function s1(i){return v.getDialogFragmentAsync("sap.suite.ui.generic.template.fragments.ActionConfirmation",{onCancel:function(j){var k=j.getSource().getParent();k.close();},onContinue:function(j){var k=j.getSource().getParent();var F1=j.getSource().getParent().getModel("Action").getData();u1({functionImportPath:F1.functionImportPath,contexts:F1.contexts,sourceControl:F1.sourceControl,label:F1.label,operationGrouping:F1.operationGrouping},F1.oState,F1.sEntitySet);k.close();}},"Action");}function t1(j,k){var F1,G1,H1,I1;var J1=r.getView().getModel();var K1=J1.getMetaModel();if(j&&j.length>0){H1=j[0].sPath.substring(1,j[0].sPath.indexOf('('));I1=K1.getODataEntitySet(H1);}if(I1){var L1=k.Action.split("/")[1];var M1=[],N1=[];var O1={aInApplicableItems:undefined,inApplicableCount:0,dialogTitle:k.Label,warningText:undefined,aApplicableContexts:undefined};if(L1){G1=K1.getODataFunctionImport(L1)["sap:applicable-path"];}var P1=r.getView().getModel("@i18n")&&r.getView().getModel("@i18n").getResourceBundle();var Q1=e.getAnnotationFormatter(J1,H1,"/com.sap.vocabularies.UI.v1.HeaderInfo/Title/Value",P1);for(var i=0;i<j.length;i++){F1=J1.getObject(j[i].getPath());if(G1&&F1[G1]===false){O1.inApplicableCount++;M1.push({sKey:Q1.format(j[i])});}else{N1.push(j[i]);}}Q1.done();O1.aInApplicableItems=M1;O1.aApplicableContexts=N1;}return O1;}function u1(j,k,F1){var G1;u.oDataLossHandler.performIfNoDataLoss(function(){u.oCRUDManager.callAction({functionImportPath:j.functionImportPath,contexts:j.contexts,sourceControl:j.sourceControl,label:j.label,operationGrouping:j.operationGrouping},k).then(function(H1){if(H1&&H1.length){for(var i=0;i<H1.length;i++){G1=H1[i];if(G1.response&&G1.context&&(!G1.actionContext||G1.actionContext&&G1.context.getPath()!==G1.actionContext.getPath())){u.oApplication.getBusyHelper().getUnbusy().then(u.oViewDependencyHelper.setMeToDirty.bind(null,r.getOwnerComponent(),F1));break;}}}},Function.prototype);},Function.prototype,"Proceed");}function v1(i,j,k,F1,G1,H1){var I1=v.getOwnerControl(i);I1=c.isSmartTable(I1)?I1:I1.getParent();var J1=I1.getEntitySet();var K1=r.getOwnerComponent();if(i.data("CrossNavigation")){u.oApplication.getLeaveAppPromise().then(u.oViewDependencyHelper.setMeToDirty.bind(null,K1,J1));Z(i,i.getBindingContext(),k,Object.create(null),true);return new Promise(function(O1){O1();});}var L1=u.oApplication.getBusyHelper();var M1=s.getNonDraftCreatePromise(J1,F1);if(M1){L1.setBusy(M1);return M1;}var N1=function(O1){var P1=u.oCRUDManager.addEntry(I1,O1).then(function(Q1){if(H1){return Q1;}else if(!j){u.oApplication.navigateToSubContext(Q1,false,4);L1.getUnbusy().then(u.oViewDependencyHelper.setMeToDirty.bind(null,K1,J1));}else if(!G1){v.refreshSmartTable(I1);u.oApplicationController.executeSideEffects(K1.getBindingContext(),[],[I1.getTableBindingPath()]);return Q1;}});P1.catch(Function.prototype);return P1;};if(F1 instanceof Promise){return F1.then(N1);}else{return N1(F1);}}function w1(){var i={batchGroupId:"Changes",changeSetId:"Changes",draftSave:true,noBlockUI:true,noShowResponse:true,onlyIfPending:true,pendingChanges:true,forceSubmit:true};u.oTransactionController.triggerSubmitChanges(i);}function x1(i){var j=w(i);var k=i.getParameter("listItem");var F1=k.getBindingContext();z1(j,[F1]);}function y1(i){var j=w(i);var k=v.getSelectedContexts(j);z1(j,k);}function z1(i,j){if(j.length>0){var k=P(j,i);var F1=Promise.resolve(r.beforeDeleteExtension({aContexts:j}));F1.then(function(G1){var H1=u.oApplication.getBusyHelper();H1.setBusy(k);k.then(function(I1){f(I1.text,G1);K(i).then(function(J1){var K1=J1.getModel("delete");K1.setData(I1);J1.open();});},Function.prototype);});}else{M.error(v.getText("ST_GENERIC_NO_ITEM_SELECTED"),{styleClass:v.getContentDensityClass()});}}function A1(j){var k=j.getSource();var F1=k.getModel();var G1=JSON.parse(j.getSource().data("contactDetails"));var H1=F1.getContext(j.getSource().getBindingContext().getPath());v.getDialogFragmentAsync("sap.suite.ui.generic.template.fragments.ContactDetails",{},"contact").then(function(I1){var J1=I1.getModel("contact");var K1;J1.setProperty("/",{});J1.setProperty("/device",sap.ui.Device);(G1.fn&&G1.fn.Path)?J1.setProperty("/fn",(H1.getProperty(G1.fn.Path))):J1.setProperty("/fn",(G1.fn&&G1.fn.String));(G1.title&&G1.title.Path)?J1.setProperty("/title",(H1.getProperty(G1.title.Path))):J1.setProperty("/title",(G1.title&&G1.title.String));(G1.photo&&G1.photo.Path)?J1.setProperty("/photo",(H1.getProperty(G1.photo.Path))):J1.setProperty("/photo",(G1.photo&&G1.photo.String));(G1.role&&G1.role.Path)?J1.setProperty("/role",(H1.getProperty(G1.role.Path))):J1.setProperty("/role",(G1.role&&G1.role.String));(G1.org&&G1.org.Path)?J1.setProperty("/org",(H1.getProperty(G1.org&&G1.org.Path))):J1.setProperty("/org",(G1.org&&G1.org.String));if(G1.email&&G1.email[0]&&!J1.getProperty("/email")){K1=G1.email[0].type&&G1.email[0].type.EnumMember;if(K1&&K1.indexOf("com.sap.vocabularies.Communication.v1.ContactInformationType/work")>-1){if(G1.email[0].address&&G1.email[0].address.Path){J1.setProperty("/email",(H1.getProperty(G1.email[0].address.Path)));}else{J1.setProperty("/email",(G1.email[0].address&&G1.email[0].address.String));}}}var L1=(G1.tel&&G1.tel.length)||0;for(var i=0;i<L1;i++){if(G1.tel[i]&&!J1.getProperty("/fax")){K1=G1.tel[i].type&&G1.tel[i].type.EnumMember;if(K1&&K1.indexOf("com.sap.vocabularies.Communication.v1.PhoneType/fax")>-1){if(G1.tel[i].uri&&G1.tel[i].uri.Path){J1.setProperty("/fax",(H1.getProperty(G1.tel[i].uri.Path)));}else{J1.setProperty("/fax",(G1.tel[i].uri&&G1.tel[i].uri.String));}continue;}}if(G1.tel[i]&&!J1.getProperty("/cell")){K1=G1.tel[i].type&&G1.tel[i].type.EnumMember;if(K1&&K1.indexOf("com.sap.vocabularies.Communication.v1.PhoneType/cell")>-1){if(G1.tel[i].uri&&G1.tel[i].uri.Path){J1.setProperty("/cell",(H1.getProperty(G1.tel[i].uri.Path)));}else{J1.setProperty("/cell",(G1.tel[i].uri&&G1.tel[i].uri.String));}continue;}}if(G1.tel[i]&&!J1.getProperty("/work")){K1=G1.tel[i].type&&G1.tel[i].type.EnumMember;if(K1&&K1.indexOf("com.sap.vocabularies.Communication.v1.PhoneType/work")>-1){if(G1.tel[i].uri&&G1.tel[i].uri.Path){J1.setProperty("/work",(H1.getProperty(G1.tel[i].uri.Path)));}else{J1.setProperty("/work",(G1.tel[i].uri&&G1.tel[i].uri.String));}continue;}}}I1.openBy(k);});}function B1(i,j){var k=u.oApplication.getNavigationHandler();var F1=U(i,null,j);r.adaptNavigationParameterExtension(F1,i);v.setComponentRefreshBehaviour(i);k.navigate(i.semanticObject,i.action,F1.toJSONString(),null,H);}function C1(i,j){var k=i.getSource();D1(k,j);}function D1(i,j){var k=i.data('LabelId');var F1=j+'--'+k;var G1=sap.ui.getCore().byId(F1);if(G1){G1.attachFieldVisibilityChange(i);}}function E1(i,j,k,F1,G1){var H1,I1;if(i){if(j){H1=[" ",i,j];var J1=r.getOwnerComponent().getAppComponent().getConfig();var K1=J1.settings&&J1.settings.flexibleColumnLayout?true:false;if(K1){var L1=r.getOwnerComponent().getModel("_templPrivGlobal");if(L1.getProperty("/generic/FCL/isVisuallyFullScreen")){H1.shift();if(k){I1=G1?v.getContextText("DELETE_SELECTED_ITEM_WITH_OBJECTTITLE",G1.getId(),null,H1):v.getText("DELETE_WITH_OBJECTTITLE",H1);}else{I1=F1?v.getText("DELETE_SELECTED_ITEM_WITH_OBJECTTITLE",H1):v.getText("DELETE_WITH_OBJECTTITLE",H1);}}else{if(k){I1=G1?v.getContextText("DELETE_SELECTED_ITEM_WITH_OBJECTINFO",G1.getId(),null,H1):v.getText("DELETE_WITH_OBJECTINFO",H1);}else{I1=F1?v.getText("DELETE_SELECTED_ITEM_WITH_OBJECTINFO",H1):v.getText("DELETE_WITH_OBJECTINFO",H1);}}}else{H1.shift();if(k){I1=G1?v.getContextText("DELETE_SELECTED_ITEM_WITH_OBJECTTITLE",G1.getId(),null,H1):v.getText("DELETE_WITH_OBJECTTITLE",H1);}else{I1=F1?v.getText("DELETE_SELECTED_ITEM_WITH_OBJECTTITLE",H1):v.getText("DELETE_WITH_OBJECTTITLE",H1);}}}else{H1=[i];if(k){I1=G1?v.getContextText("DELETE_SELECTED_ITEM_WITH_OBJECTTITLE",G1.getId(),null,H1):v.getText("DELETE_WITH_OBJECTTITLE",H1);}else{I1=F1?v.getText("DELETE_SELECTED_ITEM_WITH_OBJECTTITLE",H1):v.getText("DELETE_WITH_OBJECTTITLE",H1);}}}else{if(k){I1=G1?v.getContextText("DELETE_SELECTED_ITEM",G1.getId()):v.getText("ST_GENERIC_DELETE_SELECTED");}else{I1=F1?v.getText("DELETE_SELECTED_ITEM"):v.getText("ST_GENERIC_DELETE_SELECTED");}}return I1;}var U=t.testable(U,"fnBuildSelectionVariantForNavigation");var x=t.testable(x,"fnEvaluateParameters");var W=t.testable(W,"fnNavigateIntent");var Y=t.testable(Y,"fnHideTitleArea");var R=t.testable(R,"fnGetSelectedItemContextForDeleteMessage");var P=t.testable(P,"getDataForDeleteDialog");var X=t.testable(X,"CommonEventHandlers_fnNavigateIntentSmartLink");return{onDataReceived:e1,onBeforeRebindTable:f1,onListNavigate:h1,onEditNavigateIntent:Z,onSemanticObjectLinkPopoverLinkPressed:$,onRelatedAppNavigation:B1,onDataFieldWithNavigationPath:j1,onDataFieldForIntentBasedNavigation:k1,onDeterminingDataFieldForIntentBasedNavigation:n1,onDeterminingDataFieldForAction:q1,onInlineDataFieldForIntentBasedNavigation:o1,onDataFieldWithIntentBasedNavigation:l1,onInlineDataFieldForAction:p1,onMultiSelectionChange:G,onCallActionFromToolBar:r1,addEntry:v1,deleteEntry:x1,deleteEntries:y1,onContactDetails:A1,onSmartFieldInitialise:C1,onSmartLabelAttachFieldVisibility:D1,onSemanticObjectLinkNavigationTargetObtained:a1,onSemanticObjectLinkNavigationPressed:_,submitChangesForSmartMultiInput:w1,getSelectedItemContextForDeleteMessage:R,getDeleteText:E1};}return B.extend("sap.suite.ui.generic.template.lib.CommonEventHandlers",{constructor:function(i,j,s,k){f(this,q(i,j,s,k));}});});
