/*!
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/esh/search/ui/controls/SearchFacetItem","sap/m/List","sap/m/ListMode","sap/m/ListSeparators"],function(S,L,a,b){"use strict";return L.extend("sap.esh.search.ui.controls.SearchFacet",{metadata:{properties:{eshRole:{type:"string",defaultValue:"datasource",},},},init:function(){this.data("sap-ui-fastnavgroup","false",true);},constructor:function(i,o){o=jQuery.extend({},{mode:a.SingleSelectMaster,showSeparators:b.None,includeItemInSelection:true,selectionChange:function(e){if(this.getEshRole()==="attribute"){this.handleItemPress(e);}},itemPress:function(e){if(this.getModel().config.searchScopeWithoutAll){return;}if(this.getEshRole()==="datasource"){this.handleItemPress(e);}},},o);L.prototype.constructor.apply(this,[i,o]);this.addStyleClass("sapUshellSearchFacet");},handleItemPress:function(e){var l=e.mParameters.listItem;var s=l.getBindingContext().getObject();var m=this.getModel();var f=s.filterCondition;if(l.getSelected()){if(typeof m.config.cleanUpSpaceFilters==="function"){m.config.cleanUpSpaceFilters(m,f);}m.addFilterCondition(f);m.eventLogger.logEvent({type:m.eventLogger.FACET_FILTER_ADD,referencedAttribute:s.facetAttribute,clickedValue:s.value,clickedPosition:l.getList().getItems().indexOf(l),});}else{m.removeFilterCondition(s.filterCondition);m.eventLogger.logEvent({type:m.eventLogger.FACET_FILTER_DEL,referencedAttribute:s.facetAttribute,clickedValue:s.value,clickedPosition:l.getList().getItems().indexOf(l),});}},renderer:"sap.m.ListRenderer",onAfterRendering:function(){var i=jQuery(this.getDomRef()).closest(".sapUshellSearchFacetIconTabBar").find(".sapUshellSearchFacetInfoZeile")[0];if(i){var I=sap.ui.getCore().byId(i.id);I.setVisible(false);}var m=this.getModel();if(typeof m.config.setQuickSelectDataSourceAllAppearsNotSelected==="function"){m.config.setQuickSelectDataSourceAllAppearsNotSelected(this,m);}},setEshRole:function(r){var i={path:"items",template:new S(),};switch(r.toLowerCase()){case"attribute":var l;if(this.getModel().config&&typeof this.getModel().config.getSearchInFacetListMode==="function"){var c=this.getModel().getProperty(this.getBindingContext().getPath());l=this.getModel().config.getSearchInFacetListMode(c);}this.setMode(l||a.MultiSelect);this.setHeaderText("");break;default:this.setMode(a.SingleSelectMaster);this.setHeaderText(sap.esh.search.ui.resources.i18n.getText("searchIn"));break;}this.bindAggregation("items",i);this.setProperty("eshRole",r);return this;},setModel:function(){return L.prototype.setModel.apply(this,arguments);},});});
