/*!
 * SAPUI5

		(c) Copyright 2009-2021 SAP SE. All rights reserved
	
 */
sap.ui.define(["sap/ui/base/Object","sap/base/Log","sap/m/MessageBox","sap/ui/core/TextDirection"],function(B,L,M,T){("use strict");var E=sap.ui.base.Object.extend("sap.esh.search.ui.error.ErrorHandler",{constructor:function(p){p=p||{};this.searchModel=p.model;this.fnOnError=p.fnOnError||this.defaultErrorHandler;},_getLoggableError:function(e){var l="";if(typeof e.stack!=="undefined"){l=e.stack+"\n";}if(e.previous instanceof Error){l+="Previous error was: "+this._getLoggableError(e.previous)+"\n";}return l;},_addUI5LogMessage:function(e,t){var l=this._getLoggableError(e)+"\n";if(this.searchModel&&this.searchModel.sinaNext){l+=this.searchModel.sinaNext.getDebugInfo()+"\n";}var _=L.getLogger("ErrorHandler");_.error(t,l,"ErrorHandler");},_openMessageBox:function(t,m,s,d){M.error(m+"\n"+s+"\n"+d,{title:t,onClose:null,styleClass:"",initialFocus:null,textDirection:T.Inherit,});},onError:function(e){return this.fnOnError(e);},onErrorDeferred:function(e){this.onError(e);return jQuery.when(true);},defaultErrorHandler:function(e){var t=sap.ui.core.MessageType.Error;var a=e.name||sap.esh.search.ui.resources.i18n.getText("searchError");var m=e.message||sap.esh.search.ui.resources.i18n.getText("error.message");var s=e.solution||sap.esh.search.ui.resources.i18n.getText("error.solution");var d=sap.esh.search.ui.resources.i18n.getText("error.details");switch(e.name){case"TypeError":{m=sap.esh.search.ui.resources.i18n.getText("error.TypeError.message");s=sap.esh.search.ui.resources.i18n.getText("error.TypeError.solution");}break;case"URIError":{s=sap.esh.search.ui.resources.i18n.getText("error.URIError.solution");}break;case"DataSourceAttributeMetadataNotFoundError":{m=sap.esh.search.ui.resources.i18n.getText("error.sina.DataSourceAttributeMetadataNotFoundError.message");s=sap.esh.search.ui.resources.i18n.getText("error.sina.DataSourceAttributeMetadataNotFoundError.solution");}break;case"NoValidEnterpriseSearchAPIConfigurationFoundError":{m=sap.esh.search.ui.resources.i18n.getText("error.sina.NoValidEnterpriseSearchAPIConfigurationFoundError.message")+"\n"+e.message;s=sap.esh.search.ui.resources.i18n.getText("error.sina.NoValidEnterpriseSearchAPIConfigurationFoundError.solution");}break;case"InBetweenConditionInConsistent":{m=sap.esh.search.ui.resources.i18n.getText("error.sina.InBetweenConditionInConsistent.description");s=sap.esh.search.ui.resources.i18n.getText("error.sina.InBetweenConditionInConsistent.solution");}}if(typeof this.searchModel==="undefined"||this.searchModel===null){this._addUI5LogMessage(e,a);this._openMessageBox(a,m,s,d);return;}this.searchModel.setProperty("/boResults",[]);this.searchModel.setProperty("/origBoResults",[]);this.searchModel.setProperty("/boCount",0);this.searchModel.setProperty("/nlqSuccess",false);this.searchModel.setProperty("/nlqDescription","");this.searchModel.setProperty("/isBusy",false);this._addUI5LogMessage(e,a);if(s){m=m+"\n\n"+s+"\n\n "+d;}var u={type:t,title:a,description:m,};this.searchModel.pushUIMessage(u);},});return E;});
